[
  {
    "title": "Git Commit Message 規範",
    "date": "2024-11-22T00:00:00.000Z",
    "description": "剛開始寫程式的時候，我的 commit 訊息都很隨便，直到工作才知道原來有規範。這篇整理了 Git Commit Message 寫法。",
    "rawContent": "說實話，剛開始寫程式的時候，我的 commit 訊息都很隨便，什麼 \"fix bug\"、\"update\"、\"test\" 這種毫無意義的訊息滿天飛。\r\n\r\n經過幾個月的實際使用，我整理了這套規範，現在團隊合作時大家都能清楚知道每次 commit 到底改了什麼。\r\n\r\n## 基本格式\r\n\r\n```bash\r\n<type>(<scope>): <subject>\r\n\r\n<body>\r\n\r\n<footer>\r\n```\r\n\r\n## 為什麼要這樣寫？\r\n\r\n讓人清楚得知道該次改動針對了什麼樣的特點做了變化，統一的格式也方便多人協作時閱讀。\r\n\r\nCommit message 其實就三個部分：\r\n\r\n1. **標題（header）** - 快速說明這次改了什麼\r\n2. **正文（body）** - 詳細解釋為什麼要改\r\n3. **尾注（footer）** - 關閉相關的 issue\r\n\r\n## 標題怎麼寫\r\n\r\n標題包含三個部分，其中前兩個最重要：\r\n\r\n- **類型**（type）- 必填，告訴別人這是什麼類型的修改\r\n- **範圍**（scope）- 可選，修改的範圍\r\n- **主題**（subject）- 必填，簡單說明做了什麼\r\n\r\n## Type 類型對照表\r\n\r\n這個表格是我常用的分類，基本上涵蓋了日常開發的所有情況：\r\n\r\n| 類型     | 說明                           |\r\n| -------- | ------------------------------ |\r\n| feat     | 新功能（這個最常用）           |\r\n| fix      | 修復 bug                       |\r\n| docs     | 只改文件，沒動程式碼           |\r\n| style    | 改格式、縮排這些不影響功能的   |\r\n| refactor | 重構代碼，沒加新功能也沒修 bug |\r\n| test     | 加測試或改測試                 |\r\n| chore    | 改建構流程、更新套件這些雜事   |\r\n| perf     | 性能優化                       |\r\n| build    | 改建構系統或外部依賴           |\r\n| ci       | 改 CI/CD 設定                  |\r\n| revert   | 取消之前的 commit              |\r\n| merge    | 合併分支                       |\r\n\r\n## 實際範例\r\n\r\n```bash\r\nfeat(search): add fuzzy search to the search bar\r\n\r\n用戶反映搜尋功能不夠聰明，常常找不到想要的結果。\r\n這次加入模糊搜尋，即使打錯字也能找到相關內容。\r\n\r\nCloses #1234\r\n```\r\n\r\n### 標題寫法\r\n\r\n- **type**: 一定要準確，別偷懶都寫 feat\r\n- **scope**: 不確定就不寫，總比寫錯好\r\n- **subject**: 用動詞開頭，像是 \"add\"、\"fix\"、\"update\"，不要超過 50 個字\r\n\r\n### 正文什麼時候寫\r\n\r\n一開始我都不寫正文，但後來發現有些改動真的需要解釋。特別是那些「為什麼要這樣改」的原因，未來的自己會感謝現在多寫的這幾行字。\r\n\r\n### 尾注的用途\r\n\r\n主要是關聯 issue，像是 `Closes #123` 或 `Fixes #456`。這樣 GitHub 會自動關閉對應的 issue，很方便。",
    "category": "Code",
    "tags": [
      "Git"
    ],
    "image": "/blog/posts/2024/11/git-commit-message.png",
    "headings": [
      {
        "level": 2,
        "text": "基本格式"
      },
      {
        "level": 2,
        "text": "為什麼要這樣寫？"
      },
      {
        "level": 2,
        "text": "標題怎麼寫"
      },
      {
        "level": 2,
        "text": "Type 類型對照表"
      },
      {
        "level": 2,
        "text": "實際範例"
      },
      {
        "level": 3,
        "text": "標題寫法"
      },
      {
        "level": 3,
        "text": "正文什麼時候寫"
      },
      {
        "level": 3,
        "text": "尾注的用途"
      }
    ],
    "slug": "git-commit-message",
    "code": "const{Fragment:e,jsx:n,jsxs:r}=arguments[0];function _createMdxContent(d){const l={code:\"code\",figure:\"figure\",h2:\"h2\",h3:\"h3\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",table:\"table\",tbody:\"tbody\",td:\"td\",th:\"th\",thead:\"thead\",tr:\"tr\",ul:\"ul\",...d.components};return r(e,{children:[n(l.p,{children:'說實話，剛開始寫程式的時候，我的 commit 訊息都很隨便，什麼 \"fix bug\"、\"update\"、\"test\" 這種毫無意義的訊息滿天飛。'}),\"\\n\",n(l.p,{children:\"經過幾個月的實際使用，我整理了這套規範，現在團隊合作時大家都能清楚知道每次 commit 到底改了什麼。\"}),\"\\n\",n(l.h2,{children:\"基本格式\"}),\"\\n\",n(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:n(l.pre,{style:{backgroundColor:\"#282c34\",color:\"#abb2bf\"},tabIndex:\"0\",rawcontent:\"<type>(<scope>): <subject>\\n\\n<body>\\n\\n<footer>\",\"data-language\":\"bash\",\"data-theme\":\"one-dark-pro\",children:r(l.code,{\"data-language\":\"bash\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[r(l.span,{\"data-line\":\"\",children:[n(l.span,{style:{color:\"#ABB2BF\"},children:\"<type\"}),n(l.span,{style:{color:\"#98C379\"},children:\">(\"}),n(l.span,{style:{color:\"#ABB2BF\"},children:\"<\"}),n(l.span,{style:{color:\"#98C379\"},children:\"scope\"}),n(l.span,{style:{color:\"#ABB2BF\"},children:\">\"}),n(l.span,{style:{color:\"#98C379\"},children:\")\"}),n(l.span,{style:{color:\"#ABB2BF\"},children:\": <subject>\"})]}),\"\\n\",n(l.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",n(l.span,{\"data-line\":\"\",children:n(l.span,{style:{color:\"#ABB2BF\"},children:\"<body>\"})}),\"\\n\",n(l.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",n(l.span,{\"data-line\":\"\",children:n(l.span,{style:{color:\"#ABB2BF\"},children:\"<footer>\"})})]})})}),\"\\n\",n(l.h2,{children:\"為什麼要這樣寫？\"}),\"\\n\",n(l.p,{children:\"讓人清楚得知道該次改動針對了什麼樣的特點做了變化，統一的格式也方便多人協作時閱讀。\"}),\"\\n\",n(l.p,{children:\"Commit message 其實就三個部分：\"}),\"\\n\",r(l.ol,{children:[\"\\n\",r(l.li,{children:[n(l.strong,{children:\"標題（header）\"}),\" - 快速說明這次改了什麼\"]}),\"\\n\",r(l.li,{children:[n(l.strong,{children:\"正文（body）\"}),\" - 詳細解釋為什麼要改\"]}),\"\\n\",r(l.li,{children:[n(l.strong,{children:\"尾注（footer）\"}),\" - 關閉相關的 issue\"]}),\"\\n\"]}),\"\\n\",n(l.h2,{children:\"標題怎麼寫\"}),\"\\n\",n(l.p,{children:\"標題包含三個部分，其中前兩個最重要：\"}),\"\\n\",r(l.ul,{children:[\"\\n\",r(l.li,{children:[n(l.strong,{children:\"類型\"}),\"（type）- 必填，告訴別人這是什麼類型的修改\"]}),\"\\n\",r(l.li,{children:[n(l.strong,{children:\"範圍\"}),\"（scope）- 可選，修改的範圍\"]}),\"\\n\",r(l.li,{children:[n(l.strong,{children:\"主題\"}),\"（subject）- 必填，簡單說明做了什麼\"]}),\"\\n\"]}),\"\\n\",n(l.h2,{children:\"Type 類型對照表\"}),\"\\n\",n(l.p,{children:\"這個表格是我常用的分類，基本上涵蓋了日常開發的所有情況：\"}),\"\\n\",r(l.table,{children:[n(l.thead,{children:r(l.tr,{children:[n(l.th,{children:\"類型\"}),n(l.th,{children:\"說明\"})]})}),r(l.tbody,{children:[r(l.tr,{children:[n(l.td,{children:\"feat\"}),n(l.td,{children:\"新功能（這個最常用）\"})]}),r(l.tr,{children:[n(l.td,{children:\"fix\"}),n(l.td,{children:\"修復 bug\"})]}),r(l.tr,{children:[n(l.td,{children:\"docs\"}),n(l.td,{children:\"只改文件，沒動程式碼\"})]}),r(l.tr,{children:[n(l.td,{children:\"style\"}),n(l.td,{children:\"改格式、縮排這些不影響功能的\"})]}),r(l.tr,{children:[n(l.td,{children:\"refactor\"}),n(l.td,{children:\"重構代碼，沒加新功能也沒修 bug\"})]}),r(l.tr,{children:[n(l.td,{children:\"test\"}),n(l.td,{children:\"加測試或改測試\"})]}),r(l.tr,{children:[n(l.td,{children:\"chore\"}),n(l.td,{children:\"改建構流程、更新套件這些雜事\"})]}),r(l.tr,{children:[n(l.td,{children:\"perf\"}),n(l.td,{children:\"性能優化\"})]}),r(l.tr,{children:[n(l.td,{children:\"build\"}),n(l.td,{children:\"改建構系統或外部依賴\"})]}),r(l.tr,{children:[n(l.td,{children:\"ci\"}),n(l.td,{children:\"改 CI/CD 設定\"})]}),r(l.tr,{children:[n(l.td,{children:\"revert\"}),n(l.td,{children:\"取消之前的 commit\"})]}),r(l.tr,{children:[n(l.td,{children:\"merge\"}),n(l.td,{children:\"合併分支\"})]})]})]}),\"\\n\",n(l.h2,{children:\"實際範例\"}),\"\\n\",n(l.figure,{\"data-rehype-pretty-code-figure\":\"\",children:n(l.pre,{style:{backgroundColor:\"#282c34\",color:\"#abb2bf\"},tabIndex:\"0\",rawcontent:\"feat(search): add fuzzy search to the search bar\\n\\n用戶反映搜尋功能不夠聰明，常常找不到想要的結果。\\n這次加入模糊搜尋，即使打錯字也能找到相關內容。\\n\\nCloses #1234\",\"data-language\":\"bash\",\"data-theme\":\"one-dark-pro\",children:r(l.code,{\"data-language\":\"bash\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[r(l.span,{\"data-line\":\"\",children:[n(l.span,{style:{color:\"#61AFEF\"},children:\"feat(search\"}),n(l.span,{style:{color:\"#ABB2BF\"},children:\"): add fuzzy search to the search bar\"})]}),\"\\n\",n(l.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",n(l.span,{\"data-line\":\"\",children:n(l.span,{style:{color:\"#61AFEF\"},children:\"用戶反映搜尋功能不夠聰明，常常找不到想要的結果。\"})}),\"\\n\",n(l.span,{\"data-line\":\"\",children:n(l.span,{style:{color:\"#61AFEF\"},children:\"這次加入模糊搜尋，即使打錯字也能找到相關內容。\"})}),\"\\n\",n(l.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",r(l.span,{\"data-line\":\"\",children:[n(l.span,{style:{color:\"#61AFEF\"},children:\"Closes\"}),n(l.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\" #1234\"})]})]})})}),\"\\n\",n(l.h3,{children:\"標題寫法\"}),\"\\n\",r(l.ul,{children:[\"\\n\",r(l.li,{children:[n(l.strong,{children:\"type\"}),\": 一定要準確，別偷懶都寫 feat\"]}),\"\\n\",r(l.li,{children:[n(l.strong,{children:\"scope\"}),\": 不確定就不寫，總比寫錯好\"]}),\"\\n\",r(l.li,{children:[n(l.strong,{children:\"subject\"}),': 用動詞開頭，像是 \"add\"、\"fix\"、\"update\"，不要超過 50 個字']}),\"\\n\"]}),\"\\n\",n(l.h3,{children:\"正文什麼時候寫\"}),\"\\n\",n(l.p,{children:\"一開始我都不寫正文，但後來發現有些改動真的需要解釋。特別是那些「為什麼要這樣改」的原因，未來的自己會感謝現在多寫的這幾行字。\"}),\"\\n\",n(l.h3,{children:\"尾注的用途\"}),\"\\n\",r(l.p,{children:[\"主要是關聯 issue，像是 \",n(l.code,{children:\"Closes #123\"}),\" 或 \",n(l.code,{children:\"Fixes #456\"}),\"。這樣 GitHub 會自動關閉對應的 issue，很方便。\"]})]})}return{default:function(e={}){const{wrapper:r}=e.components||{};return r?n(r,{...e,children:n(_createMdxContent,{...e})}):_createMdxContent(e)}};",
    "permalink": "/blog/posts/git-commit-message"
  },
  {
    "title": "如何發布 NPM 套件？",
    "date": "2024-12-05T00:00:00.000Z",
    "description": "第一次發布 NPM 套件的時候超緊張，深怕有什麼問題。結果其實也沒那麼難！這篇分享我從零開始發布套件的完整流程。",
    "rawContent": "## 為什麼要發布自己的 NPM 套件？\r\n\r\n其實也沒什麼，以前都覺得發布 NPM 套件是大神才做的事，但我自己也想裝逼寫一個，所以就嘗試看看了哈哈哈，萬一不小心成為知名套件的開發者不就超屌的，履歷會超加分耶應該啦。\r\n\r\n實際試過之後發現其實沒那麼難！而且有幾個好處：\r\n\r\n- **重複使用**：一次開發，到處使用\r\n- **版本管理**：不用每次都複製程式碼\r\n- **分享給社群**：說不定能幫到其他人\r\n- **履歷加分**：開源貢獻總是好事\r\n\r\n## 初始化專案\r\n\r\n首先建立一個新資料夾，然後初始化：\r\n\r\n```bash\r\nmkdir my-awesome-package\r\ncd my-awesome-package\r\nnpm init\r\n```\r\n\r\n如果想要快速建立，可以用：\r\n\r\n```bash\r\nnpm init -y\r\n```\r\n\r\n## package.json 的關鍵設定\r\n\r\n這是我發布套件時的 package.json 範例：\r\n\r\n```json title=\"package.json\"\r\n{\r\n    \"name\": \"chinese-number-format\",\r\n    \"version\": \"1.0.2\",\r\n    \"description\": \"中文數字轉換工具\",\r\n    \"main\": \"dist/index.js\",\r\n    \"types\": \"dist/index.d.ts\",\r\n    \"scripts\": {\r\n        \"build\": \"tsc\",\r\n        \"test\": \"jest\"\r\n    },\r\n    \"repository\": {\r\n        \"type\": \"git\",\r\n        \"url\": \"https://github.com/garylin0969/chinese-number-format.git\"\r\n    },\r\n    \"keywords\": [\"中文\", \"數字\", \"轉換\", \"台灣\"],\r\n    \"author\": {\r\n        \"name\": \"GaryLin\",\r\n        \"email\": \"gary@example.com\"\r\n    },\r\n    \"license\": \"MIT\"\r\n}\r\n```\r\n\r\n### 重要欄位說明\r\n\r\n- **name**: 套件名稱，要是唯一的（去 npmjs.com 確認沒被用過）\r\n- **version**: 版本號，遵循 semantic versioning\r\n- **description**: 簡短說明，會出現在搜尋結果\r\n- **main**: 進入點檔案\r\n- **keywords**: 關鍵字，幫助別人找到你的套件\r\n- **repository**: GitHub 連結，讓人知道原始碼在哪\r\n\r\n## 使用 TypeScript 開發\r\n\r\n我建議用 TypeScript 開發，提供型別定義會讓用戶體驗更好：\r\n\r\n```bash\r\nnpm install typescript --save-dev\r\nnpx tsc --init\r\n```\r\n\r\n我的 tsconfig.json 設定：\r\n\r\n```json title=\"tsconfig.json\"\r\n{\r\n    \"compilerOptions\": {\r\n        \"target\": \"es2016\",\r\n        \"module\": \"commonjs\",\r\n        \"outDir\": \"./dist\",\r\n        \"declaration\": true,\r\n        \"strict\": true,\r\n        \"esModuleInterop\": true\r\n    },\r\n    \"include\": [\"src/**/*.ts\"],\r\n    \"exclude\": [\"node_modules\", \"dist\"]\r\n}\r\n```\r\n\r\n## 實際開發套件\r\n\r\n假設我要做一個簡單的工具函數：\r\n\r\n```typescript title=\"src/index.ts\"\r\n/**\r\n * 將數字轉換為中文\r\n * @param num 要轉換的數字\r\n * @returns 中文數字字串\r\n */\r\nexport function numberToChinese(num: number): string {\r\n    const digits = ['零', '一', '二', '三', '四', '五', '六', '七', '八', '九'];\r\n    const units = ['', '十', '百', '千', '萬'];\r\n\r\n    if (num === 0) return '零';\r\n\r\n    // 簡化版實作，實際會更複雜\r\n    return num\r\n        .toString()\r\n        .split('')\r\n        .map((d) => digits[parseInt(d)])\r\n        .join('');\r\n}\r\n```\r\n\r\n## 測試很重要\r\n\r\n```bash\r\nnpm install jest @types/jest ts-jest --save-dev\r\n```\r\n\r\n```typescript title=\"src/index.test.ts\"\r\nimport { numberToChinese } from './index';\r\n\r\ndescribe('numberToChinese', () => {\r\n    test('基本轉換', () => {\r\n        expect(numberToChinese(123)).toBe('一二三');\r\n        expect(numberToChinese(0)).toBe('零');\r\n    });\r\n});\r\n```\r\n\r\n## 建置套件\r\n\r\n```bash\r\nnpm run build\r\n```\r\n\r\n這會產生 `dist` 資料夾，裡面有編譯後的 JS 檔案和型別定義檔。\r\n\r\n## 發布前的檢查\r\n\r\n### 1. 測試本地安裝\r\n\r\n```bash\r\nnpm pack\r\n```\r\n\r\n這會產生一個 `.tgz` 檔案，你可以在其他專案裡測試：\r\n\r\n```bash\r\nnpm install ../my-package/my-package-1.0.0.tgz\r\n```\r\n\r\n### 2. 確認檔案內容\r\n\r\n```bash\r\nnpm publish --dry-run\r\n```\r\n\r\n這會顯示將要發布的檔案清單，確認沒有包含不該包含的檔案。\r\n\r\n## 註冊 NPM 帳號並發布\r\n\r\n### 1. 註冊帳號\r\n\r\n去 [npmjs.com](https://www.npmjs.com) 註冊帳號。\r\n\r\n### 2. 本地登入\r\n\r\n```bash\r\nnpm login\r\n```\r\n\r\n### 3. 發布套件\r\n\r\n```bash\r\nnpm publish\r\n```\r\n\r\n第一次發布可能會很緊張，但其實就這麼簡單！\r\n\r\n## 我踩過的坑\r\n\r\n### 1. 套件名稱衝突\r\n\r\n我一開始取的名稱已經被用了，所以要記得先去 npmjs.com 搜尋確認。\r\n\r\n### 2. 忘記建置就發布\r\n\r\n發布前一定要記得 `npm run build`，不然用戶安裝到的是原始碼。\r\n\r\n### 3. .gitignore 和 .npmignore 搞混\r\n\r\n記住：\r\n\r\n- `.gitignore` 控制什麼不要上傳到 Git\r\n- `.npmignore` 控制什麼不要發布到 NPM\r\n\r\n### 4. 版本號忘記更新\r\n\r\n每次發布前記得更新版本號，或使用：\r\n\r\n```bash\r\nnpm version patch  # 1.0.0 → 1.0.1\r\nnpm version minor  # 1.0.0 → 1.1.0\r\nnpm version major  # 1.0.0 → 2.0.0\r\n```\r\n\r\n## 維護和更新\r\n\r\n### 發布新版本\r\n\r\n```bash\r\n# 更新版本號\r\nnpm version patch\r\n\r\n# 發布\r\nnpm publish\r\n```\r\n\r\n### 廢棄舊版本\r\n\r\n如果某個版本有問題：\r\n\r\n```bash\r\nnpm deprecate my-package@1.0.0 \"這個版本有 bug，請使用 1.0.1\"\r\n```\r\n\r\n## 最佳實踐\r\n\r\n1. **寫好 README**：這是用戶看到的第一印象\r\n2. **提供型別定義**：TypeScript 用戶會感謝你\r\n3. **寫測試**：確保品質，也讓別人敢用\r\n4. **遵循語義化版本**：破壞性變更要升 major 版本\r\n5. **及時回應 issue**：維護開源專案的責任 (但我寫好玩的試試的XD)\r\n\r\n## 推廣你的套件\r\n\r\n- 在 GitHub README 加上安裝說明\r\n- 寫部落格文章介紹\r\n- 在相關社群分享\r\n- 收集用戶反饋持續改進",
    "category": "Code",
    "tags": [
      "NPM",
      "Node.js",
      "JavaScript",
      "Package Management"
    ],
    "image": "/blog/posts/2024/12/npm.webp",
    "headings": [
      {
        "level": 2,
        "text": "為什麼要發布自己的 NPM 套件？"
      },
      {
        "level": 2,
        "text": "初始化專案"
      },
      {
        "level": 2,
        "text": "package.json 的關鍵設定"
      },
      {
        "level": 3,
        "text": "重要欄位說明"
      },
      {
        "level": 2,
        "text": "使用 TypeScript 開發"
      },
      {
        "level": 2,
        "text": "實際開發套件"
      },
      {
        "level": 2,
        "text": "測試很重要"
      },
      {
        "level": 2,
        "text": "建置套件"
      },
      {
        "level": 2,
        "text": "發布前的檢查"
      },
      {
        "level": 3,
        "text": "1. 測試本地安裝"
      },
      {
        "level": 3,
        "text": "2. 確認檔案內容"
      },
      {
        "level": 2,
        "text": "註冊 NPM 帳號並發布"
      },
      {
        "level": 3,
        "text": "1. 註冊帳號"
      },
      {
        "level": 3,
        "text": "2. 本地登入"
      },
      {
        "level": 3,
        "text": "3. 發布套件"
      },
      {
        "level": 2,
        "text": "我踩過的坑"
      },
      {
        "level": 3,
        "text": "1. 套件名稱衝突"
      },
      {
        "level": 3,
        "text": "2. 忘記建置就發布"
      },
      {
        "level": 3,
        "text": "3. .gitignore 和 .npmignore 搞混"
      },
      {
        "level": 3,
        "text": "4. 版本號忘記更新"
      },
      {
        "level": 2,
        "text": "維護和更新"
      },
      {
        "level": 3,
        "text": "發布新版本"
      },
      {
        "level": 3,
        "text": "廢棄舊版本"
      },
      {
        "level": 2,
        "text": "最佳實踐"
      },
      {
        "level": 2,
        "text": "推廣你的套件"
      }
    ],
    "slug": "publish-npm-package-guide",
    "code": "const{Fragment:n,jsx:e,jsxs:l}=arguments[0];function _createMdxContent(r){const a={a:\"a\",code:\"code\",figcaption:\"figcaption\",figure:\"figure\",h2:\"h2\",h3:\"h3\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...r.components};return l(n,{children:[e(a.h2,{children:\"為什麼要發布自己的 NPM 套件？\"}),\"\\n\",e(a.p,{children:\"其實也沒什麼，以前都覺得發布 NPM 套件是大神才做的事，但我自己也想裝逼寫一個，所以就嘗試看看了哈哈哈，萬一不小心成為知名套件的開發者不就超屌的，履歷會超加分耶應該啦。\"}),\"\\n\",e(a.p,{children:\"實際試過之後發現其實沒那麼難！而且有幾個好處：\"}),\"\\n\",l(a.ul,{children:[\"\\n\",l(a.li,{children:[e(a.strong,{children:\"重複使用\"}),\"：一次開發，到處使用\"]}),\"\\n\",l(a.li,{children:[e(a.strong,{children:\"版本管理\"}),\"：不用每次都複製程式碼\"]}),\"\\n\",l(a.li,{children:[e(a.strong,{children:\"分享給社群\"}),\"：說不定能幫到其他人\"]}),\"\\n\",l(a.li,{children:[e(a.strong,{children:\"履歷加分\"}),\"：開源貢獻總是好事\"]}),\"\\n\"]}),\"\\n\",e(a.h2,{children:\"初始化專案\"}),\"\\n\",e(a.p,{children:\"首先建立一個新資料夾，然後初始化：\"}),\"\\n\",e(a.figure,{\"data-rehype-pretty-code-figure\":\"\",children:e(a.pre,{style:{backgroundColor:\"#282c34\",color:\"#abb2bf\"},tabIndex:\"0\",rawcontent:\"mkdir my-awesome-package\\ncd my-awesome-package\\nnpm init\",\"data-language\":\"bash\",\"data-theme\":\"one-dark-pro\",children:l(a.code,{\"data-language\":\"bash\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[l(a.span,{\"data-line\":\"\",children:[e(a.span,{style:{color:\"#61AFEF\"},children:\"mkdir\"}),e(a.span,{style:{color:\"#98C379\"},children:\" my-awesome-package\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:[e(a.span,{style:{color:\"#56B6C2\"},children:\"cd\"}),e(a.span,{style:{color:\"#98C379\"},children:\" my-awesome-package\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:[e(a.span,{style:{color:\"#61AFEF\"},children:\"npm\"}),e(a.span,{style:{color:\"#98C379\"},children:\" init\"})]})]})})}),\"\\n\",e(a.p,{children:\"如果想要快速建立，可以用：\"}),\"\\n\",e(a.figure,{\"data-rehype-pretty-code-figure\":\"\",children:e(a.pre,{style:{backgroundColor:\"#282c34\",color:\"#abb2bf\"},tabIndex:\"0\",rawcontent:\"npm init -y\",\"data-language\":\"bash\",\"data-theme\":\"one-dark-pro\",children:e(a.code,{\"data-language\":\"bash\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:l(a.span,{\"data-line\":\"\",children:[e(a.span,{style:{color:\"#61AFEF\"},children:\"npm\"}),e(a.span,{style:{color:\"#98C379\"},children:\" init\"}),e(a.span,{style:{color:\"#D19A66\"},children:\" -y\"})]})})})}),\"\\n\",e(a.h2,{children:\"package.json 的關鍵設定\"}),\"\\n\",e(a.p,{children:\"這是我發布套件時的 package.json 範例：\"}),\"\\n\",l(a.figure,{\"data-rehype-pretty-code-figure\":\"\",children:[e(a.figcaption,{\"data-rehype-pretty-code-title\":\"\",\"data-language\":\"json\",\"data-theme\":\"one-dark-pro\",children:\"package.json\"}),e(a.pre,{style:{backgroundColor:\"#282c34\",color:\"#abb2bf\"},tabIndex:\"0\",rawcontent:'{\\n    \"name\": \"chinese-number-format\",\\n    \"version\": \"1.0.2\",\\n    \"description\": \"中文數字轉換工具\",\\n    \"main\": \"dist/index.js\",\\n    \"types\": \"dist/index.d.ts\",\\n    \"scripts\": {\\n        \"build\": \"tsc\",\\n        \"test\": \"jest\"\\n    },\\n    \"repository\": {\\n        \"type\": \"git\",\\n        \"url\": \"https://github.com/garylin0969/chinese-number-format.git\"\\n    },\\n    \"keywords\": [\"中文\", \"數字\", \"轉換\", \"台灣\"],\\n    \"author\": {\\n        \"name\": \"GaryLin\",\\n        \"email\": \"gary@example.com\"\\n    },\\n    \"license\": \"MIT\"\\n}',\"data-language\":\"json\",\"data-theme\":\"one-dark-pro\",children:l(a.code,{\"data-language\":\"json\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[e(a.span,{\"data-line\":\"\",children:e(a.span,{style:{color:\"#ABB2BF\"},children:\"{\"})}),\"\\n\",l(a.span,{\"data-line\":\"\",children:[e(a.span,{style:{color:\"#E06C75\"},children:'    \"name\"'}),e(a.span,{style:{color:\"#ABB2BF\"},children:\": \"}),e(a.span,{style:{color:\"#98C379\"},children:'\"chinese-number-format\"'}),e(a.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:[e(a.span,{style:{color:\"#E06C75\"},children:'    \"version\"'}),e(a.span,{style:{color:\"#ABB2BF\"},children:\": \"}),e(a.span,{style:{color:\"#98C379\"},children:'\"1.0.2\"'}),e(a.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:[e(a.span,{style:{color:\"#E06C75\"},children:'    \"description\"'}),e(a.span,{style:{color:\"#ABB2BF\"},children:\": \"}),e(a.span,{style:{color:\"#98C379\"},children:'\"中文數字轉換工具\"'}),e(a.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:[e(a.span,{style:{color:\"#E06C75\"},children:'    \"main\"'}),e(a.span,{style:{color:\"#ABB2BF\"},children:\": \"}),e(a.span,{style:{color:\"#98C379\"},children:'\"dist/index.js\"'}),e(a.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:[e(a.span,{style:{color:\"#E06C75\"},children:'    \"types\"'}),e(a.span,{style:{color:\"#ABB2BF\"},children:\": \"}),e(a.span,{style:{color:\"#98C379\"},children:'\"dist/index.d.ts\"'}),e(a.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:[e(a.span,{style:{color:\"#E06C75\"},children:'    \"scripts\"'}),e(a.span,{style:{color:\"#ABB2BF\"},children:\": {\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:[e(a.span,{style:{color:\"#E06C75\"},children:'        \"build\"'}),e(a.span,{style:{color:\"#ABB2BF\"},children:\": \"}),e(a.span,{style:{color:\"#98C379\"},children:'\"tsc\"'}),e(a.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:[e(a.span,{style:{color:\"#E06C75\"},children:'        \"test\"'}),e(a.span,{style:{color:\"#ABB2BF\"},children:\": \"}),e(a.span,{style:{color:\"#98C379\"},children:'\"jest\"'})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:e(a.span,{style:{color:\"#ABB2BF\"},children:\"    },\"})}),\"\\n\",l(a.span,{\"data-line\":\"\",children:[e(a.span,{style:{color:\"#E06C75\"},children:'    \"repository\"'}),e(a.span,{style:{color:\"#ABB2BF\"},children:\": {\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:[e(a.span,{style:{color:\"#E06C75\"},children:'        \"type\"'}),e(a.span,{style:{color:\"#ABB2BF\"},children:\": \"}),e(a.span,{style:{color:\"#98C379\"},children:'\"git\"'}),e(a.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:[e(a.span,{style:{color:\"#E06C75\"},children:'        \"url\"'}),e(a.span,{style:{color:\"#ABB2BF\"},children:\": \"}),e(a.span,{style:{color:\"#98C379\"},children:'\"https://github.com/garylin0969/chinese-number-format.git\"'})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:e(a.span,{style:{color:\"#ABB2BF\"},children:\"    },\"})}),\"\\n\",l(a.span,{\"data-line\":\"\",children:[e(a.span,{style:{color:\"#E06C75\"},children:'    \"keywords\"'}),e(a.span,{style:{color:\"#ABB2BF\"},children:\": [\"}),e(a.span,{style:{color:\"#98C379\"},children:'\"中文\"'}),e(a.span,{style:{color:\"#ABB2BF\"},children:\", \"}),e(a.span,{style:{color:\"#98C379\"},children:'\"數字\"'}),e(a.span,{style:{color:\"#ABB2BF\"},children:\", \"}),e(a.span,{style:{color:\"#98C379\"},children:'\"轉換\"'}),e(a.span,{style:{color:\"#ABB2BF\"},children:\", \"}),e(a.span,{style:{color:\"#98C379\"},children:'\"台灣\"'}),e(a.span,{style:{color:\"#ABB2BF\"},children:\"],\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:[e(a.span,{style:{color:\"#E06C75\"},children:'    \"author\"'}),e(a.span,{style:{color:\"#ABB2BF\"},children:\": {\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:[e(a.span,{style:{color:\"#E06C75\"},children:'        \"name\"'}),e(a.span,{style:{color:\"#ABB2BF\"},children:\": \"}),e(a.span,{style:{color:\"#98C379\"},children:'\"GaryLin\"'}),e(a.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:[e(a.span,{style:{color:\"#E06C75\"},children:'        \"email\"'}),e(a.span,{style:{color:\"#ABB2BF\"},children:\": \"}),e(a.span,{style:{color:\"#98C379\"},children:'\"gary@example.com\"'})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:e(a.span,{style:{color:\"#ABB2BF\"},children:\"    },\"})}),\"\\n\",l(a.span,{\"data-line\":\"\",children:[e(a.span,{style:{color:\"#E06C75\"},children:'    \"license\"'}),e(a.span,{style:{color:\"#ABB2BF\"},children:\": \"}),e(a.span,{style:{color:\"#98C379\"},children:'\"MIT\"'})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:e(a.span,{style:{color:\"#ABB2BF\"},children:\"}\"})})]})})]}),\"\\n\",e(a.h3,{children:\"重要欄位說明\"}),\"\\n\",l(a.ul,{children:[\"\\n\",l(a.li,{children:[e(a.strong,{children:\"name\"}),\": 套件名稱，要是唯一的（去 npmjs.com 確認沒被用過）\"]}),\"\\n\",l(a.li,{children:[e(a.strong,{children:\"version\"}),\": 版本號，遵循 semantic versioning\"]}),\"\\n\",l(a.li,{children:[e(a.strong,{children:\"description\"}),\": 簡短說明，會出現在搜尋結果\"]}),\"\\n\",l(a.li,{children:[e(a.strong,{children:\"main\"}),\": 進入點檔案\"]}),\"\\n\",l(a.li,{children:[e(a.strong,{children:\"keywords\"}),\": 關鍵字，幫助別人找到你的套件\"]}),\"\\n\",l(a.li,{children:[e(a.strong,{children:\"repository\"}),\": GitHub 連結，讓人知道原始碼在哪\"]}),\"\\n\"]}),\"\\n\",e(a.h2,{children:\"使用 TypeScript 開發\"}),\"\\n\",e(a.p,{children:\"我建議用 TypeScript 開發，提供型別定義會讓用戶體驗更好：\"}),\"\\n\",e(a.figure,{\"data-rehype-pretty-code-figure\":\"\",children:e(a.pre,{style:{backgroundColor:\"#282c34\",color:\"#abb2bf\"},tabIndex:\"0\",rawcontent:\"npm install typescript --save-dev\\nnpx tsc --init\",\"data-language\":\"bash\",\"data-theme\":\"one-dark-pro\",children:l(a.code,{\"data-language\":\"bash\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[l(a.span,{\"data-line\":\"\",children:[e(a.span,{style:{color:\"#61AFEF\"},children:\"npm\"}),e(a.span,{style:{color:\"#98C379\"},children:\" install\"}),e(a.span,{style:{color:\"#98C379\"},children:\" typescript\"}),e(a.span,{style:{color:\"#D19A66\"},children:\" --save-dev\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:[e(a.span,{style:{color:\"#61AFEF\"},children:\"npx\"}),e(a.span,{style:{color:\"#98C379\"},children:\" tsc\"}),e(a.span,{style:{color:\"#D19A66\"},children:\" --init\"})]})]})})}),\"\\n\",e(a.p,{children:\"我的 tsconfig.json 設定：\"}),\"\\n\",l(a.figure,{\"data-rehype-pretty-code-figure\":\"\",children:[e(a.figcaption,{\"data-rehype-pretty-code-title\":\"\",\"data-language\":\"json\",\"data-theme\":\"one-dark-pro\",children:\"tsconfig.json\"}),e(a.pre,{style:{backgroundColor:\"#282c34\",color:\"#abb2bf\"},tabIndex:\"0\",rawcontent:'{\\n    \"compilerOptions\": {\\n        \"target\": \"es2016\",\\n        \"module\": \"commonjs\",\\n        \"outDir\": \"./dist\",\\n        \"declaration\": true,\\n        \"strict\": true,\\n        \"esModuleInterop\": true\\n    },\\n    \"include\": [\"src/**/*.ts\"],\\n    \"exclude\": [\"node_modules\", \"dist\"]\\n}',\"data-language\":\"json\",\"data-theme\":\"one-dark-pro\",children:l(a.code,{\"data-language\":\"json\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[e(a.span,{\"data-line\":\"\",children:e(a.span,{style:{color:\"#ABB2BF\"},children:\"{\"})}),\"\\n\",l(a.span,{\"data-line\":\"\",children:[e(a.span,{style:{color:\"#E06C75\"},children:'    \"compilerOptions\"'}),e(a.span,{style:{color:\"#ABB2BF\"},children:\": {\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:[e(a.span,{style:{color:\"#E06C75\"},children:'        \"target\"'}),e(a.span,{style:{color:\"#ABB2BF\"},children:\": \"}),e(a.span,{style:{color:\"#98C379\"},children:'\"es2016\"'}),e(a.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:[e(a.span,{style:{color:\"#E06C75\"},children:'        \"module\"'}),e(a.span,{style:{color:\"#ABB2BF\"},children:\": \"}),e(a.span,{style:{color:\"#98C379\"},children:'\"commonjs\"'}),e(a.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:[e(a.span,{style:{color:\"#E06C75\"},children:'        \"outDir\"'}),e(a.span,{style:{color:\"#ABB2BF\"},children:\": \"}),e(a.span,{style:{color:\"#98C379\"},children:'\"./dist\"'}),e(a.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:[e(a.span,{style:{color:\"#E06C75\"},children:'        \"declaration\"'}),e(a.span,{style:{color:\"#ABB2BF\"},children:\": \"}),e(a.span,{style:{color:\"#D19A66\"},children:\"true\"}),e(a.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:[e(a.span,{style:{color:\"#E06C75\"},children:'        \"strict\"'}),e(a.span,{style:{color:\"#ABB2BF\"},children:\": \"}),e(a.span,{style:{color:\"#D19A66\"},children:\"true\"}),e(a.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:[e(a.span,{style:{color:\"#E06C75\"},children:'        \"esModuleInterop\"'}),e(a.span,{style:{color:\"#ABB2BF\"},children:\": \"}),e(a.span,{style:{color:\"#D19A66\"},children:\"true\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:e(a.span,{style:{color:\"#ABB2BF\"},children:\"    },\"})}),\"\\n\",l(a.span,{\"data-line\":\"\",children:[e(a.span,{style:{color:\"#E06C75\"},children:'    \"include\"'}),e(a.span,{style:{color:\"#ABB2BF\"},children:\": [\"}),e(a.span,{style:{color:\"#98C379\"},children:'\"src/**/*.ts\"'}),e(a.span,{style:{color:\"#ABB2BF\"},children:\"],\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:[e(a.span,{style:{color:\"#E06C75\"},children:'    \"exclude\"'}),e(a.span,{style:{color:\"#ABB2BF\"},children:\": [\"}),e(a.span,{style:{color:\"#98C379\"},children:'\"node_modules\"'}),e(a.span,{style:{color:\"#ABB2BF\"},children:\", \"}),e(a.span,{style:{color:\"#98C379\"},children:'\"dist\"'}),e(a.span,{style:{color:\"#ABB2BF\"},children:\"]\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:e(a.span,{style:{color:\"#ABB2BF\"},children:\"}\"})})]})})]}),\"\\n\",e(a.h2,{children:\"實際開發套件\"}),\"\\n\",e(a.p,{children:\"假設我要做一個簡單的工具函數：\"}),\"\\n\",l(a.figure,{\"data-rehype-pretty-code-figure\":\"\",children:[e(a.figcaption,{\"data-rehype-pretty-code-title\":\"\",\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",children:\"src/index.ts\"}),e(a.pre,{style:{backgroundColor:\"#282c34\",color:\"#abb2bf\"},tabIndex:\"0\",rawcontent:\"/**\\n * 將數字轉換為中文\\n * @param num 要轉換的數字\\n * @returns 中文數字字串\\n */\\nexport function numberToChinese(num: number): string {\\n    const digits = ['零', '一', '二', '三', '四', '五', '六', '七', '八', '九'];\\n    const units = ['', '十', '百', '千', '萬'];\\n\\n    if (num === 0) return '零';\\n\\n    // 簡化版實作，實際會更複雜\\n    return num\\n        .toString()\\n        .split('')\\n        .map((d) => digits[parseInt(d)])\\n        .join('');\\n}\",\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",children:l(a.code,{\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[e(a.span,{\"data-line\":\"\",children:e(a.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"/**\"})}),\"\\n\",e(a.span,{\"data-line\":\"\",children:e(a.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\" * 將數字轉換為中文\"})}),\"\\n\",l(a.span,{\"data-line\":\"\",children:[e(a.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\" * \"}),e(a.span,{style:{color:\"#C678DD\",fontStyle:\"italic\"},children:\"@param\"}),e(a.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\" num\"}),e(a.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\" 要轉換的數字\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:[e(a.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\" * \"}),e(a.span,{style:{color:\"#C678DD\",fontStyle:\"italic\"},children:\"@returns\"}),e(a.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\" 中文數字字串\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:e(a.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\" */\"})}),\"\\n\",l(a.span,{\"data-line\":\"\",children:[e(a.span,{style:{color:\"#C678DD\"},children:\"export\"}),e(a.span,{style:{color:\"#C678DD\"},children:\" function\"}),e(a.span,{style:{color:\"#61AFEF\"},children:\" numberToChinese\"}),e(a.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),e(a.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"num\"}),e(a.span,{style:{color:\"#ABB2BF\"},children:\": \"}),e(a.span,{style:{color:\"#E5C07B\"},children:\"number\"}),e(a.span,{style:{color:\"#ABB2BF\"},children:\"): \"}),e(a.span,{style:{color:\"#E5C07B\"},children:\"string\"}),e(a.span,{style:{color:\"#ABB2BF\"},children:\" {\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:[e(a.span,{style:{color:\"#C678DD\"},children:\"    const\"}),e(a.span,{style:{color:\"#E5C07B\"},children:\" digits\"}),e(a.span,{style:{color:\"#56B6C2\"},children:\" =\"}),e(a.span,{style:{color:\"#ABB2BF\"},children:\" [\"}),e(a.span,{style:{color:\"#98C379\"},children:\"'零'\"}),e(a.span,{style:{color:\"#ABB2BF\"},children:\", \"}),e(a.span,{style:{color:\"#98C379\"},children:\"'一'\"}),e(a.span,{style:{color:\"#ABB2BF\"},children:\", \"}),e(a.span,{style:{color:\"#98C379\"},children:\"'二'\"}),e(a.span,{style:{color:\"#ABB2BF\"},children:\", \"}),e(a.span,{style:{color:\"#98C379\"},children:\"'三'\"}),e(a.span,{style:{color:\"#ABB2BF\"},children:\", \"}),e(a.span,{style:{color:\"#98C379\"},children:\"'四'\"}),e(a.span,{style:{color:\"#ABB2BF\"},children:\", \"}),e(a.span,{style:{color:\"#98C379\"},children:\"'五'\"}),e(a.span,{style:{color:\"#ABB2BF\"},children:\", \"}),e(a.span,{style:{color:\"#98C379\"},children:\"'六'\"}),e(a.span,{style:{color:\"#ABB2BF\"},children:\", \"}),e(a.span,{style:{color:\"#98C379\"},children:\"'七'\"}),e(a.span,{style:{color:\"#ABB2BF\"},children:\", \"}),e(a.span,{style:{color:\"#98C379\"},children:\"'八'\"}),e(a.span,{style:{color:\"#ABB2BF\"},children:\", \"}),e(a.span,{style:{color:\"#98C379\"},children:\"'九'\"}),e(a.span,{style:{color:\"#ABB2BF\"},children:\"];\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:[e(a.span,{style:{color:\"#C678DD\"},children:\"    const\"}),e(a.span,{style:{color:\"#E5C07B\"},children:\" units\"}),e(a.span,{style:{color:\"#56B6C2\"},children:\" =\"}),e(a.span,{style:{color:\"#ABB2BF\"},children:\" [\"}),e(a.span,{style:{color:\"#98C379\"},children:\"''\"}),e(a.span,{style:{color:\"#ABB2BF\"},children:\", \"}),e(a.span,{style:{color:\"#98C379\"},children:\"'十'\"}),e(a.span,{style:{color:\"#ABB2BF\"},children:\", \"}),e(a.span,{style:{color:\"#98C379\"},children:\"'百'\"}),e(a.span,{style:{color:\"#ABB2BF\"},children:\", \"}),e(a.span,{style:{color:\"#98C379\"},children:\"'千'\"}),e(a.span,{style:{color:\"#ABB2BF\"},children:\", \"}),e(a.span,{style:{color:\"#98C379\"},children:\"'萬'\"}),e(a.span,{style:{color:\"#ABB2BF\"},children:\"];\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",l(a.span,{\"data-line\":\"\",children:[e(a.span,{style:{color:\"#C678DD\"},children:\"    if\"}),e(a.span,{style:{color:\"#ABB2BF\"},children:\" (\"}),e(a.span,{style:{color:\"#E06C75\"},children:\"num\"}),e(a.span,{style:{color:\"#56B6C2\"},children:\" ===\"}),e(a.span,{style:{color:\"#D19A66\"},children:\" 0\"}),e(a.span,{style:{color:\"#ABB2BF\"},children:\") \"}),e(a.span,{style:{color:\"#C678DD\"},children:\"return\"}),e(a.span,{style:{color:\"#98C379\"},children:\" '零'\"}),e(a.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(a.span,{\"data-line\":\"\",children:e(a.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"    // 簡化版實作，實際會更複雜\"})}),\"\\n\",l(a.span,{\"data-line\":\"\",children:[e(a.span,{style:{color:\"#C678DD\"},children:\"    return\"}),e(a.span,{style:{color:\"#E06C75\"},children:\" num\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:[e(a.span,{style:{color:\"#ABB2BF\"},children:\"        .\"}),e(a.span,{style:{color:\"#61AFEF\"},children:\"toString\"}),e(a.span,{style:{color:\"#ABB2BF\"},children:\"()\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:[e(a.span,{style:{color:\"#ABB2BF\"},children:\"        .\"}),e(a.span,{style:{color:\"#61AFEF\"},children:\"split\"}),e(a.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),e(a.span,{style:{color:\"#98C379\"},children:\"''\"}),e(a.span,{style:{color:\"#ABB2BF\"},children:\")\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:[e(a.span,{style:{color:\"#ABB2BF\"},children:\"        .\"}),e(a.span,{style:{color:\"#61AFEF\"},children:\"map\"}),e(a.span,{style:{color:\"#ABB2BF\"},children:\"((\"}),e(a.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"d\"}),e(a.span,{style:{color:\"#ABB2BF\"},children:\") \"}),e(a.span,{style:{color:\"#C678DD\"},children:\"=>\"}),e(a.span,{style:{color:\"#E06C75\"},children:\" digits\"}),e(a.span,{style:{color:\"#ABB2BF\"},children:\"[\"}),e(a.span,{style:{color:\"#61AFEF\"},children:\"parseInt\"}),e(a.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),e(a.span,{style:{color:\"#E06C75\"},children:\"d\"}),e(a.span,{style:{color:\"#ABB2BF\"},children:\")])\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:[e(a.span,{style:{color:\"#ABB2BF\"},children:\"        .\"}),e(a.span,{style:{color:\"#61AFEF\"},children:\"join\"}),e(a.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),e(a.span,{style:{color:\"#98C379\"},children:\"''\"}),e(a.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:e(a.span,{style:{color:\"#ABB2BF\"},children:\"}\"})})]})})]}),\"\\n\",e(a.h2,{children:\"測試很重要\"}),\"\\n\",e(a.figure,{\"data-rehype-pretty-code-figure\":\"\",children:e(a.pre,{style:{backgroundColor:\"#282c34\",color:\"#abb2bf\"},tabIndex:\"0\",rawcontent:\"npm install jest @types/jest ts-jest --save-dev\",\"data-language\":\"bash\",\"data-theme\":\"one-dark-pro\",children:e(a.code,{\"data-language\":\"bash\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:l(a.span,{\"data-line\":\"\",children:[e(a.span,{style:{color:\"#61AFEF\"},children:\"npm\"}),e(a.span,{style:{color:\"#98C379\"},children:\" install\"}),e(a.span,{style:{color:\"#98C379\"},children:\" jest\"}),e(a.span,{style:{color:\"#98C379\"},children:\" @types/jest\"}),e(a.span,{style:{color:\"#98C379\"},children:\" ts-jest\"}),e(a.span,{style:{color:\"#D19A66\"},children:\" --save-dev\"})]})})})}),\"\\n\",l(a.figure,{\"data-rehype-pretty-code-figure\":\"\",children:[e(a.figcaption,{\"data-rehype-pretty-code-title\":\"\",\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",children:\"src/index.test.ts\"}),e(a.pre,{style:{backgroundColor:\"#282c34\",color:\"#abb2bf\"},tabIndex:\"0\",rawcontent:\"import { numberToChinese } from './index';\\n\\ndescribe('numberToChinese', () => {\\n    test('基本轉換', () => {\\n        expect(numberToChinese(123)).toBe('一二三');\\n        expect(numberToChinese(0)).toBe('零');\\n    });\\n});\",\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",children:l(a.code,{\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[l(a.span,{\"data-line\":\"\",children:[e(a.span,{style:{color:\"#C678DD\"},children:\"import\"}),e(a.span,{style:{color:\"#ABB2BF\"},children:\" { \"}),e(a.span,{style:{color:\"#E06C75\"},children:\"numberToChinese\"}),e(a.span,{style:{color:\"#ABB2BF\"},children:\" } \"}),e(a.span,{style:{color:\"#C678DD\"},children:\"from\"}),e(a.span,{style:{color:\"#98C379\"},children:\" './index'\"}),e(a.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",l(a.span,{\"data-line\":\"\",children:[e(a.span,{style:{color:\"#61AFEF\"},children:\"describe\"}),e(a.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),e(a.span,{style:{color:\"#98C379\"},children:\"'numberToChinese'\"}),e(a.span,{style:{color:\"#ABB2BF\"},children:\", () \"}),e(a.span,{style:{color:\"#C678DD\"},children:\"=>\"}),e(a.span,{style:{color:\"#ABB2BF\"},children:\" {\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:[e(a.span,{style:{color:\"#61AFEF\"},children:\"    test\"}),e(a.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),e(a.span,{style:{color:\"#98C379\"},children:\"'基本轉換'\"}),e(a.span,{style:{color:\"#ABB2BF\"},children:\", () \"}),e(a.span,{style:{color:\"#C678DD\"},children:\"=>\"}),e(a.span,{style:{color:\"#ABB2BF\"},children:\" {\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:[e(a.span,{style:{color:\"#61AFEF\"},children:\"        expect\"}),e(a.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),e(a.span,{style:{color:\"#61AFEF\"},children:\"numberToChinese\"}),e(a.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),e(a.span,{style:{color:\"#D19A66\"},children:\"123\"}),e(a.span,{style:{color:\"#ABB2BF\"},children:\")).\"}),e(a.span,{style:{color:\"#61AFEF\"},children:\"toBe\"}),e(a.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),e(a.span,{style:{color:\"#98C379\"},children:\"'一二三'\"}),e(a.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:[e(a.span,{style:{color:\"#61AFEF\"},children:\"        expect\"}),e(a.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),e(a.span,{style:{color:\"#61AFEF\"},children:\"numberToChinese\"}),e(a.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),e(a.span,{style:{color:\"#D19A66\"},children:\"0\"}),e(a.span,{style:{color:\"#ABB2BF\"},children:\")).\"}),e(a.span,{style:{color:\"#61AFEF\"},children:\"toBe\"}),e(a.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),e(a.span,{style:{color:\"#98C379\"},children:\"'零'\"}),e(a.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:e(a.span,{style:{color:\"#ABB2BF\"},children:\"    });\"})}),\"\\n\",e(a.span,{\"data-line\":\"\",children:e(a.span,{style:{color:\"#ABB2BF\"},children:\"});\"})})]})})]}),\"\\n\",e(a.h2,{children:\"建置套件\"}),\"\\n\",e(a.figure,{\"data-rehype-pretty-code-figure\":\"\",children:e(a.pre,{style:{backgroundColor:\"#282c34\",color:\"#abb2bf\"},tabIndex:\"0\",rawcontent:\"npm run build\",\"data-language\":\"bash\",\"data-theme\":\"one-dark-pro\",children:e(a.code,{\"data-language\":\"bash\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:l(a.span,{\"data-line\":\"\",children:[e(a.span,{style:{color:\"#61AFEF\"},children:\"npm\"}),e(a.span,{style:{color:\"#98C379\"},children:\" run\"}),e(a.span,{style:{color:\"#98C379\"},children:\" build\"})]})})})}),\"\\n\",l(a.p,{children:[\"這會產生 \",e(a.code,{children:\"dist\"}),\" 資料夾，裡面有編譯後的 JS 檔案和型別定義檔。\"]}),\"\\n\",e(a.h2,{children:\"發布前的檢查\"}),\"\\n\",e(a.h3,{children:\"1. 測試本地安裝\"}),\"\\n\",e(a.figure,{\"data-rehype-pretty-code-figure\":\"\",children:e(a.pre,{style:{backgroundColor:\"#282c34\",color:\"#abb2bf\"},tabIndex:\"0\",rawcontent:\"npm pack\",\"data-language\":\"bash\",\"data-theme\":\"one-dark-pro\",children:e(a.code,{\"data-language\":\"bash\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:l(a.span,{\"data-line\":\"\",children:[e(a.span,{style:{color:\"#61AFEF\"},children:\"npm\"}),e(a.span,{style:{color:\"#98C379\"},children:\" pack\"})]})})})}),\"\\n\",l(a.p,{children:[\"這會產生一個 \",e(a.code,{children:\".tgz\"}),\" 檔案，你可以在其他專案裡測試：\"]}),\"\\n\",e(a.figure,{\"data-rehype-pretty-code-figure\":\"\",children:e(a.pre,{style:{backgroundColor:\"#282c34\",color:\"#abb2bf\"},tabIndex:\"0\",rawcontent:\"npm install ../my-package/my-package-1.0.0.tgz\",\"data-language\":\"bash\",\"data-theme\":\"one-dark-pro\",children:e(a.code,{\"data-language\":\"bash\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:l(a.span,{\"data-line\":\"\",children:[e(a.span,{style:{color:\"#61AFEF\"},children:\"npm\"}),e(a.span,{style:{color:\"#98C379\"},children:\" install\"}),e(a.span,{style:{color:\"#98C379\"},children:\" ../my-package/my-package-1.0.0.tgz\"})]})})})}),\"\\n\",e(a.h3,{children:\"2. 確認檔案內容\"}),\"\\n\",e(a.figure,{\"data-rehype-pretty-code-figure\":\"\",children:e(a.pre,{style:{backgroundColor:\"#282c34\",color:\"#abb2bf\"},tabIndex:\"0\",rawcontent:\"npm publish --dry-run\",\"data-language\":\"bash\",\"data-theme\":\"one-dark-pro\",children:e(a.code,{\"data-language\":\"bash\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:l(a.span,{\"data-line\":\"\",children:[e(a.span,{style:{color:\"#61AFEF\"},children:\"npm\"}),e(a.span,{style:{color:\"#98C379\"},children:\" publish\"}),e(a.span,{style:{color:\"#D19A66\"},children:\" --dry-run\"})]})})})}),\"\\n\",e(a.p,{children:\"這會顯示將要發布的檔案清單，確認沒有包含不該包含的檔案。\"}),\"\\n\",e(a.h2,{children:\"註冊 NPM 帳號並發布\"}),\"\\n\",e(a.h3,{children:\"1. 註冊帳號\"}),\"\\n\",l(a.p,{children:[\"去 \",e(a.a,{href:\"https://www.npmjs.com\",children:\"npmjs.com\"}),\" 註冊帳號。\"]}),\"\\n\",e(a.h3,{children:\"2. 本地登入\"}),\"\\n\",e(a.figure,{\"data-rehype-pretty-code-figure\":\"\",children:e(a.pre,{style:{backgroundColor:\"#282c34\",color:\"#abb2bf\"},tabIndex:\"0\",rawcontent:\"npm login\",\"data-language\":\"bash\",\"data-theme\":\"one-dark-pro\",children:e(a.code,{\"data-language\":\"bash\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:l(a.span,{\"data-line\":\"\",children:[e(a.span,{style:{color:\"#61AFEF\"},children:\"npm\"}),e(a.span,{style:{color:\"#98C379\"},children:\" login\"})]})})})}),\"\\n\",e(a.h3,{children:\"3. 發布套件\"}),\"\\n\",e(a.figure,{\"data-rehype-pretty-code-figure\":\"\",children:e(a.pre,{style:{backgroundColor:\"#282c34\",color:\"#abb2bf\"},tabIndex:\"0\",rawcontent:\"npm publish\",\"data-language\":\"bash\",\"data-theme\":\"one-dark-pro\",children:e(a.code,{\"data-language\":\"bash\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:l(a.span,{\"data-line\":\"\",children:[e(a.span,{style:{color:\"#61AFEF\"},children:\"npm\"}),e(a.span,{style:{color:\"#98C379\"},children:\" publish\"})]})})})}),\"\\n\",e(a.p,{children:\"第一次發布可能會很緊張，但其實就這麼簡單！\"}),\"\\n\",e(a.h2,{children:\"我踩過的坑\"}),\"\\n\",e(a.h3,{children:\"1. 套件名稱衝突\"}),\"\\n\",e(a.p,{children:\"我一開始取的名稱已經被用了，所以要記得先去 npmjs.com 搜尋確認。\"}),\"\\n\",e(a.h3,{children:\"2. 忘記建置就發布\"}),\"\\n\",l(a.p,{children:[\"發布前一定要記得 \",e(a.code,{children:\"npm run build\"}),\"，不然用戶安裝到的是原始碼。\"]}),\"\\n\",e(a.h3,{children:\"3. .gitignore 和 .npmignore 搞混\"}),\"\\n\",e(a.p,{children:\"記住：\"}),\"\\n\",l(a.ul,{children:[\"\\n\",l(a.li,{children:[e(a.code,{children:\".gitignore\"}),\" 控制什麼不要上傳到 Git\"]}),\"\\n\",l(a.li,{children:[e(a.code,{children:\".npmignore\"}),\" 控制什麼不要發布到 NPM\"]}),\"\\n\"]}),\"\\n\",e(a.h3,{children:\"4. 版本號忘記更新\"}),\"\\n\",e(a.p,{children:\"每次發布前記得更新版本號，或使用：\"}),\"\\n\",e(a.figure,{\"data-rehype-pretty-code-figure\":\"\",children:e(a.pre,{style:{backgroundColor:\"#282c34\",color:\"#abb2bf\"},tabIndex:\"0\",rawcontent:\"npm version patch  # 1.0.0 → 1.0.1\\nnpm version minor  # 1.0.0 → 1.1.0\\nnpm version major  # 1.0.0 → 2.0.0\",\"data-language\":\"bash\",\"data-theme\":\"one-dark-pro\",children:l(a.code,{\"data-language\":\"bash\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[l(a.span,{\"data-line\":\"\",children:[e(a.span,{style:{color:\"#61AFEF\"},children:\"npm\"}),e(a.span,{style:{color:\"#98C379\"},children:\" version\"}),e(a.span,{style:{color:\"#98C379\"},children:\" patch\"}),e(a.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"  # 1.0.0 → 1.0.1\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:[e(a.span,{style:{color:\"#61AFEF\"},children:\"npm\"}),e(a.span,{style:{color:\"#98C379\"},children:\" version\"}),e(a.span,{style:{color:\"#98C379\"},children:\" minor\"}),e(a.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"  # 1.0.0 → 1.1.0\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:[e(a.span,{style:{color:\"#61AFEF\"},children:\"npm\"}),e(a.span,{style:{color:\"#98C379\"},children:\" version\"}),e(a.span,{style:{color:\"#98C379\"},children:\" major\"}),e(a.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"  # 1.0.0 → 2.0.0\"})]})]})})}),\"\\n\",e(a.h2,{children:\"維護和更新\"}),\"\\n\",e(a.h3,{children:\"發布新版本\"}),\"\\n\",e(a.figure,{\"data-rehype-pretty-code-figure\":\"\",children:e(a.pre,{style:{backgroundColor:\"#282c34\",color:\"#abb2bf\"},tabIndex:\"0\",rawcontent:\"# 更新版本號\\nnpm version patch\\n\\n# 發布\\nnpm publish\",\"data-language\":\"bash\",\"data-theme\":\"one-dark-pro\",children:l(a.code,{\"data-language\":\"bash\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[e(a.span,{\"data-line\":\"\",children:e(a.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"# 更新版本號\"})}),\"\\n\",l(a.span,{\"data-line\":\"\",children:[e(a.span,{style:{color:\"#61AFEF\"},children:\"npm\"}),e(a.span,{style:{color:\"#98C379\"},children:\" version\"}),e(a.span,{style:{color:\"#98C379\"},children:\" patch\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(a.span,{\"data-line\":\"\",children:e(a.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"# 發布\"})}),\"\\n\",l(a.span,{\"data-line\":\"\",children:[e(a.span,{style:{color:\"#61AFEF\"},children:\"npm\"}),e(a.span,{style:{color:\"#98C379\"},children:\" publish\"})]})]})})}),\"\\n\",e(a.h3,{children:\"廢棄舊版本\"}),\"\\n\",e(a.p,{children:\"如果某個版本有問題：\"}),\"\\n\",e(a.figure,{\"data-rehype-pretty-code-figure\":\"\",children:e(a.pre,{style:{backgroundColor:\"#282c34\",color:\"#abb2bf\"},tabIndex:\"0\",rawcontent:'npm deprecate my-package@1.0.0 \"這個版本有 bug，請使用 1.0.1\"',\"data-language\":\"bash\",\"data-theme\":\"one-dark-pro\",children:e(a.code,{\"data-language\":\"bash\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:l(a.span,{\"data-line\":\"\",children:[e(a.span,{style:{color:\"#61AFEF\"},children:\"npm\"}),e(a.span,{style:{color:\"#98C379\"},children:\" deprecate\"}),e(a.span,{style:{color:\"#98C379\"},children:\" my-package@1.0.0\"}),e(a.span,{style:{color:\"#98C379\"},children:' \"這個版本有 bug，請使用 1.0.1\"'})]})})})}),\"\\n\",e(a.h2,{children:\"最佳實踐\"}),\"\\n\",l(a.ol,{children:[\"\\n\",l(a.li,{children:[e(a.strong,{children:\"寫好 README\"}),\"：這是用戶看到的第一印象\"]}),\"\\n\",l(a.li,{children:[e(a.strong,{children:\"提供型別定義\"}),\"：TypeScript 用戶會感謝你\"]}),\"\\n\",l(a.li,{children:[e(a.strong,{children:\"寫測試\"}),\"：確保品質，也讓別人敢用\"]}),\"\\n\",l(a.li,{children:[e(a.strong,{children:\"遵循語義化版本\"}),\"：破壞性變更要升 major 版本\"]}),\"\\n\",l(a.li,{children:[e(a.strong,{children:\"及時回應 issue\"}),\"：維護開源專案的責任 (但我寫好玩的試試的XD)\"]}),\"\\n\"]}),\"\\n\",e(a.h2,{children:\"推廣你的套件\"}),\"\\n\",l(a.ul,{children:[\"\\n\",e(a.li,{children:\"在 GitHub README 加上安裝說明\"}),\"\\n\",e(a.li,{children:\"寫部落格文章介紹\"}),\"\\n\",e(a.li,{children:\"在相關社群分享\"}),\"\\n\",e(a.li,{children:\"收集用戶反饋持續改進\"}),\"\\n\"]})]})}return{default:function(n={}){const{wrapper:l}=n.components||{};return l?e(l,{...n,children:e(_createMdxContent,{...n})}):_createMdxContent(n)}};",
    "permalink": "/blog/posts/publish-npm-package-guide"
  },
  {
    "title": "React Query 實用指南：在 Next.js 和 React.js 中的數據獲取",
    "date": "2025-03-02T00:00:00.000Z",
    "description": "以前我都用 useState + useEffect 來處理 API 呼叫，每次都要處理 loading、error、cache 很麻煩。直到遇到 React Query，才知道原來資料抓取可以這麼優雅！分享我的實戰心得。",
    "rawContent": "## 為什麼要用 React Query？\r\n\r\n還記得以前每次要抓 API 資料，都要寫一堆 useState 和 useEffect：\r\n\r\n```javascript\r\n// 以前的我...\r\nconst [data, setData] = useState(null);\r\nconst [loading, setLoading] = useState(false);\r\nconst [error, setError] = useState(null);\r\n\r\nuseEffect(() => {\r\n    const fetchData = async () => {\r\n        setLoading(true);\r\n        try {\r\n            const response = await fetch('/api/users');\r\n            const result = await response.json();\r\n            setData(result);\r\n        } catch (err) {\r\n            setError(err);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n    fetchData();\r\n}, []);\r\n```\r\n\r\n範例是用原生 fetch 啦，當然我知道現在 Client 端主流是用 axios ，但這不是重點，重點是每次都要自己處理 Loading、error 等，同時有 cache 需求時也還要寫的比較麻煩，直到我在看 Next.js 13 的官網文件時，才發現它們推薦在 Client 呼叫 API 使用 SWR 或 React Query，我才知道原來還有這麼好用的東西，一開始是先試試 SWR，但當我用過 React Query 後就回不去了XDD\r\n\r\n## 什麼是 React Query？\r\n\r\nReact Query（現在叫 TanStack Query）是專門處理 API 狀態的函式庫。它幫你處理：\r\n\r\n- **Cache 管理**：自動快取資料，避免重複請求\r\n- **背景更新**：當頁面重新聚焦時自動更新資料\r\n- **錯誤處理**：統一的錯誤處理機制\r\n- **Loading 狀態**：自動管理載入狀態\r\n- **樂觀更新**：先更新 UI，失敗再回復\r\n\r\n最重要的是，程式碼變得超級簡潔，然後 cache 設定變得超簡單，還有 devtools 在測試時超級好用！\r\n\r\n## 安裝和基本設定\r\n\r\n### 安裝套件\r\n\r\n```bash\r\npnpm add @tanstack/react-query\r\n```\r\n\r\n### 在 Next.js 中設定\r\n\r\n我習慣建立一個 providers 檔案來管理：\r\n\r\n```typescript title=\"src/providers/query-provider.tsx\"\r\n'use client';\r\n\r\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\r\nimport { ReactQueryDevtools } from '@tanstack/react-query-devtools';\r\nimport { useState } from 'react';\r\n\r\nexport default function QueryProvider({ children }: { children: React.ReactNode }) {\r\n    // 這樣每個用戶都有自己的 QueryClient 實例\r\n    const [queryClient] = useState(\r\n        () =>\r\n            new QueryClient({\r\n                defaultOptions: {\r\n                    queries: {\r\n                        // 5 分鐘後資料就算過期\r\n                        staleTime: 5 * 60 * 1000,\r\n                        // 快取保存 10 分鐘\r\n                        gcTime: 10 * 60 * 1000,\r\n                    },\r\n                },\r\n            })\r\n    );\r\n\r\n    return (\r\n        <QueryClientProvider client={queryClient}>\r\n            {children}\r\n            {/* 開發時很好用的測試工具 */}\r\n            <ReactQueryDevtools initialIsOpen={false} />\r\n        </QueryClientProvider>\r\n    );\r\n}\r\n```\r\n\r\n然後在 layout 中使用：\r\n\r\n```typescript title=\"src/app/layout.tsx\"\r\nimport QueryProvider from '@/providers/query-provider';\r\n\r\nexport default function RootLayout({ children }: { children: React.ReactNode }) {\r\n    return (\r\n        <html lang=\"zh-TW\">\r\n            <body>\r\n                <QueryProvider>\r\n                    {children}\r\n                </QueryProvider>\r\n            </body>\r\n        </html>\r\n    );\r\n}\r\n```\r\n\r\n## useQuery：抓取資料的神器\r\n\r\n這是我最常用的 hook：\r\n\r\n```typescript title=\"src/hooks/useUsers.ts\"\r\nimport { useQuery } from '@tanstack/react-query';\r\n\r\ninterface User {\r\n    id: number;\r\n    name: string;\r\n    email: string;\r\n}\r\n\r\n// 抓取用戶資料的函數，可以另外寫在關於 api 的檔案裡\r\nasync function fetchUsers(): Promise<User[]> {\r\n    const response = await fetch('/api/users');\r\n    if (!response.ok) {\r\n        throw new Error('Failed to fetch users');\r\n    }\r\n    return response.json();\r\n}\r\n\r\n// 自訂 hook\r\nexport function useUsers() {\r\n    return useQuery({\r\n        queryKey: ['users'], // 快取的鍵值\r\n        queryFn: fetchUsers,\r\n        staleTime: 5 * 60 * 1000, // 5 分鐘內不會重新抓取\r\n    });\r\n}\r\n```\r\n\r\n在元件中使用：\r\n\r\n```typescript title=\"src/components/UserList.tsx\"\r\nimport { useUsers } from '@/hooks/useUsers';\r\n\r\nexport default function UserList() {\r\n    const { data, isLoading, error } = useUsers();\r\n\r\n    if (isLoading) return <div>載入中...</div>;\r\n    if (error) return <div>錯誤：{error.message}</div>;\r\n\r\n    return (\r\n        <ul>\r\n            {data?.map((user) => (\r\n                <li key={user.id}>\r\n                    {user.name} - {user.email}\r\n                </li>\r\n            ))}\r\n        </ul>\r\n    );\r\n}\r\n```\r\n\r\n就這麼簡單！不用自己管理 loading、error、data 狀態。\r\n\r\n## 在 Next.js 中的 Server 端預取\r\n\r\nNext.js 的好處是可以在 Server 端先抓資料，用戶看到頁面時資料已經準備好了：\r\n\r\n```typescript title=\"src/app/users/page.tsx\"\r\nimport { QueryClient, HydrationBoundary, dehydrate } from '@tanstack/react-query';\r\nimport UserList from '@/components/UserList';\r\n\r\nasync function fetchUsers() {\r\n    const response = await fetch('https://api.example.com/users');\r\n    return response.json();\r\n}\r\n\r\nexport default async function UsersPage() {\r\n    const queryClient = new QueryClient();\r\n\r\n    // 在伺服器端預取資料\r\n    await queryClient.prefetchQuery({\r\n        queryKey: ['users'],\r\n        queryFn: fetchUsers,\r\n    });\r\n\r\n    return (\r\n        <HydrationBoundary state={dehydrate(queryClient)}>\r\n            <div>\r\n                <h1>用戶列表</h1>\r\n                <UserList />\r\n            </div>\r\n        </HydrationBoundary>\r\n    );\r\n}\r\n```\r\n\r\n## useMutation：處理資料更新\r\n\r\n用來處理新增、修改、刪除等操作：\r\n\r\n```typescript title=\"src/hooks/useCreateUser.ts\"\r\nimport { useMutation, useQueryClient } from '@tanstack/react-query';\r\n\r\ninterface CreateUserData {\r\n    name: string;\r\n    email: string;\r\n}\r\n\r\nasync function createUser(userData: CreateUserData) {\r\n    const response = await fetch('/api/users', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(userData),\r\n    });\r\n\r\n    if (!response.ok) {\r\n        throw new Error('Failed to create user');\r\n    }\r\n\r\n    return response.json();\r\n}\r\n\r\nexport function useCreateUser() {\r\n    const queryClient = useQueryClient();\r\n\r\n    return useMutation({\r\n        mutationFn: createUser,\r\n        onSuccess: () => {\r\n            // 新增成功後，讓用戶列表重新抓取\r\n            queryClient.invalidateQueries({ queryKey: ['users'] });\r\n        },\r\n        onError: (error) => {\r\n            console.error('建立用戶失敗:', error);\r\n        },\r\n    });\r\n}\r\n```\r\n\r\n在元件中使用：\r\n\r\n```typescript title=\"src/components/CreateUserForm.tsx\"\r\nimport { useState } from 'react';\r\nimport { useCreateUser } from '@/hooks/useCreateUser';\r\n\r\nexport default function CreateUserForm() {\r\n    const [name, setName] = useState('');\r\n    const [email, setEmail] = useState('');\r\n\r\n    const createUserMutation = useCreateUser();\r\n\r\n    const handleSubmit = (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        createUserMutation.mutate({ name, email });\r\n    };\r\n\r\n    return (\r\n        <form onSubmit={handleSubmit}>\r\n            <input\r\n                value={name}\r\n                onChange={(e) => setName(e.target.value)}\r\n                placeholder=\"姓名\"\r\n                required\r\n            />\r\n            <input\r\n                type=\"email\"\r\n                value={email}\r\n                onChange={(e) => setEmail(e.target.value)}\r\n                placeholder=\"Email\"\r\n                required\r\n            />\r\n            <button\r\n                type=\"submit\"\r\n                disabled={createUserMutation.isPending}\r\n            >\r\n                {createUserMutation.isPending ? '建立中...' : '建立用戶'}\r\n            </button>\r\n        </form>\r\n    );\r\n}\r\n```\r\n\r\n## staleTime vs gcTime：我一直搞混的概念\r\n\r\n這兩個參數我一開始總是搞不清楚：\r\n\r\n### staleTime（過期時間）\r\n\r\n資料被認為是「新鮮」的時間。在這段時間內，不會重新抓取資料。\r\n\r\n### gcTime（垃圾回收時間，以前叫 cacheTime）\r\n\r\n快取資料會保存多久。超過這個時間，資料會被從記憶體中清除。\r\n\r\n```typescript\r\nuseQuery({\r\n    queryKey: ['users'],\r\n    queryFn: fetchUsers,\r\n    staleTime: 5 * 60 * 1000, // 5 分鐘內資料是新鮮的\r\n    gcTime: 30 * 60 * 1000, // 30 分鐘後清除快取\r\n});\r\n```\r\n\r\n我的建議：\r\n\r\n- **staleTime**：根據資料更新頻率設定（使用者資料可能設 5 分鐘）\r\n- **gcTime**：通常設定比 staleTime 長一點\r\n\r\n## 實戰技巧分享\r\n\r\n### 1. 條件性查詢\r\n\r\n有時候你需要在某些條件滿足時才抓取資料：\r\n\r\n```typescript\r\nfunction useUserProfile(userId?: number) {\r\n    return useQuery({\r\n        queryKey: ['user', userId],\r\n        queryFn: () => fetchUser(userId!),\r\n        enabled: !!userId, // 只有當 userId 存在時才執行\r\n    });\r\n}\r\n```\r\n\r\n### 2. 分頁查詢\r\n\r\n```typescript\r\nfunction useUsers(page: number = 1) {\r\n    return useQuery({\r\n        queryKey: ['users', page],\r\n        queryFn: () => fetchUsers(page),\r\n        keepPreviousData: true, // 切換頁面時保留前一頁資料\r\n    });\r\n}\r\n```\r\n\r\n### 3. 樂觀更新\r\n\r\n先更新 UI，API 失敗再回復：\r\n\r\n```typescript\r\nconst updateUserMutation = useMutation({\r\n    mutationFn: updateUser,\r\n    onMutate: async (newUser) => {\r\n        // 取消進行中的查詢\r\n        await queryClient.cancelQueries({ queryKey: ['users'] });\r\n\r\n        // 先更新快取\r\n        const previousUsers = queryClient.getQueryData(['users']);\r\n        queryClient.setQueryData(['users'], (old: User[]) =>\r\n            old.map((user) => (user.id === newUser.id ? newUser : user))\r\n        );\r\n\r\n        return { previousUsers };\r\n    },\r\n    onError: (err, newUser, context) => {\r\n        // 失敗時回復\r\n        queryClient.setQueryData(['users'], context?.previousUsers);\r\n    },\r\n    onSettled: () => {\r\n        // 不管成功失敗都重新抓取\r\n        queryClient.invalidateQueries({ queryKey: ['users'] });\r\n    },\r\n});\r\n```\r\n\r\n## 效能優化建議\r\n\r\n### 1. 適當設定 staleTime\r\n\r\n```typescript\r\n// 很少變動的資料\r\nconst { data } = useQuery({\r\n    queryKey: ['config'],\r\n    queryFn: fetchConfig,\r\n    staleTime: 30 * 60 * 1000, // 30 分鐘\r\n});\r\n\r\n// 經常變動的資料\r\nconst { data } = useQuery({\r\n    queryKey: ['notifications'],\r\n    queryFn: fetchNotifications,\r\n    staleTime: 30 * 1000, // 30 秒\r\n});\r\n```\r\n\r\n### 2. 使用 select 減少重新渲染\r\n\r\n```typescript\r\nconst { data: userNames } = useQuery({\r\n    queryKey: ['users'],\r\n    queryFn: fetchUsers,\r\n    select: (users) => users.map((user) => user.name), // 只關心名字\r\n});\r\n```\r\n\r\n### 3. 分割大查詢\r\n\r\n不要一次抓太多資料，可以分成多個小查詢。",
    "category": "Code",
    "tags": [
      "React Query",
      "Next.js",
      "React.js",
      "Data Fetching",
      "TanStack Query"
    ],
    "image": "/blog/posts/2025/03/tanstack-query.png",
    "headings": [
      {
        "level": 2,
        "text": "為什麼要用 React Query？"
      },
      {
        "level": 2,
        "text": "什麼是 React Query？"
      },
      {
        "level": 2,
        "text": "安裝和基本設定"
      },
      {
        "level": 3,
        "text": "安裝套件"
      },
      {
        "level": 3,
        "text": "在 Next.js 中設定"
      },
      {
        "level": 2,
        "text": "useQuery：抓取資料的神器"
      },
      {
        "level": 2,
        "text": "在 Next.js 中的 Server 端預取"
      },
      {
        "level": 2,
        "text": "useMutation：處理資料更新"
      },
      {
        "level": 2,
        "text": "staleTime vs gcTime：我一直搞混的概念"
      },
      {
        "level": 3,
        "text": "staleTime（過期時間）"
      },
      {
        "level": 3,
        "text": "gcTime（垃圾回收時間，以前叫 cacheTime）"
      },
      {
        "level": 2,
        "text": "實戰技巧分享"
      },
      {
        "level": 3,
        "text": "1. 條件性查詢"
      },
      {
        "level": 3,
        "text": "2. 分頁查詢"
      },
      {
        "level": 3,
        "text": "3. 樂觀更新"
      },
      {
        "level": 2,
        "text": "效能優化建議"
      },
      {
        "level": 3,
        "text": "1. 適當設定 staleTime"
      },
      {
        "level": 3,
        "text": "2. 使用 select 減少重新渲染"
      },
      {
        "level": 3,
        "text": "3. 分割大查詢"
      }
    ],
    "slug": "react-query-practical-guide-nextjs-reactjs",
    "code": "const{Fragment:e,jsx:l,jsxs:n}=arguments[0];function _createMdxContent(r){const s={code:\"code\",figcaption:\"figcaption\",figure:\"figure\",h2:\"h2\",h3:\"h3\",li:\"li\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...r.components};return n(e,{children:[l(s.h2,{children:\"為什麼要用 React Query？\"}),\"\\n\",l(s.p,{children:\"還記得以前每次要抓 API 資料，都要寫一堆 useState 和 useEffect：\"}),\"\\n\",l(s.figure,{\"data-rehype-pretty-code-figure\":\"\",children:l(s.pre,{style:{backgroundColor:\"#282c34\",color:\"#abb2bf\"},tabIndex:\"0\",rawcontent:\"// 以前的我...\\nconst [data, setData] = useState(null);\\nconst [loading, setLoading] = useState(false);\\nconst [error, setError] = useState(null);\\n\\nuseEffect(() => {\\n    const fetchData = async () => {\\n        setLoading(true);\\n        try {\\n            const response = await fetch('/api/users');\\n            const result = await response.json();\\n            setData(result);\\n        } catch (err) {\\n            setError(err);\\n        } finally {\\n            setLoading(false);\\n        }\\n    };\\n    fetchData();\\n}, []);\",\"data-language\":\"javascript\",\"data-theme\":\"one-dark-pro\",children:n(s.code,{\"data-language\":\"javascript\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[l(s.span,{\"data-line\":\"\",children:l(s.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// 以前的我...\"})}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#C678DD\"},children:\"const\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\" [\"}),l(s.span,{style:{color:\"#E5C07B\"},children:\"data\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\", \"}),l(s.span,{style:{color:\"#E5C07B\"},children:\"setData\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"] \"}),l(s.span,{style:{color:\"#56B6C2\"},children:\"=\"}),l(s.span,{style:{color:\"#61AFEF\"},children:\" useState\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),l(s.span,{style:{color:\"#D19A66\"},children:\"null\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#C678DD\"},children:\"const\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\" [\"}),l(s.span,{style:{color:\"#E5C07B\"},children:\"loading\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\", \"}),l(s.span,{style:{color:\"#E5C07B\"},children:\"setLoading\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"] \"}),l(s.span,{style:{color:\"#56B6C2\"},children:\"=\"}),l(s.span,{style:{color:\"#61AFEF\"},children:\" useState\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),l(s.span,{style:{color:\"#D19A66\"},children:\"false\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#C678DD\"},children:\"const\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\" [\"}),l(s.span,{style:{color:\"#E5C07B\"},children:\"error\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\", \"}),l(s.span,{style:{color:\"#E5C07B\"},children:\"setError\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"] \"}),l(s.span,{style:{color:\"#56B6C2\"},children:\"=\"}),l(s.span,{style:{color:\"#61AFEF\"},children:\" useState\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),l(s.span,{style:{color:\"#D19A66\"},children:\"null\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#61AFEF\"},children:\"useEffect\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"(() \"}),l(s.span,{style:{color:\"#C678DD\"},children:\"=>\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\" {\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#C678DD\"},children:\"    const\"}),l(s.span,{style:{color:\"#61AFEF\"},children:\" fetchData\"}),l(s.span,{style:{color:\"#56B6C2\"},children:\" =\"}),l(s.span,{style:{color:\"#C678DD\"},children:\" async\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\" () \"}),l(s.span,{style:{color:\"#C678DD\"},children:\"=>\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\" {\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#61AFEF\"},children:\"        setLoading\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),l(s.span,{style:{color:\"#D19A66\"},children:\"true\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#C678DD\"},children:\"        try\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\" {\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#C678DD\"},children:\"            const\"}),l(s.span,{style:{color:\"#E5C07B\"},children:\" response\"}),l(s.span,{style:{color:\"#56B6C2\"},children:\" =\"}),l(s.span,{style:{color:\"#C678DD\"},children:\" await\"}),l(s.span,{style:{color:\"#61AFEF\"},children:\" fetch\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),l(s.span,{style:{color:\"#98C379\"},children:\"'/api/users'\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#C678DD\"},children:\"            const\"}),l(s.span,{style:{color:\"#E5C07B\"},children:\" result\"}),l(s.span,{style:{color:\"#56B6C2\"},children:\" =\"}),l(s.span,{style:{color:\"#C678DD\"},children:\" await\"}),l(s.span,{style:{color:\"#E5C07B\"},children:\" response\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\".\"}),l(s.span,{style:{color:\"#61AFEF\"},children:\"json\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"();\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#61AFEF\"},children:\"            setData\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),l(s.span,{style:{color:\"#E06C75\"},children:\"result\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#ABB2BF\"},children:\"        } \"}),l(s.span,{style:{color:\"#C678DD\"},children:\"catch\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\" (\"}),l(s.span,{style:{color:\"#E06C75\"},children:\"err\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\") {\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#61AFEF\"},children:\"            setError\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),l(s.span,{style:{color:\"#E06C75\"},children:\"err\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#ABB2BF\"},children:\"        } \"}),l(s.span,{style:{color:\"#C678DD\"},children:\"finally\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\" {\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#61AFEF\"},children:\"            setLoading\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),l(s.span,{style:{color:\"#D19A66\"},children:\"false\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:l(s.span,{style:{color:\"#ABB2BF\"},children:\"        }\"})}),\"\\n\",l(s.span,{\"data-line\":\"\",children:l(s.span,{style:{color:\"#ABB2BF\"},children:\"    };\"})}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#61AFEF\"},children:\"    fetchData\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"();\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:l(s.span,{style:{color:\"#ABB2BF\"},children:\"}, []);\"})})]})})}),\"\\n\",l(s.p,{children:\"範例是用原生 fetch 啦，當然我知道現在 Client 端主流是用 axios ，但這不是重點，重點是每次都要自己處理 Loading、error 等，同時有 cache 需求時也還要寫的比較麻煩，直到我在看 Next.js 13 的官網文件時，才發現它們推薦在 Client 呼叫 API 使用 SWR 或 React Query，我才知道原來還有這麼好用的東西，一開始是先試試 SWR，但當我用過 React Query 後就回不去了XDD\"}),\"\\n\",l(s.h2,{children:\"什麼是 React Query？\"}),\"\\n\",l(s.p,{children:\"React Query（現在叫 TanStack Query）是專門處理 API 狀態的函式庫。它幫你處理：\"}),\"\\n\",n(s.ul,{children:[\"\\n\",n(s.li,{children:[l(s.strong,{children:\"Cache 管理\"}),\"：自動快取資料，避免重複請求\"]}),\"\\n\",n(s.li,{children:[l(s.strong,{children:\"背景更新\"}),\"：當頁面重新聚焦時自動更新資料\"]}),\"\\n\",n(s.li,{children:[l(s.strong,{children:\"錯誤處理\"}),\"：統一的錯誤處理機制\"]}),\"\\n\",n(s.li,{children:[l(s.strong,{children:\"Loading 狀態\"}),\"：自動管理載入狀態\"]}),\"\\n\",n(s.li,{children:[l(s.strong,{children:\"樂觀更新\"}),\"：先更新 UI，失敗再回復\"]}),\"\\n\"]}),\"\\n\",l(s.p,{children:\"最重要的是，程式碼變得超級簡潔，然後 cache 設定變得超簡單，還有 devtools 在測試時超級好用！\"}),\"\\n\",l(s.h2,{children:\"安裝和基本設定\"}),\"\\n\",l(s.h3,{children:\"安裝套件\"}),\"\\n\",l(s.figure,{\"data-rehype-pretty-code-figure\":\"\",children:l(s.pre,{style:{backgroundColor:\"#282c34\",color:\"#abb2bf\"},tabIndex:\"0\",rawcontent:\"pnpm add @tanstack/react-query\",\"data-language\":\"bash\",\"data-theme\":\"one-dark-pro\",children:l(s.code,{\"data-language\":\"bash\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#61AFEF\"},children:\"pnpm\"}),l(s.span,{style:{color:\"#98C379\"},children:\" add\"}),l(s.span,{style:{color:\"#98C379\"},children:\" @tanstack/react-query\"})]})})})}),\"\\n\",l(s.h3,{children:\"在 Next.js 中設定\"}),\"\\n\",l(s.p,{children:\"我習慣建立一個 providers 檔案來管理：\"}),\"\\n\",n(s.figure,{\"data-rehype-pretty-code-figure\":\"\",children:[l(s.figcaption,{\"data-rehype-pretty-code-title\":\"\",\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",children:\"src/providers/query-provider.tsx\"}),l(s.pre,{style:{backgroundColor:\"#282c34\",color:\"#abb2bf\"},tabIndex:\"0\",rawcontent:\"'use client';\\n\\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\\nimport { ReactQueryDevtools } from '@tanstack/react-query-devtools';\\nimport { useState } from 'react';\\n\\nexport default function QueryProvider({ children }: { children: React.ReactNode }) {\\n    // 這樣每個用戶都有自己的 QueryClient 實例\\n    const [queryClient] = useState(\\n        () =>\\n            new QueryClient({\\n                defaultOptions: {\\n                    queries: {\\n                        // 5 分鐘後資料就算過期\\n                        staleTime: 5 * 60 * 1000,\\n                        // 快取保存 10 分鐘\\n                        gcTime: 10 * 60 * 1000,\\n                    },\\n                },\\n            })\\n    );\\n\\n    return (\\n        <QueryClientProvider client={queryClient}>\\n            {children}\\n            {/* 開發時很好用的測試工具 */}\\n            <ReactQueryDevtools initialIsOpen={false} />\\n        </QueryClientProvider>\\n    );\\n}\",\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",children:n(s.code,{\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#98C379\"},children:\"'use client'\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#C678DD\"},children:\"import\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\" { \"}),l(s.span,{style:{color:\"#E06C75\"},children:\"QueryClient\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\", \"}),l(s.span,{style:{color:\"#E06C75\"},children:\"QueryClientProvider\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\" } \"}),l(s.span,{style:{color:\"#C678DD\"},children:\"from\"}),l(s.span,{style:{color:\"#98C379\"},children:\" '@tanstack/react-query'\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#C678DD\"},children:\"import\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\" { \"}),l(s.span,{style:{color:\"#E06C75\"},children:\"ReactQueryDevtools\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\" } \"}),l(s.span,{style:{color:\"#C678DD\"},children:\"from\"}),l(s.span,{style:{color:\"#98C379\"},children:\" '@tanstack/react-query-devtools'\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#C678DD\"},children:\"import\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\" { \"}),l(s.span,{style:{color:\"#E06C75\"},children:\"useState\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\" } \"}),l(s.span,{style:{color:\"#C678DD\"},children:\"from\"}),l(s.span,{style:{color:\"#98C379\"},children:\" 'react'\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#C678DD\"},children:\"export\"}),l(s.span,{style:{color:\"#C678DD\"},children:\" default\"}),l(s.span,{style:{color:\"#C678DD\"},children:\" function\"}),l(s.span,{style:{color:\"#61AFEF\"},children:\" QueryProvider\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"({ \"}),l(s.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"children\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\" }: { \"}),l(s.span,{style:{color:\"#E06C75\"},children:\"children\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\": \"}),l(s.span,{style:{color:\"#E5C07B\"},children:\"React\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\".\"}),l(s.span,{style:{color:\"#E5C07B\"},children:\"ReactNode\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\" }) {\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:l(s.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"    // 這樣每個用戶都有自己的 QueryClient 實例\"})}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#C678DD\"},children:\"    const\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\" [\"}),l(s.span,{style:{color:\"#E5C07B\"},children:\"queryClient\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"] \"}),l(s.span,{style:{color:\"#56B6C2\"},children:\"=\"}),l(s.span,{style:{color:\"#61AFEF\"},children:\" useState\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"(\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#ABB2BF\"},children:\"        () \"}),l(s.span,{style:{color:\"#C678DD\"},children:\"=>\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#C678DD\"},children:\"            new\"}),l(s.span,{style:{color:\"#61AFEF\"},children:\" QueryClient\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"({\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#E06C75\"},children:\"                defaultOptions\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\": {\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#E06C75\"},children:\"                    queries\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\": {\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:l(s.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"                        // 5 分鐘後資料就算過期\"})}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#E06C75\"},children:\"                        staleTime\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\": \"}),l(s.span,{style:{color:\"#D19A66\"},children:\"5\"}),l(s.span,{style:{color:\"#56B6C2\"},children:\" *\"}),l(s.span,{style:{color:\"#D19A66\"},children:\" 60\"}),l(s.span,{style:{color:\"#56B6C2\"},children:\" *\"}),l(s.span,{style:{color:\"#D19A66\"},children:\" 1000\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:l(s.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"                        // 快取保存 10 分鐘\"})}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#E06C75\"},children:\"                        gcTime\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\": \"}),l(s.span,{style:{color:\"#D19A66\"},children:\"10\"}),l(s.span,{style:{color:\"#56B6C2\"},children:\" *\"}),l(s.span,{style:{color:\"#D19A66\"},children:\" 60\"}),l(s.span,{style:{color:\"#56B6C2\"},children:\" *\"}),l(s.span,{style:{color:\"#D19A66\"},children:\" 1000\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:l(s.span,{style:{color:\"#ABB2BF\"},children:\"                    },\"})}),\"\\n\",l(s.span,{\"data-line\":\"\",children:l(s.span,{style:{color:\"#ABB2BF\"},children:\"                },\"})}),\"\\n\",l(s.span,{\"data-line\":\"\",children:l(s.span,{style:{color:\"#ABB2BF\"},children:\"            })\"})}),\"\\n\",l(s.span,{\"data-line\":\"\",children:l(s.span,{style:{color:\"#ABB2BF\"},children:\"    );\"})}),\"\\n\",l(s.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#C678DD\"},children:\"    return\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\" (\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#56B6C2\"},children:\"        <\"}),l(s.span,{style:{color:\"#E06C75\"},children:\"QueryClientProvider\"}),l(s.span,{style:{color:\"#E06C75\"},children:\" client\"}),l(s.span,{style:{color:\"#56B6C2\"},children:\"=\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"{\"}),l(s.span,{style:{color:\"#E06C75\"},children:\"queryClient\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"}\"}),l(s.span,{style:{color:\"#56B6C2\"},children:\">\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#ABB2BF\"},children:\"            {\"}),l(s.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"children\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"}\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#ABB2BF\"},children:\"            {\"}),l(s.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"/* 開發時很好用的測試工具 */\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"}\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#56B6C2\"},children:\"            <\"}),l(s.span,{style:{color:\"#E06C75\"},children:\"ReactQueryDevtools\"}),l(s.span,{style:{color:\"#E06C75\"},children:\" initialIsOpen\"}),l(s.span,{style:{color:\"#56B6C2\"},children:\"=\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"{\"}),l(s.span,{style:{color:\"#E06C75\"},children:\"false\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"} \"}),l(s.span,{style:{color:\"#56B6C2\"},children:\"/>\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#56B6C2\"},children:\"        </\"}),l(s.span,{style:{color:\"#E06C75\"},children:\"QueryClientProvider\"}),l(s.span,{style:{color:\"#56B6C2\"},children:\">\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:l(s.span,{style:{color:\"#ABB2BF\"},children:\"    );\"})}),\"\\n\",l(s.span,{\"data-line\":\"\",children:l(s.span,{style:{color:\"#ABB2BF\"},children:\"}\"})})]})})]}),\"\\n\",l(s.p,{children:\"然後在 layout 中使用：\"}),\"\\n\",n(s.figure,{\"data-rehype-pretty-code-figure\":\"\",children:[l(s.figcaption,{\"data-rehype-pretty-code-title\":\"\",\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",children:\"src/app/layout.tsx\"}),l(s.pre,{style:{backgroundColor:\"#282c34\",color:\"#abb2bf\"},tabIndex:\"0\",rawcontent:\"import QueryProvider from '@/providers/query-provider';\\n\\nexport default function RootLayout({ children }: { children: React.ReactNode }) {\\n    return (\\n        <html lang=\\\"zh-TW\\\">\\n            <body>\\n                <QueryProvider>\\n                    {children}\\n                </QueryProvider>\\n            </body>\\n        </html>\\n    );\\n}\",\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",children:n(s.code,{\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#C678DD\"},children:\"import\"}),l(s.span,{style:{color:\"#E06C75\"},children:\" QueryProvider\"}),l(s.span,{style:{color:\"#C678DD\"},children:\" from\"}),l(s.span,{style:{color:\"#98C379\"},children:\" '@/providers/query-provider'\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#C678DD\"},children:\"export\"}),l(s.span,{style:{color:\"#C678DD\"},children:\" default\"}),l(s.span,{style:{color:\"#C678DD\"},children:\" function\"}),l(s.span,{style:{color:\"#61AFEF\"},children:\" RootLayout\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"({ \"}),l(s.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"children\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\" }: { \"}),l(s.span,{style:{color:\"#E06C75\"},children:\"children\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\": \"}),l(s.span,{style:{color:\"#E5C07B\"},children:\"React\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\".\"}),l(s.span,{style:{color:\"#E5C07B\"},children:\"ReactNode\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\" }) {\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#C678DD\"},children:\"    return\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\" (\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#56B6C2\"},children:\"        <\"}),l(s.span,{style:{color:\"#E06C75\"},children:\"html\"}),l(s.span,{style:{color:\"#E06C75\"},children:\" lang\"}),l(s.span,{style:{color:\"#56B6C2\"},children:\"=\"}),l(s.span,{style:{color:\"#98C379\"},children:'\"zh-TW\"'}),l(s.span,{style:{color:\"#56B6C2\"},children:\">\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#ABB2BF\"},children:\"            <\"}),l(s.span,{style:{color:\"#E5C07B\"},children:\"body\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\">\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#ABB2BF\"},children:\"                <\"}),l(s.span,{style:{color:\"#E5C07B\"},children:\"QueryProvider\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\">\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#ABB2BF\"},children:\"                    {\"}),l(s.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"children\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"}\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#56B6C2\"},children:\"                </\"}),l(s.span,{style:{color:\"#E06C75\"},children:\"QueryProvider\"}),l(s.span,{style:{color:\"#56B6C2\"},children:\">\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#56B6C2\"},children:\"            </\"}),l(s.span,{style:{color:\"#E06C75\"},children:\"body\"}),l(s.span,{style:{color:\"#56B6C2\"},children:\">\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#56B6C2\"},children:\"        </\"}),l(s.span,{style:{color:\"#E06C75\"},children:\"html\"}),l(s.span,{style:{color:\"#56B6C2\"},children:\">\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:l(s.span,{style:{color:\"#ABB2BF\"},children:\"    );\"})}),\"\\n\",l(s.span,{\"data-line\":\"\",children:l(s.span,{style:{color:\"#ABB2BF\"},children:\"}\"})})]})})]}),\"\\n\",l(s.h2,{children:\"useQuery：抓取資料的神器\"}),\"\\n\",l(s.p,{children:\"這是我最常用的 hook：\"}),\"\\n\",n(s.figure,{\"data-rehype-pretty-code-figure\":\"\",children:[l(s.figcaption,{\"data-rehype-pretty-code-title\":\"\",\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",children:\"src/hooks/useUsers.ts\"}),l(s.pre,{style:{backgroundColor:\"#282c34\",color:\"#abb2bf\"},tabIndex:\"0\",rawcontent:\"import { useQuery } from '@tanstack/react-query';\\n\\ninterface User {\\n    id: number;\\n    name: string;\\n    email: string;\\n}\\n\\n// 抓取用戶資料的函數，可以另外寫在關於 api 的檔案裡\\nasync function fetchUsers(): Promise<User[]> {\\n    const response = await fetch('/api/users');\\n    if (!response.ok) {\\n        throw new Error('Failed to fetch users');\\n    }\\n    return response.json();\\n}\\n\\n// 自訂 hook\\nexport function useUsers() {\\n    return useQuery({\\n        queryKey: ['users'], // 快取的鍵值\\n        queryFn: fetchUsers,\\n        staleTime: 5 * 60 * 1000, // 5 分鐘內不會重新抓取\\n    });\\n}\",\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",children:n(s.code,{\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#C678DD\"},children:\"import\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\" { \"}),l(s.span,{style:{color:\"#E06C75\"},children:\"useQuery\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\" } \"}),l(s.span,{style:{color:\"#C678DD\"},children:\"from\"}),l(s.span,{style:{color:\"#98C379\"},children:\" '@tanstack/react-query'\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#C678DD\"},children:\"interface\"}),l(s.span,{style:{color:\"#E5C07B\"},children:\" User\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\" {\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#E06C75\"},children:\"    id\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\": \"}),l(s.span,{style:{color:\"#E5C07B\"},children:\"number\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#E06C75\"},children:\"    name\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\": \"}),l(s.span,{style:{color:\"#E5C07B\"},children:\"string\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#E06C75\"},children:\"    email\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\": \"}),l(s.span,{style:{color:\"#E5C07B\"},children:\"string\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:l(s.span,{style:{color:\"#ABB2BF\"},children:\"}\"})}),\"\\n\",l(s.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",l(s.span,{\"data-line\":\"\",children:l(s.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// 抓取用戶資料的函數，可以另外寫在關於 api 的檔案裡\"})}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#C678DD\"},children:\"async\"}),l(s.span,{style:{color:\"#C678DD\"},children:\" function\"}),l(s.span,{style:{color:\"#61AFEF\"},children:\" fetchUsers\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"(): \"}),l(s.span,{style:{color:\"#E5C07B\"},children:\"Promise\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"<\"}),l(s.span,{style:{color:\"#E5C07B\"},children:\"User\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"[]> {\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#C678DD\"},children:\"    const\"}),l(s.span,{style:{color:\"#E5C07B\"},children:\" response\"}),l(s.span,{style:{color:\"#56B6C2\"},children:\" =\"}),l(s.span,{style:{color:\"#C678DD\"},children:\" await\"}),l(s.span,{style:{color:\"#61AFEF\"},children:\" fetch\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),l(s.span,{style:{color:\"#98C379\"},children:\"'/api/users'\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#C678DD\"},children:\"    if\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\" (\"}),l(s.span,{style:{color:\"#56B6C2\"},children:\"!\"}),l(s.span,{style:{color:\"#E5C07B\"},children:\"response\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\".\"}),l(s.span,{style:{color:\"#E06C75\"},children:\"ok\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\") {\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#C678DD\"},children:\"        throw\"}),l(s.span,{style:{color:\"#C678DD\"},children:\" new\"}),l(s.span,{style:{color:\"#61AFEF\"},children:\" Error\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),l(s.span,{style:{color:\"#98C379\"},children:\"'Failed to fetch users'\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:l(s.span,{style:{color:\"#ABB2BF\"},children:\"    }\"})}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#C678DD\"},children:\"    return\"}),l(s.span,{style:{color:\"#E5C07B\"},children:\" response\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\".\"}),l(s.span,{style:{color:\"#61AFEF\"},children:\"json\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"();\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:l(s.span,{style:{color:\"#ABB2BF\"},children:\"}\"})}),\"\\n\",l(s.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",l(s.span,{\"data-line\":\"\",children:l(s.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// 自訂 hook\"})}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#C678DD\"},children:\"export\"}),l(s.span,{style:{color:\"#C678DD\"},children:\" function\"}),l(s.span,{style:{color:\"#61AFEF\"},children:\" useUsers\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"() {\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#C678DD\"},children:\"    return\"}),l(s.span,{style:{color:\"#61AFEF\"},children:\" useQuery\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"({\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#E06C75\"},children:\"        queryKey\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\": [\"}),l(s.span,{style:{color:\"#98C379\"},children:\"'users'\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"], \"}),l(s.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// 快取的鍵值\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#E06C75\"},children:\"        queryFn\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\": \"}),l(s.span,{style:{color:\"#E06C75\"},children:\"fetchUsers\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#E06C75\"},children:\"        staleTime\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\": \"}),l(s.span,{style:{color:\"#D19A66\"},children:\"5\"}),l(s.span,{style:{color:\"#56B6C2\"},children:\" *\"}),l(s.span,{style:{color:\"#D19A66\"},children:\" 60\"}),l(s.span,{style:{color:\"#56B6C2\"},children:\" *\"}),l(s.span,{style:{color:\"#D19A66\"},children:\" 1000\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\", \"}),l(s.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// 5 分鐘內不會重新抓取\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:l(s.span,{style:{color:\"#ABB2BF\"},children:\"    });\"})}),\"\\n\",l(s.span,{\"data-line\":\"\",children:l(s.span,{style:{color:\"#ABB2BF\"},children:\"}\"})})]})})]}),\"\\n\",l(s.p,{children:\"在元件中使用：\"}),\"\\n\",n(s.figure,{\"data-rehype-pretty-code-figure\":\"\",children:[l(s.figcaption,{\"data-rehype-pretty-code-title\":\"\",\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",children:\"src/components/UserList.tsx\"}),l(s.pre,{style:{backgroundColor:\"#282c34\",color:\"#abb2bf\"},tabIndex:\"0\",rawcontent:\"import { useUsers } from '@/hooks/useUsers';\\n\\nexport default function UserList() {\\n    const { data, isLoading, error } = useUsers();\\n\\n    if (isLoading) return <div>載入中...</div>;\\n    if (error) return <div>錯誤：{error.message}</div>;\\n\\n    return (\\n        <ul>\\n            {data?.map((user) => (\\n                <li key={user.id}>\\n                    {user.name} - {user.email}\\n                </li>\\n            ))}\\n        </ul>\\n    );\\n}\",\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",children:n(s.code,{\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#C678DD\"},children:\"import\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\" { \"}),l(s.span,{style:{color:\"#E06C75\"},children:\"useUsers\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\" } \"}),l(s.span,{style:{color:\"#C678DD\"},children:\"from\"}),l(s.span,{style:{color:\"#98C379\"},children:\" '@/hooks/useUsers'\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#C678DD\"},children:\"export\"}),l(s.span,{style:{color:\"#C678DD\"},children:\" default\"}),l(s.span,{style:{color:\"#C678DD\"},children:\" function\"}),l(s.span,{style:{color:\"#61AFEF\"},children:\" UserList\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"() {\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#C678DD\"},children:\"    const\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\" { \"}),l(s.span,{style:{color:\"#E5C07B\"},children:\"data\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\", \"}),l(s.span,{style:{color:\"#E5C07B\"},children:\"isLoading\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\", \"}),l(s.span,{style:{color:\"#E5C07B\"},children:\"error\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\" } \"}),l(s.span,{style:{color:\"#56B6C2\"},children:\"=\"}),l(s.span,{style:{color:\"#61AFEF\"},children:\" useUsers\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"();\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#C678DD\"},children:\"    if\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\" (\"}),l(s.span,{style:{color:\"#E06C75\"},children:\"isLoading\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\") \"}),l(s.span,{style:{color:\"#C678DD\"},children:\"return\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\" <\"}),l(s.span,{style:{color:\"#E5C07B\"},children:\"div\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\">\"}),l(s.span,{style:{color:\"#E06C75\"},children:\"載入中\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"...\"}),l(s.span,{style:{color:\"#56B6C2\"},children:\"</\"}),l(s.span,{style:{color:\"#E06C75\"},children:\"div\"}),l(s.span,{style:{color:\"#56B6C2\"},children:\">\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#C678DD\"},children:\"    if\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\" (\"}),l(s.span,{style:{color:\"#E06C75\"},children:\"error\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\") \"}),l(s.span,{style:{color:\"#C678DD\"},children:\"return\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\" <\"}),l(s.span,{style:{color:\"#E5C07B\"},children:\"div\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\">\"}),l(s.span,{style:{color:\"#E06C75\"},children:\"錯誤\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"：{error.\"}),l(s.span,{style:{color:\"#E06C75\"},children:\"message\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"}\"}),l(s.span,{style:{color:\"#56B6C2\"},children:\"</\"}),l(s.span,{style:{color:\"#E06C75\"},children:\"div\"}),l(s.span,{style:{color:\"#56B6C2\"},children:\">\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#C678DD\"},children:\"    return\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\" (\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#ABB2BF\"},children:\"        <\"}),l(s.span,{style:{color:\"#E5C07B\"},children:\"ul\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\">\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#ABB2BF\"},children:\"            {\"}),l(s.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"data\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"?.\"}),l(s.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"map\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"((\"}),l(s.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"user\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\") \"}),l(s.span,{style:{color:\"#56B6C2\"},children:\"=>\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\" (\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#56B6C2\"},children:\"                <\"}),l(s.span,{style:{color:\"#E06C75\"},children:\"li\"}),l(s.span,{style:{color:\"#E06C75\"},children:\" key\"}),l(s.span,{style:{color:\"#56B6C2\"},children:\"=\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"{user.\"}),l(s.span,{style:{color:\"#E06C75\"},children:\"id\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"}\"}),l(s.span,{style:{color:\"#56B6C2\"},children:\">\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#ABB2BF\"},children:\"                    {\"}),l(s.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"user\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\".\"}),l(s.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"name\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"} \"}),l(s.span,{style:{color:\"#56B6C2\"},children:\"-\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\" {\"}),l(s.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"user\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\".\"}),l(s.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"email\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"}\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#56B6C2\"},children:\"                </\"}),l(s.span,{style:{color:\"#E06C75\"},children:\"li\"}),l(s.span,{style:{color:\"#56B6C2\"},children:\">\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:l(s.span,{style:{color:\"#ABB2BF\"},children:\"            ))}\"})}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#56B6C2\"},children:\"        </\"}),l(s.span,{style:{color:\"#E06C75\"},children:\"ul\"}),l(s.span,{style:{color:\"#56B6C2\"},children:\">\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:l(s.span,{style:{color:\"#ABB2BF\"},children:\"    );\"})}),\"\\n\",l(s.span,{\"data-line\":\"\",children:l(s.span,{style:{color:\"#ABB2BF\"},children:\"}\"})})]})})]}),\"\\n\",l(s.p,{children:\"就這麼簡單！不用自己管理 loading、error、data 狀態。\"}),\"\\n\",l(s.h2,{children:\"在 Next.js 中的 Server 端預取\"}),\"\\n\",l(s.p,{children:\"Next.js 的好處是可以在 Server 端先抓資料，用戶看到頁面時資料已經準備好了：\"}),\"\\n\",n(s.figure,{\"data-rehype-pretty-code-figure\":\"\",children:[l(s.figcaption,{\"data-rehype-pretty-code-title\":\"\",\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",children:\"src/app/users/page.tsx\"}),l(s.pre,{style:{backgroundColor:\"#282c34\",color:\"#abb2bf\"},tabIndex:\"0\",rawcontent:\"import { QueryClient, HydrationBoundary, dehydrate } from '@tanstack/react-query';\\nimport UserList from '@/components/UserList';\\n\\nasync function fetchUsers() {\\n    const response = await fetch('https://api.example.com/users');\\n    return response.json();\\n}\\n\\nexport default async function UsersPage() {\\n    const queryClient = new QueryClient();\\n\\n    // 在伺服器端預取資料\\n    await queryClient.prefetchQuery({\\n        queryKey: ['users'],\\n        queryFn: fetchUsers,\\n    });\\n\\n    return (\\n        <HydrationBoundary state={dehydrate(queryClient)}>\\n            <div>\\n                <h1>用戶列表</h1>\\n                <UserList />\\n            </div>\\n        </HydrationBoundary>\\n    );\\n}\",\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",children:n(s.code,{\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#C678DD\"},children:\"import\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\" { \"}),l(s.span,{style:{color:\"#E06C75\"},children:\"QueryClient\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\", \"}),l(s.span,{style:{color:\"#E06C75\"},children:\"HydrationBoundary\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\", \"}),l(s.span,{style:{color:\"#E06C75\"},children:\"dehydrate\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\" } \"}),l(s.span,{style:{color:\"#C678DD\"},children:\"from\"}),l(s.span,{style:{color:\"#98C379\"},children:\" '@tanstack/react-query'\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#C678DD\"},children:\"import\"}),l(s.span,{style:{color:\"#E06C75\"},children:\" UserList\"}),l(s.span,{style:{color:\"#C678DD\"},children:\" from\"}),l(s.span,{style:{color:\"#98C379\"},children:\" '@/components/UserList'\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#C678DD\"},children:\"async\"}),l(s.span,{style:{color:\"#C678DD\"},children:\" function\"}),l(s.span,{style:{color:\"#61AFEF\"},children:\" fetchUsers\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"() {\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#C678DD\"},children:\"    const\"}),l(s.span,{style:{color:\"#E5C07B\"},children:\" response\"}),l(s.span,{style:{color:\"#56B6C2\"},children:\" =\"}),l(s.span,{style:{color:\"#C678DD\"},children:\" await\"}),l(s.span,{style:{color:\"#61AFEF\"},children:\" fetch\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),l(s.span,{style:{color:\"#98C379\"},children:\"'https://api.example.com/users'\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#C678DD\"},children:\"    return\"}),l(s.span,{style:{color:\"#E5C07B\"},children:\" response\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\".\"}),l(s.span,{style:{color:\"#61AFEF\"},children:\"json\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"();\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:l(s.span,{style:{color:\"#ABB2BF\"},children:\"}\"})}),\"\\n\",l(s.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#C678DD\"},children:\"export\"}),l(s.span,{style:{color:\"#C678DD\"},children:\" default\"}),l(s.span,{style:{color:\"#C678DD\"},children:\" async\"}),l(s.span,{style:{color:\"#C678DD\"},children:\" function\"}),l(s.span,{style:{color:\"#61AFEF\"},children:\" UsersPage\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"() {\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#C678DD\"},children:\"    const\"}),l(s.span,{style:{color:\"#E5C07B\"},children:\" queryClient\"}),l(s.span,{style:{color:\"#56B6C2\"},children:\" =\"}),l(s.span,{style:{color:\"#C678DD\"},children:\" new\"}),l(s.span,{style:{color:\"#61AFEF\"},children:\" QueryClient\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"();\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",l(s.span,{\"data-line\":\"\",children:l(s.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"    // 在伺服器端預取資料\"})}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#C678DD\"},children:\"    await\"}),l(s.span,{style:{color:\"#E5C07B\"},children:\" queryClient\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\".\"}),l(s.span,{style:{color:\"#61AFEF\"},children:\"prefetchQuery\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"({\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#E06C75\"},children:\"        queryKey\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\": [\"}),l(s.span,{style:{color:\"#98C379\"},children:\"'users'\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"],\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#E06C75\"},children:\"        queryFn\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\": \"}),l(s.span,{style:{color:\"#E06C75\"},children:\"fetchUsers\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:l(s.span,{style:{color:\"#ABB2BF\"},children:\"    });\"})}),\"\\n\",l(s.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#C678DD\"},children:\"    return\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\" (\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#56B6C2\"},children:\"        <\"}),l(s.span,{style:{color:\"#E06C75\"},children:\"HydrationBoundary\"}),l(s.span,{style:{color:\"#E06C75\"},children:\" state\"}),l(s.span,{style:{color:\"#56B6C2\"},children:\"=\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"{\"}),l(s.span,{style:{color:\"#61AFEF\"},children:\"dehydrate\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),l(s.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"queryClient\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\")}\"}),l(s.span,{style:{color:\"#56B6C2\"},children:\">\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#ABB2BF\"},children:\"            <\"}),l(s.span,{style:{color:\"#E5C07B\"},children:\"div\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\">\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#ABB2BF\"},children:\"                <\"}),l(s.span,{style:{color:\"#E5C07B\"},children:\"h1\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\">\"}),l(s.span,{style:{color:\"#E06C75\"},children:\"用戶列表\"}),l(s.span,{style:{color:\"#56B6C2\"},children:\"</\"}),l(s.span,{style:{color:\"#E06C75\"},children:\"h1\"}),l(s.span,{style:{color:\"#56B6C2\"},children:\">\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#56B6C2\"},children:\"                <\"}),l(s.span,{style:{color:\"#E06C75\"},children:\"UserList\"}),l(s.span,{style:{color:\"#56B6C2\"},children:\" />\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#56B6C2\"},children:\"            </\"}),l(s.span,{style:{color:\"#E06C75\"},children:\"div\"}),l(s.span,{style:{color:\"#56B6C2\"},children:\">\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#56B6C2\"},children:\"        </\"}),l(s.span,{style:{color:\"#E06C75\"},children:\"HydrationBoundary\"}),l(s.span,{style:{color:\"#56B6C2\"},children:\">\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:l(s.span,{style:{color:\"#ABB2BF\"},children:\"    );\"})}),\"\\n\",l(s.span,{\"data-line\":\"\",children:l(s.span,{style:{color:\"#ABB2BF\"},children:\"}\"})})]})})]}),\"\\n\",l(s.h2,{children:\"useMutation：處理資料更新\"}),\"\\n\",l(s.p,{children:\"用來處理新增、修改、刪除等操作：\"}),\"\\n\",n(s.figure,{\"data-rehype-pretty-code-figure\":\"\",children:[l(s.figcaption,{\"data-rehype-pretty-code-title\":\"\",\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",children:\"src/hooks/useCreateUser.ts\"}),l(s.pre,{style:{backgroundColor:\"#282c34\",color:\"#abb2bf\"},tabIndex:\"0\",rawcontent:\"import { useMutation, useQueryClient } from '@tanstack/react-query';\\n\\ninterface CreateUserData {\\n    name: string;\\n    email: string;\\n}\\n\\nasync function createUser(userData: CreateUserData) {\\n    const response = await fetch('/api/users', {\\n        method: 'POST',\\n        headers: { 'Content-Type': 'application/json' },\\n        body: JSON.stringify(userData),\\n    });\\n\\n    if (!response.ok) {\\n        throw new Error('Failed to create user');\\n    }\\n\\n    return response.json();\\n}\\n\\nexport function useCreateUser() {\\n    const queryClient = useQueryClient();\\n\\n    return useMutation({\\n        mutationFn: createUser,\\n        onSuccess: () => {\\n            // 新增成功後，讓用戶列表重新抓取\\n            queryClient.invalidateQueries({ queryKey: ['users'] });\\n        },\\n        onError: (error) => {\\n            console.error('建立用戶失敗:', error);\\n        },\\n    });\\n}\",\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",children:n(s.code,{\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#C678DD\"},children:\"import\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\" { \"}),l(s.span,{style:{color:\"#E06C75\"},children:\"useMutation\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\", \"}),l(s.span,{style:{color:\"#E06C75\"},children:\"useQueryClient\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\" } \"}),l(s.span,{style:{color:\"#C678DD\"},children:\"from\"}),l(s.span,{style:{color:\"#98C379\"},children:\" '@tanstack/react-query'\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#C678DD\"},children:\"interface\"}),l(s.span,{style:{color:\"#E5C07B\"},children:\" CreateUserData\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\" {\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#E06C75\"},children:\"    name\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\": \"}),l(s.span,{style:{color:\"#E5C07B\"},children:\"string\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#E06C75\"},children:\"    email\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\": \"}),l(s.span,{style:{color:\"#E5C07B\"},children:\"string\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:l(s.span,{style:{color:\"#ABB2BF\"},children:\"}\"})}),\"\\n\",l(s.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#C678DD\"},children:\"async\"}),l(s.span,{style:{color:\"#C678DD\"},children:\" function\"}),l(s.span,{style:{color:\"#61AFEF\"},children:\" createUser\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),l(s.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"userData\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\": \"}),l(s.span,{style:{color:\"#E5C07B\"},children:\"CreateUserData\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\") {\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#C678DD\"},children:\"    const\"}),l(s.span,{style:{color:\"#E5C07B\"},children:\" response\"}),l(s.span,{style:{color:\"#56B6C2\"},children:\" =\"}),l(s.span,{style:{color:\"#C678DD\"},children:\" await\"}),l(s.span,{style:{color:\"#61AFEF\"},children:\" fetch\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),l(s.span,{style:{color:\"#98C379\"},children:\"'/api/users'\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\", {\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#E06C75\"},children:\"        method\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\": \"}),l(s.span,{style:{color:\"#98C379\"},children:\"'POST'\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#E06C75\"},children:\"        headers\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\": { \"}),l(s.span,{style:{color:\"#98C379\"},children:\"'Content-Type'\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\": \"}),l(s.span,{style:{color:\"#98C379\"},children:\"'application/json'\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\" },\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#E06C75\"},children:\"        body\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\": \"}),l(s.span,{style:{color:\"#E5C07B\"},children:\"JSON\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\".\"}),l(s.span,{style:{color:\"#61AFEF\"},children:\"stringify\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),l(s.span,{style:{color:\"#E06C75\"},children:\"userData\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"),\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:l(s.span,{style:{color:\"#ABB2BF\"},children:\"    });\"})}),\"\\n\",l(s.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#C678DD\"},children:\"    if\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\" (\"}),l(s.span,{style:{color:\"#56B6C2\"},children:\"!\"}),l(s.span,{style:{color:\"#E5C07B\"},children:\"response\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\".\"}),l(s.span,{style:{color:\"#E06C75\"},children:\"ok\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\") {\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#C678DD\"},children:\"        throw\"}),l(s.span,{style:{color:\"#C678DD\"},children:\" new\"}),l(s.span,{style:{color:\"#61AFEF\"},children:\" Error\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),l(s.span,{style:{color:\"#98C379\"},children:\"'Failed to create user'\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:l(s.span,{style:{color:\"#ABB2BF\"},children:\"    }\"})}),\"\\n\",l(s.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#C678DD\"},children:\"    return\"}),l(s.span,{style:{color:\"#E5C07B\"},children:\" response\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\".\"}),l(s.span,{style:{color:\"#61AFEF\"},children:\"json\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"();\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:l(s.span,{style:{color:\"#ABB2BF\"},children:\"}\"})}),\"\\n\",l(s.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#C678DD\"},children:\"export\"}),l(s.span,{style:{color:\"#C678DD\"},children:\" function\"}),l(s.span,{style:{color:\"#61AFEF\"},children:\" useCreateUser\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"() {\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#C678DD\"},children:\"    const\"}),l(s.span,{style:{color:\"#E5C07B\"},children:\" queryClient\"}),l(s.span,{style:{color:\"#56B6C2\"},children:\" =\"}),l(s.span,{style:{color:\"#61AFEF\"},children:\" useQueryClient\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"();\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#C678DD\"},children:\"    return\"}),l(s.span,{style:{color:\"#61AFEF\"},children:\" useMutation\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"({\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#E06C75\"},children:\"        mutationFn\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\": \"}),l(s.span,{style:{color:\"#E06C75\"},children:\"createUser\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#61AFEF\"},children:\"        onSuccess\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\": () \"}),l(s.span,{style:{color:\"#C678DD\"},children:\"=>\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\" {\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:l(s.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"            // 新增成功後，讓用戶列表重新抓取\"})}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#E5C07B\"},children:\"            queryClient\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\".\"}),l(s.span,{style:{color:\"#61AFEF\"},children:\"invalidateQueries\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"({ \"}),l(s.span,{style:{color:\"#E06C75\"},children:\"queryKey\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\": [\"}),l(s.span,{style:{color:\"#98C379\"},children:\"'users'\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"] });\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:l(s.span,{style:{color:\"#ABB2BF\"},children:\"        },\"})}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#61AFEF\"},children:\"        onError\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\": (\"}),l(s.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"error\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\") \"}),l(s.span,{style:{color:\"#C678DD\"},children:\"=>\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\" {\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#E5C07B\"},children:\"            console\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\".\"}),l(s.span,{style:{color:\"#61AFEF\"},children:\"error\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),l(s.span,{style:{color:\"#98C379\"},children:\"'建立用戶失敗:'\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\", \"}),l(s.span,{style:{color:\"#E06C75\"},children:\"error\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:l(s.span,{style:{color:\"#ABB2BF\"},children:\"        },\"})}),\"\\n\",l(s.span,{\"data-line\":\"\",children:l(s.span,{style:{color:\"#ABB2BF\"},children:\"    });\"})}),\"\\n\",l(s.span,{\"data-line\":\"\",children:l(s.span,{style:{color:\"#ABB2BF\"},children:\"}\"})})]})})]}),\"\\n\",l(s.p,{children:\"在元件中使用：\"}),\"\\n\",n(s.figure,{\"data-rehype-pretty-code-figure\":\"\",children:[l(s.figcaption,{\"data-rehype-pretty-code-title\":\"\",\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",children:\"src/components/CreateUserForm.tsx\"}),l(s.pre,{style:{backgroundColor:\"#282c34\",color:\"#abb2bf\"},tabIndex:\"0\",rawcontent:\"import { useState } from 'react';\\nimport { useCreateUser } from '@/hooks/useCreateUser';\\n\\nexport default function CreateUserForm() {\\n    const [name, setName] = useState('');\\n    const [email, setEmail] = useState('');\\n\\n    const createUserMutation = useCreateUser();\\n\\n    const handleSubmit = (e: React.FormEvent) => {\\n        e.preventDefault();\\n        createUserMutation.mutate({ name, email });\\n    };\\n\\n    return (\\n        <form onSubmit={handleSubmit}>\\n            <input\\n                value={name}\\n                onChange={(e) => setName(e.target.value)}\\n                placeholder=\\\"姓名\\\"\\n                required\\n            />\\n            <input\\n                type=\\\"email\\\"\\n                value={email}\\n                onChange={(e) => setEmail(e.target.value)}\\n                placeholder=\\\"Email\\\"\\n                required\\n            />\\n            <button\\n                type=\\\"submit\\\"\\n                disabled={createUserMutation.isPending}\\n            >\\n                {createUserMutation.isPending ? '建立中...' : '建立用戶'}\\n            </button>\\n        </form>\\n    );\\n}\",\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",children:n(s.code,{\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#C678DD\"},children:\"import\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\" { \"}),l(s.span,{style:{color:\"#E06C75\"},children:\"useState\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\" } \"}),l(s.span,{style:{color:\"#C678DD\"},children:\"from\"}),l(s.span,{style:{color:\"#98C379\"},children:\" 'react'\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#C678DD\"},children:\"import\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\" { \"}),l(s.span,{style:{color:\"#E06C75\"},children:\"useCreateUser\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\" } \"}),l(s.span,{style:{color:\"#C678DD\"},children:\"from\"}),l(s.span,{style:{color:\"#98C379\"},children:\" '@/hooks/useCreateUser'\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#C678DD\"},children:\"export\"}),l(s.span,{style:{color:\"#C678DD\"},children:\" default\"}),l(s.span,{style:{color:\"#C678DD\"},children:\" function\"}),l(s.span,{style:{color:\"#61AFEF\"},children:\" CreateUserForm\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"() {\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#C678DD\"},children:\"    const\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\" [\"}),l(s.span,{style:{color:\"#E5C07B\"},children:\"name\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\", \"}),l(s.span,{style:{color:\"#E5C07B\"},children:\"setName\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"] \"}),l(s.span,{style:{color:\"#56B6C2\"},children:\"=\"}),l(s.span,{style:{color:\"#61AFEF\"},children:\" useState\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),l(s.span,{style:{color:\"#98C379\"},children:\"''\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#C678DD\"},children:\"    const\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\" [\"}),l(s.span,{style:{color:\"#E5C07B\"},children:\"email\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\", \"}),l(s.span,{style:{color:\"#E5C07B\"},children:\"setEmail\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"] \"}),l(s.span,{style:{color:\"#56B6C2\"},children:\"=\"}),l(s.span,{style:{color:\"#61AFEF\"},children:\" useState\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),l(s.span,{style:{color:\"#98C379\"},children:\"''\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#C678DD\"},children:\"    const\"}),l(s.span,{style:{color:\"#E5C07B\"},children:\" createUserMutation\"}),l(s.span,{style:{color:\"#56B6C2\"},children:\" =\"}),l(s.span,{style:{color:\"#61AFEF\"},children:\" useCreateUser\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"();\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#C678DD\"},children:\"    const\"}),l(s.span,{style:{color:\"#61AFEF\"},children:\" handleSubmit\"}),l(s.span,{style:{color:\"#56B6C2\"},children:\" =\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\" (\"}),l(s.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"e\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\": \"}),l(s.span,{style:{color:\"#E5C07B\"},children:\"React\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\".\"}),l(s.span,{style:{color:\"#E5C07B\"},children:\"FormEvent\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\") \"}),l(s.span,{style:{color:\"#C678DD\"},children:\"=>\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\" {\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#E5C07B\"},children:\"        e\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\".\"}),l(s.span,{style:{color:\"#61AFEF\"},children:\"preventDefault\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"();\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#E5C07B\"},children:\"        createUserMutation\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\".\"}),l(s.span,{style:{color:\"#61AFEF\"},children:\"mutate\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"({ \"}),l(s.span,{style:{color:\"#E06C75\"},children:\"name\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\", \"}),l(s.span,{style:{color:\"#E06C75\"},children:\"email\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\" });\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:l(s.span,{style:{color:\"#ABB2BF\"},children:\"    };\"})}),\"\\n\",l(s.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#C678DD\"},children:\"    return\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\" (\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#56B6C2\"},children:\"        <\"}),l(s.span,{style:{color:\"#E06C75\"},children:\"form\"}),l(s.span,{style:{color:\"#E06C75\"},children:\" onSubmit\"}),l(s.span,{style:{color:\"#56B6C2\"},children:\"=\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"{\"}),l(s.span,{style:{color:\"#E06C75\"},children:\"handleSubmit\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"}\"}),l(s.span,{style:{color:\"#56B6C2\"},children:\">\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#56B6C2\"},children:\"            <\"}),l(s.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"input\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#E06C75\"},children:\"                value\"}),l(s.span,{style:{color:\"#56B6C2\"},children:\"=\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"{\"}),l(s.span,{style:{color:\"#E06C75\"},children:\"name\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"}\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#E06C75\"},children:\"                onChange\"}),l(s.span,{style:{color:\"#56B6C2\"},children:\"=\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"{(e) => \"}),l(s.span,{style:{color:\"#61AFEF\"},children:\"setName\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"(e.target.value)}\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#E06C75\"},children:\"                placeholder\"}),l(s.span,{style:{color:\"#56B6C2\"},children:\"=\"}),l(s.span,{style:{color:\"#98C379\"},children:'\"姓名\"'})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:l(s.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"                required\"})}),\"\\n\",l(s.span,{\"data-line\":\"\",children:l(s.span,{style:{color:\"#56B6C2\"},children:\"            />\"})}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#56B6C2\"},children:\"            <\"}),l(s.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"input\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#E06C75\"},children:\"                type\"}),l(s.span,{style:{color:\"#56B6C2\"},children:\"=\"}),l(s.span,{style:{color:\"#98C379\"},children:'\"email\"'})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#E06C75\"},children:\"                value\"}),l(s.span,{style:{color:\"#56B6C2\"},children:\"=\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"{\"}),l(s.span,{style:{color:\"#E06C75\"},children:\"email\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"}\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#E06C75\"},children:\"                onChange\"}),l(s.span,{style:{color:\"#56B6C2\"},children:\"=\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"{(e) => \"}),l(s.span,{style:{color:\"#61AFEF\"},children:\"setEmail\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"(e.target.value)}\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#E06C75\"},children:\"                placeholder\"}),l(s.span,{style:{color:\"#56B6C2\"},children:\"=\"}),l(s.span,{style:{color:\"#98C379\"},children:'\"Email\"'})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:l(s.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"                required\"})}),\"\\n\",l(s.span,{\"data-line\":\"\",children:l(s.span,{style:{color:\"#56B6C2\"},children:\"            />\"})}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#56B6C2\"},children:\"            <\"}),l(s.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"button\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#E06C75\"},children:\"                type\"}),l(s.span,{style:{color:\"#56B6C2\"},children:\"=\"}),l(s.span,{style:{color:\"#98C379\"},children:'\"submit\"'})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#E06C75\"},children:\"                disabled\"}),l(s.span,{style:{color:\"#56B6C2\"},children:\"=\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"{createUserMutation.\"}),l(s.span,{style:{color:\"#E06C75\"},children:\"isPending\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"}\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:l(s.span,{style:{color:\"#56B6C2\"},children:\"            >\"})}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#ABB2BF\"},children:\"                {\"}),l(s.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"createUserMutation\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\".\"}),l(s.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"isPending\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\" ? \"}),l(s.span,{style:{color:\"#98C379\"},children:\"'建立中...'\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\" : \"}),l(s.span,{style:{color:\"#98C379\"},children:\"'建立用戶'\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"}\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#56B6C2\"},children:\"            </\"}),l(s.span,{style:{color:\"#E06C75\"},children:\"button\"}),l(s.span,{style:{color:\"#56B6C2\"},children:\">\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#56B6C2\"},children:\"        </\"}),l(s.span,{style:{color:\"#E06C75\"},children:\"form\"}),l(s.span,{style:{color:\"#56B6C2\"},children:\">\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:l(s.span,{style:{color:\"#ABB2BF\"},children:\"    );\"})}),\"\\n\",l(s.span,{\"data-line\":\"\",children:l(s.span,{style:{color:\"#ABB2BF\"},children:\"}\"})})]})})]}),\"\\n\",l(s.h2,{children:\"staleTime vs gcTime：我一直搞混的概念\"}),\"\\n\",l(s.p,{children:\"這兩個參數我一開始總是搞不清楚：\"}),\"\\n\",l(s.h3,{children:\"staleTime（過期時間）\"}),\"\\n\",l(s.p,{children:\"資料被認為是「新鮮」的時間。在這段時間內，不會重新抓取資料。\"}),\"\\n\",l(s.h3,{children:\"gcTime（垃圾回收時間，以前叫 cacheTime）\"}),\"\\n\",l(s.p,{children:\"快取資料會保存多久。超過這個時間，資料會被從記憶體中清除。\"}),\"\\n\",l(s.figure,{\"data-rehype-pretty-code-figure\":\"\",children:l(s.pre,{style:{backgroundColor:\"#282c34\",color:\"#abb2bf\"},tabIndex:\"0\",rawcontent:\"useQuery({\\n    queryKey: ['users'],\\n    queryFn: fetchUsers,\\n    staleTime: 5 * 60 * 1000, // 5 分鐘內資料是新鮮的\\n    gcTime: 30 * 60 * 1000, // 30 分鐘後清除快取\\n});\",\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",children:n(s.code,{\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#61AFEF\"},children:\"useQuery\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"({\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#E06C75\"},children:\"    queryKey\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\": [\"}),l(s.span,{style:{color:\"#98C379\"},children:\"'users'\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"],\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#E06C75\"},children:\"    queryFn\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\": \"}),l(s.span,{style:{color:\"#E06C75\"},children:\"fetchUsers\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#E06C75\"},children:\"    staleTime\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\": \"}),l(s.span,{style:{color:\"#D19A66\"},children:\"5\"}),l(s.span,{style:{color:\"#56B6C2\"},children:\" *\"}),l(s.span,{style:{color:\"#D19A66\"},children:\" 60\"}),l(s.span,{style:{color:\"#56B6C2\"},children:\" *\"}),l(s.span,{style:{color:\"#D19A66\"},children:\" 1000\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\", \"}),l(s.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// 5 分鐘內資料是新鮮的\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#E06C75\"},children:\"    gcTime\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\": \"}),l(s.span,{style:{color:\"#D19A66\"},children:\"30\"}),l(s.span,{style:{color:\"#56B6C2\"},children:\" *\"}),l(s.span,{style:{color:\"#D19A66\"},children:\" 60\"}),l(s.span,{style:{color:\"#56B6C2\"},children:\" *\"}),l(s.span,{style:{color:\"#D19A66\"},children:\" 1000\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\", \"}),l(s.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// 30 分鐘後清除快取\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:l(s.span,{style:{color:\"#ABB2BF\"},children:\"});\"})})]})})}),\"\\n\",l(s.p,{children:\"我的建議：\"}),\"\\n\",n(s.ul,{children:[\"\\n\",n(s.li,{children:[l(s.strong,{children:\"staleTime\"}),\"：根據資料更新頻率設定（使用者資料可能設 5 分鐘）\"]}),\"\\n\",n(s.li,{children:[l(s.strong,{children:\"gcTime\"}),\"：通常設定比 staleTime 長一點\"]}),\"\\n\"]}),\"\\n\",l(s.h2,{children:\"實戰技巧分享\"}),\"\\n\",l(s.h3,{children:\"1. 條件性查詢\"}),\"\\n\",l(s.p,{children:\"有時候你需要在某些條件滿足時才抓取資料：\"}),\"\\n\",l(s.figure,{\"data-rehype-pretty-code-figure\":\"\",children:l(s.pre,{style:{backgroundColor:\"#282c34\",color:\"#abb2bf\"},tabIndex:\"0\",rawcontent:\"function useUserProfile(userId?: number) {\\n    return useQuery({\\n        queryKey: ['user', userId],\\n        queryFn: () => fetchUser(userId!),\\n        enabled: !!userId, // 只有當 userId 存在時才執行\\n    });\\n}\",\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",children:n(s.code,{\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#C678DD\"},children:\"function\"}),l(s.span,{style:{color:\"#61AFEF\"},children:\" useUserProfile\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),l(s.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"userId\"}),l(s.span,{style:{color:\"#C678DD\"},children:\"?\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\": \"}),l(s.span,{style:{color:\"#E5C07B\"},children:\"number\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\") {\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#C678DD\"},children:\"    return\"}),l(s.span,{style:{color:\"#61AFEF\"},children:\" useQuery\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"({\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#E06C75\"},children:\"        queryKey\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\": [\"}),l(s.span,{style:{color:\"#98C379\"},children:\"'user'\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\", \"}),l(s.span,{style:{color:\"#E06C75\"},children:\"userId\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"],\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#61AFEF\"},children:\"        queryFn\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\": () \"}),l(s.span,{style:{color:\"#C678DD\"},children:\"=>\"}),l(s.span,{style:{color:\"#61AFEF\"},children:\" fetchUser\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),l(s.span,{style:{color:\"#E06C75\"},children:\"userId\"}),l(s.span,{style:{color:\"#56B6C2\"},children:\"!\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"),\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#E06C75\"},children:\"        enabled\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\": \"}),l(s.span,{style:{color:\"#56B6C2\"},children:\"!!\"}),l(s.span,{style:{color:\"#E06C75\"},children:\"userId\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\", \"}),l(s.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// 只有當 userId 存在時才執行\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:l(s.span,{style:{color:\"#ABB2BF\"},children:\"    });\"})}),\"\\n\",l(s.span,{\"data-line\":\"\",children:l(s.span,{style:{color:\"#ABB2BF\"},children:\"}\"})})]})})}),\"\\n\",l(s.h3,{children:\"2. 分頁查詢\"}),\"\\n\",l(s.figure,{\"data-rehype-pretty-code-figure\":\"\",children:l(s.pre,{style:{backgroundColor:\"#282c34\",color:\"#abb2bf\"},tabIndex:\"0\",rawcontent:\"function useUsers(page: number = 1) {\\n    return useQuery({\\n        queryKey: ['users', page],\\n        queryFn: () => fetchUsers(page),\\n        keepPreviousData: true, // 切換頁面時保留前一頁資料\\n    });\\n}\",\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",children:n(s.code,{\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#C678DD\"},children:\"function\"}),l(s.span,{style:{color:\"#61AFEF\"},children:\" useUsers\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),l(s.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"page\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\": \"}),l(s.span,{style:{color:\"#E5C07B\"},children:\"number\"}),l(s.span,{style:{color:\"#56B6C2\"},children:\" =\"}),l(s.span,{style:{color:\"#D19A66\"},children:\" 1\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\") {\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#C678DD\"},children:\"    return\"}),l(s.span,{style:{color:\"#61AFEF\"},children:\" useQuery\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"({\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#E06C75\"},children:\"        queryKey\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\": [\"}),l(s.span,{style:{color:\"#98C379\"},children:\"'users'\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\", \"}),l(s.span,{style:{color:\"#E06C75\"},children:\"page\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"],\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#61AFEF\"},children:\"        queryFn\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\": () \"}),l(s.span,{style:{color:\"#C678DD\"},children:\"=>\"}),l(s.span,{style:{color:\"#61AFEF\"},children:\" fetchUsers\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),l(s.span,{style:{color:\"#E06C75\"},children:\"page\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"),\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#E06C75\"},children:\"        keepPreviousData\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\": \"}),l(s.span,{style:{color:\"#D19A66\"},children:\"true\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\", \"}),l(s.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// 切換頁面時保留前一頁資料\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:l(s.span,{style:{color:\"#ABB2BF\"},children:\"    });\"})}),\"\\n\",l(s.span,{\"data-line\":\"\",children:l(s.span,{style:{color:\"#ABB2BF\"},children:\"}\"})})]})})}),\"\\n\",l(s.h3,{children:\"3. 樂觀更新\"}),\"\\n\",l(s.p,{children:\"先更新 UI，API 失敗再回復：\"}),\"\\n\",l(s.figure,{\"data-rehype-pretty-code-figure\":\"\",children:l(s.pre,{style:{backgroundColor:\"#282c34\",color:\"#abb2bf\"},tabIndex:\"0\",rawcontent:\"const updateUserMutation = useMutation({\\n    mutationFn: updateUser,\\n    onMutate: async (newUser) => {\\n        // 取消進行中的查詢\\n        await queryClient.cancelQueries({ queryKey: ['users'] });\\n\\n        // 先更新快取\\n        const previousUsers = queryClient.getQueryData(['users']);\\n        queryClient.setQueryData(['users'], (old: User[]) =>\\n            old.map((user) => (user.id === newUser.id ? newUser : user))\\n        );\\n\\n        return { previousUsers };\\n    },\\n    onError: (err, newUser, context) => {\\n        // 失敗時回復\\n        queryClient.setQueryData(['users'], context?.previousUsers);\\n    },\\n    onSettled: () => {\\n        // 不管成功失敗都重新抓取\\n        queryClient.invalidateQueries({ queryKey: ['users'] });\\n    },\\n});\",\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",children:n(s.code,{\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#C678DD\"},children:\"const\"}),l(s.span,{style:{color:\"#E5C07B\"},children:\" updateUserMutation\"}),l(s.span,{style:{color:\"#56B6C2\"},children:\" =\"}),l(s.span,{style:{color:\"#61AFEF\"},children:\" useMutation\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"({\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#E06C75\"},children:\"    mutationFn\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\": \"}),l(s.span,{style:{color:\"#E06C75\"},children:\"updateUser\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#61AFEF\"},children:\"    onMutate\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\": \"}),l(s.span,{style:{color:\"#C678DD\"},children:\"async\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\" (\"}),l(s.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"newUser\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\") \"}),l(s.span,{style:{color:\"#C678DD\"},children:\"=>\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\" {\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:l(s.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"        // 取消進行中的查詢\"})}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#C678DD\"},children:\"        await\"}),l(s.span,{style:{color:\"#E5C07B\"},children:\" queryClient\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\".\"}),l(s.span,{style:{color:\"#61AFEF\"},children:\"cancelQueries\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"({ \"}),l(s.span,{style:{color:\"#E06C75\"},children:\"queryKey\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\": [\"}),l(s.span,{style:{color:\"#98C379\"},children:\"'users'\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"] });\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",l(s.span,{\"data-line\":\"\",children:l(s.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"        // 先更新快取\"})}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#C678DD\"},children:\"        const\"}),l(s.span,{style:{color:\"#E5C07B\"},children:\" previousUsers\"}),l(s.span,{style:{color:\"#56B6C2\"},children:\" =\"}),l(s.span,{style:{color:\"#E5C07B\"},children:\" queryClient\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\".\"}),l(s.span,{style:{color:\"#61AFEF\"},children:\"getQueryData\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"([\"}),l(s.span,{style:{color:\"#98C379\"},children:\"'users'\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"]);\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#E5C07B\"},children:\"        queryClient\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\".\"}),l(s.span,{style:{color:\"#61AFEF\"},children:\"setQueryData\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"([\"}),l(s.span,{style:{color:\"#98C379\"},children:\"'users'\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"], (\"}),l(s.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"old\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\": \"}),l(s.span,{style:{color:\"#E5C07B\"},children:\"User\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"[]) \"}),l(s.span,{style:{color:\"#C678DD\"},children:\"=>\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#E5C07B\"},children:\"            old\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\".\"}),l(s.span,{style:{color:\"#61AFEF\"},children:\"map\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"((\"}),l(s.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"user\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\") \"}),l(s.span,{style:{color:\"#C678DD\"},children:\"=>\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\" (\"}),l(s.span,{style:{color:\"#E5C07B\"},children:\"user\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\".\"}),l(s.span,{style:{color:\"#E06C75\"},children:\"id\"}),l(s.span,{style:{color:\"#56B6C2\"},children:\" ===\"}),l(s.span,{style:{color:\"#E5C07B\"},children:\" newUser\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\".\"}),l(s.span,{style:{color:\"#E06C75\"},children:\"id\"}),l(s.span,{style:{color:\"#C678DD\"},children:\" ?\"}),l(s.span,{style:{color:\"#E06C75\"},children:\" newUser\"}),l(s.span,{style:{color:\"#C678DD\"},children:\" :\"}),l(s.span,{style:{color:\"#E06C75\"},children:\" user\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"))\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:l(s.span,{style:{color:\"#ABB2BF\"},children:\"        );\"})}),\"\\n\",l(s.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#C678DD\"},children:\"        return\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\" { \"}),l(s.span,{style:{color:\"#E06C75\"},children:\"previousUsers\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\" };\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:l(s.span,{style:{color:\"#ABB2BF\"},children:\"    },\"})}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#61AFEF\"},children:\"    onError\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\": (\"}),l(s.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"err\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\", \"}),l(s.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"newUser\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\", \"}),l(s.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"context\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\") \"}),l(s.span,{style:{color:\"#C678DD\"},children:\"=>\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\" {\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:l(s.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"        // 失敗時回復\"})}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#E5C07B\"},children:\"        queryClient\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\".\"}),l(s.span,{style:{color:\"#61AFEF\"},children:\"setQueryData\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"([\"}),l(s.span,{style:{color:\"#98C379\"},children:\"'users'\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"], \"}),l(s.span,{style:{color:\"#E5C07B\"},children:\"context\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"?.\"}),l(s.span,{style:{color:\"#E06C75\"},children:\"previousUsers\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:l(s.span,{style:{color:\"#ABB2BF\"},children:\"    },\"})}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#61AFEF\"},children:\"    onSettled\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\": () \"}),l(s.span,{style:{color:\"#C678DD\"},children:\"=>\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\" {\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:l(s.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"        // 不管成功失敗都重新抓取\"})}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#E5C07B\"},children:\"        queryClient\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\".\"}),l(s.span,{style:{color:\"#61AFEF\"},children:\"invalidateQueries\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"({ \"}),l(s.span,{style:{color:\"#E06C75\"},children:\"queryKey\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\": [\"}),l(s.span,{style:{color:\"#98C379\"},children:\"'users'\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"] });\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:l(s.span,{style:{color:\"#ABB2BF\"},children:\"    },\"})}),\"\\n\",l(s.span,{\"data-line\":\"\",children:l(s.span,{style:{color:\"#ABB2BF\"},children:\"});\"})})]})})}),\"\\n\",l(s.h2,{children:\"效能優化建議\"}),\"\\n\",l(s.h3,{children:\"1. 適當設定 staleTime\"}),\"\\n\",l(s.figure,{\"data-rehype-pretty-code-figure\":\"\",children:l(s.pre,{style:{backgroundColor:\"#282c34\",color:\"#abb2bf\"},tabIndex:\"0\",rawcontent:\"// 很少變動的資料\\nconst { data } = useQuery({\\n    queryKey: ['config'],\\n    queryFn: fetchConfig,\\n    staleTime: 30 * 60 * 1000, // 30 分鐘\\n});\\n\\n// 經常變動的資料\\nconst { data } = useQuery({\\n    queryKey: ['notifications'],\\n    queryFn: fetchNotifications,\\n    staleTime: 30 * 1000, // 30 秒\\n});\",\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",children:n(s.code,{\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[l(s.span,{\"data-line\":\"\",children:l(s.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// 很少變動的資料\"})}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#C678DD\"},children:\"const\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\" { \"}),l(s.span,{style:{color:\"#E5C07B\"},children:\"data\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\" } \"}),l(s.span,{style:{color:\"#56B6C2\"},children:\"=\"}),l(s.span,{style:{color:\"#61AFEF\"},children:\" useQuery\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"({\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#E06C75\"},children:\"    queryKey\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\": [\"}),l(s.span,{style:{color:\"#98C379\"},children:\"'config'\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"],\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#E06C75\"},children:\"    queryFn\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\": \"}),l(s.span,{style:{color:\"#E06C75\"},children:\"fetchConfig\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#E06C75\"},children:\"    staleTime\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\": \"}),l(s.span,{style:{color:\"#D19A66\"},children:\"30\"}),l(s.span,{style:{color:\"#56B6C2\"},children:\" *\"}),l(s.span,{style:{color:\"#D19A66\"},children:\" 60\"}),l(s.span,{style:{color:\"#56B6C2\"},children:\" *\"}),l(s.span,{style:{color:\"#D19A66\"},children:\" 1000\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\", \"}),l(s.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// 30 分鐘\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:l(s.span,{style:{color:\"#ABB2BF\"},children:\"});\"})}),\"\\n\",l(s.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",l(s.span,{\"data-line\":\"\",children:l(s.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// 經常變動的資料\"})}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#C678DD\"},children:\"const\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\" { \"}),l(s.span,{style:{color:\"#E5C07B\"},children:\"data\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\" } \"}),l(s.span,{style:{color:\"#56B6C2\"},children:\"=\"}),l(s.span,{style:{color:\"#61AFEF\"},children:\" useQuery\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"({\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#E06C75\"},children:\"    queryKey\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\": [\"}),l(s.span,{style:{color:\"#98C379\"},children:\"'notifications'\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"],\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#E06C75\"},children:\"    queryFn\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\": \"}),l(s.span,{style:{color:\"#E06C75\"},children:\"fetchNotifications\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#E06C75\"},children:\"    staleTime\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\": \"}),l(s.span,{style:{color:\"#D19A66\"},children:\"30\"}),l(s.span,{style:{color:\"#56B6C2\"},children:\" *\"}),l(s.span,{style:{color:\"#D19A66\"},children:\" 1000\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\", \"}),l(s.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// 30 秒\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:l(s.span,{style:{color:\"#ABB2BF\"},children:\"});\"})})]})})}),\"\\n\",l(s.h3,{children:\"2. 使用 select 減少重新渲染\"}),\"\\n\",l(s.figure,{\"data-rehype-pretty-code-figure\":\"\",children:l(s.pre,{style:{backgroundColor:\"#282c34\",color:\"#abb2bf\"},tabIndex:\"0\",rawcontent:\"const { data: userNames } = useQuery({\\n    queryKey: ['users'],\\n    queryFn: fetchUsers,\\n    select: (users) => users.map((user) => user.name), // 只關心名字\\n});\",\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",children:n(s.code,{\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#C678DD\"},children:\"const\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\" { \"}),l(s.span,{style:{color:\"#E06C75\"},children:\"data\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\": \"}),l(s.span,{style:{color:\"#E5C07B\"},children:\"userNames\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\" } \"}),l(s.span,{style:{color:\"#56B6C2\"},children:\"=\"}),l(s.span,{style:{color:\"#61AFEF\"},children:\" useQuery\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"({\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#E06C75\"},children:\"    queryKey\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\": [\"}),l(s.span,{style:{color:\"#98C379\"},children:\"'users'\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"],\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#E06C75\"},children:\"    queryFn\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\": \"}),l(s.span,{style:{color:\"#E06C75\"},children:\"fetchUsers\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:[l(s.span,{style:{color:\"#61AFEF\"},children:\"    select\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\": (\"}),l(s.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"users\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\") \"}),l(s.span,{style:{color:\"#C678DD\"},children:\"=>\"}),l(s.span,{style:{color:\"#E5C07B\"},children:\" users\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\".\"}),l(s.span,{style:{color:\"#61AFEF\"},children:\"map\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"((\"}),l(s.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"user\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\") \"}),l(s.span,{style:{color:\"#C678DD\"},children:\"=>\"}),l(s.span,{style:{color:\"#E5C07B\"},children:\" user\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\".\"}),l(s.span,{style:{color:\"#E06C75\"},children:\"name\"}),l(s.span,{style:{color:\"#ABB2BF\"},children:\"), \"}),l(s.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// 只關心名字\"})]}),\"\\n\",l(s.span,{\"data-line\":\"\",children:l(s.span,{style:{color:\"#ABB2BF\"},children:\"});\"})})]})})}),\"\\n\",l(s.h3,{children:\"3. 分割大查詢\"}),\"\\n\",l(s.p,{children:\"不要一次抓太多資料，可以分成多個小查詢。\"})]})}return{default:function(e={}){const{wrapper:n}=e.components||{};return n?l(n,{...e,children:l(_createMdxContent,{...e})}):_createMdxContent(e)}};",
    "permalink": "/blog/posts/react-query-practical-guide-nextjs-reactjs"
  },
  {
    "title": "算法複雜度入門 - 讓新手也能了解 Big O",
    "date": "2025-03-06T00:00:00.000Z",
    "description": "本文旨在系統性地介紹算法複雜度概念，透過實際例子和ss程式碼範例，幫助初學者理解Big O記法。內容涵蓋常見的時間複雜度類型、實際應用場景以及優化技巧，適合作為學習LeetCode的基礎知識筆記。",
    "rawContent": "> **備註：本文內容由AI生成，僅供學習參考使用。**\r\n\r\n## 算法複雜度的重要性\r\n\r\n在程式設計領域中，算法複雜度是評估程式效能的核心概念。對於初學者而言，Big O記法（Big O Notation）可能顯得抽象且難以理解。然而，掌握此概念對於解決LeetCode題目以及實際開發工作都具有重要意義。\r\n\r\n本文將透過系統性的方式，結合實際例子和程式碼範例，幫助讀者建立對算法複雜度的清晰認知。\r\n\r\n## 算法複雜度的基本概念\r\n\r\n算法複雜度主要用於描述當輸入資料量增加時，算法執行時間或空間需求的增長趨勢。Big O記法提供了一種標準化的方式來表達這種增長關係。\r\n\r\n### O(1) - 常數時間複雜度\r\n\r\n常數時間複雜度表示算法的執行時間與輸入資料量無關，無論資料量如何變化，執行時間都保持恆定。\r\n\r\n**實際例子：** 從冰箱中取出特定飲料\r\n無論冰箱內存放5瓶或50瓶飲料，取出單一瓶飲料的時間都是相同的。\r\n\r\n```javascript\r\n// 陣列索引存取為O(1)複雜度\r\nfunction getArrayElement(arr, index) {\r\n    return arr[index]; // 執行時間與陣列大小無關\r\n}\r\n```\r\n\r\n### O(n) - 線性時間複雜度\r\n\r\n線性時間複雜度表示算法的執行時間與輸入資料量成正比關係。\r\n\r\n**實際例子：** 班級點名程序\r\n若班級有10名學生，則需要進行10次點名；若有100名學生，則需要進行100次點名。執行時間與學生人數成正比。\r\n\r\n```javascript\r\n// 線性搜尋為O(n)複雜度\r\nfunction linearSearch(arr, target) {\r\n    for (let i = 0; i < arr.length; i++) {\r\n        if (arr[i] === target) {\r\n            return i;\r\n        }\r\n    }\r\n    return -1;\r\n}\r\n```\r\n\r\n### O(n²) - 平方時間複雜度\r\n\r\n平方時間複雜度表示算法的執行時間與輸入資料量的平方成正比，當資料量增加時，執行時間會急劇增長。\r\n\r\n**實際例子：** 班級成員相互握手\r\n假設班級有10名學生，每位學生需要與其他所有學生握手一次，總共需要進行45次握手。若學生人數增加到20人，則需要進行190次握手。人數增加一倍，握手次數增加四倍。\r\n\r\n```javascript\r\n// 泡沫排序為O(n²)複雜度\r\nfunction bubbleSort(arr) {\r\n    for (let i = 0; i < arr.length; i++) {\r\n        for (let j = 0; j < arr.length - 1; j++) {\r\n            if (arr[j] > arr[j + 1]) {\r\n                [arr[j], arr[j + 1]] = [arr[j + 1], arr[j]];\r\n            }\r\n        }\r\n    }\r\n    return arr;\r\n}\r\n```\r\n\r\n### O(log n) - 對數時間複雜度\r\n\r\n對數時間複雜度表示算法的執行時間與輸入資料量的對數成正比，當資料量增加時，執行時間增長相對緩慢。\r\n\r\n**實際例子：** 二分猜數字遊戲\r\n假設需要猜測1到100之間的數字，每次猜測後會得到「太大」或「太小」的提示。採用二分搜尋策略：\r\n\r\n- 第一次猜測50\r\n- 若太大，下次猜測25\r\n- 若太小，下次猜測75\r\n\r\n此策略最多需要7次猜測即可找到答案（因為2⁷ = 128 > 100）。\r\n\r\n```javascript\r\n// 二分搜尋為O(log n)複雜度\r\nfunction binarySearch(arr, target) {\r\n    let left = 0;\r\n    let right = arr.length - 1;\r\n\r\n    while (left <= right) {\r\n        let mid = Math.floor((left + right) / 2);\r\n\r\n        if (arr[mid] === target) {\r\n            return mid;\r\n        } else if (arr[mid] < target) {\r\n            left = mid + 1;\r\n        } else {\r\n            right = mid - 1;\r\n        }\r\n    }\r\n\r\n    return -1;\r\n}\r\n```\r\n\r\n## 實際開發中的應用案例\r\n\r\n### 案例一：用戶搜尋功能優化\r\n\r\n在開發用戶搜尋功能時，初始實現可能採用簡單的線性搜尋：\r\n\r\n```javascript\r\n// 初始實現 - O(n)複雜度\r\nfunction searchUsers(users, keyword) {\r\n    return users.filter((user) => user.name.toLowerCase().includes(keyword.toLowerCase()));\r\n}\r\n```\r\n\r\n當用戶數量達到10萬時，每次搜尋操作可能需要數秒鐘的執行時間。透過引入索引結構和更高效的搜尋算法，可以顯著提升搜尋效能。\r\n\r\n### 案例二：重複資料檢測優化\r\n\r\n檢測陣列中是否存在重複元素的初始實現：\r\n\r\n```javascript\r\n// 效能較差的實現 - O(n²)複雜度\r\nfunction hasDuplicates(arr) {\r\n    for (let i = 0; i < arr.length; i++) {\r\n        for (let j = i + 1; j < arr.length; j++) {\r\n            if (arr[i] === arr[j]) {\r\n                return true;\r\n            }\r\n        }\r\n    }\r\n    return false;\r\n}\r\n```\r\n\r\n優化後的實現：\r\n\r\n```javascript\r\n// 優化實現 - O(n)複雜度\r\nfunction hasDuplicates(arr) {\r\n    return new Set(arr).size !== arr.length;\r\n}\r\n```\r\n\r\n此優化將時間複雜度從O(n²)降低至O(n)，在處理大量資料時效能提升顯著。\r\n\r\n## 常見複雜度比較表\r\n\r\n| 複雜度     | 10筆資料 | 100筆資料 | 1000筆資料 | 實際應用     |\r\n| ---------- | -------- | --------- | ---------- | ------------ |\r\n| O(1)       | 1        | 1         | 1          | 陣列索引存取 |\r\n| O(log n)   | 3        | 7         | 10         | 二分搜尋     |\r\n| O(n)       | 10       | 100       | 1000       | 線性搜尋     |\r\n| O(n log n) | 33       | 664       | 9966       | 快速排序     |\r\n| O(n²)      | 100      | 10000     | 1000000    | 泡沫排序     |\r\n\r\n從表格可以看出，當資料量增加時，O(n²)算法的執行次數呈現指數級增長，這在實際應用中是不可接受的。\r\n\r\n## 空間複雜度考量\r\n\r\n除了時間複雜度，空間複雜度也是算法分析的重要面向：\r\n\r\n```javascript\r\n// 空間複雜度O(1) - 僅使用固定數量的變數\r\nfunction calculateSum(arr) {\r\n    let total = 0;\r\n    for (let num of arr) {\r\n        total += num;\r\n    }\r\n    return total;\r\n}\r\n\r\n// 空間複雜度O(n) - 建立新的陣列\r\nfunction duplicateArray(arr) {\r\n    return arr.map((x) => x * 2); // 建立與原陣列相同大小的新陣列\r\n}\r\n```\r\n\r\n在實際開發中，需要在時間複雜度和空間複雜度之間取得平衡，根據具體需求選擇合適的算法。\r\n\r\n## 算法優化實務技巧\r\n\r\n### 1. 避免巢狀迴圈結構\r\n\r\n```javascript\r\n// 效能較差的實現 - O(n²)複雜度\r\nfunction findCommonElements(arr1, arr2) {\r\n    const result = [];\r\n    for (let i = 0; i < arr1.length; i++) {\r\n        for (let j = 0; j < arr2.length; j++) {\r\n            if (arr1[i] === arr2[j]) {\r\n                result.push(arr1[i]);\r\n            }\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\n// 優化實現 - O(n + m)複雜度\r\nfunction findCommonElements(arr1, arr2) {\r\n    const set2 = new Set(arr2);\r\n    return arr1.filter(item => set2.has(item));\r\n}\r\n```\r\n\r\n### 2. 善用語言內建優化方法\r\n\r\n```javascript\r\n// 自定義排序實現 - 可能為O(n²)複雜度\r\nfunction customSort(arr) {\r\n    // 實現泡沫排序或插入排序\r\n}\r\n\r\n// 使用內建排序方法 - O(n log n)複雜度\r\narr.sort((a, b) => a - b);\r\n```\r\n\r\n### 3. 提前終止策略\r\n\r\n```javascript\r\n// 找到第一個符合條件的元素即終止搜尋\r\nfunction findFirstMatch(arr, condition) {\r\n    for (let item of arr) {\r\n        if (condition(item)) {\r\n            return item; // 找到符合條件的元素即返回\r\n        }\r\n    }\r\n    return null;\r\n}\r\n```\r\n\r\n## 常見的效能陷阱\r\n\r\n### 1. 字串拼接操作\r\n\r\n```javascript\r\n// 看似簡單但實際為O(n²)複雜度\r\nfunction concatenateStrings(arr) {\r\n    let result = '';\r\n    for (let str of arr) {\r\n        result += str; // 每次拼接都會重新建立字串\r\n    }\r\n    return result;\r\n}\r\n\r\n// 優化實現 - O(n)複雜度\r\nfunction concatenateStrings(arr) {\r\n    return arr.join('');\r\n}\r\n```\r\n\r\n### 2. 迴圈中的重複計算\r\n\r\n```javascript\r\n// 效能較差的實現\r\nfor (let i = 0; i < arr.length; i++) {\r\n    // 每次迴圈都重新計算length屬性\r\n}\r\n\r\n// 優化實現\r\nconst length = arr.length; // 預先計算\r\nfor (let i = 0; i < length; i++) {\r\n    // 迴圈邏輯\r\n}\r\n```\r\n\r\n## 複雜度分析的使用時機\r\n\r\n### 小規模資料（< 1000筆）\r\n\r\n在此規模下，不同複雜度算法之間的效能差異可能不明顯。此時程式碼的可讀性和維護性比效能優化更為重要。\r\n\r\n### 大規模資料（> 10000筆）\r\n\r\n當資料量較大時，複雜度差異會變得明顯。O(n²)算法可能導致用戶體驗嚴重下降，此時必須考慮算法優化。\r\n\r\n### 即時系統應用\r\n\r\n在遊戲或即時通訊等對延遲敏感的系統中，即使資料量不大，也需要仔細考慮每個操作的執行時間。\r\n\r\n## 學習建議與總結\r\n\r\n### 學習策略\r\n\r\n1. **概念優先於記憶**：理解算法複雜度的原理比背誦公式更為重要\r\n2. **實例導向學習**：透過實際問題分析來加深理解\r\n3. **工具輔助**：善用瀏覽器開發者工具進行效能分析\r\n4. **漸進優化**：先確保功能正確性，再進行效能優化\r\n\r\n### 核心要點總結\r\n\r\n算法複雜度分析的核心在於預測程式執行時間的增長趨勢：\r\n\r\n- **O(1)**：執行時間與資料量無關\r\n- **O(log n)**：資料量增加時，執行時間增長緩慢\r\n- **O(n)**：執行時間與資料量成正比\r\n- **O(n²)**：資料量增加一倍，執行時間增加四倍\r\n\r\n在實際開發中，通常追求O(1)或O(log n)的查詢操作，O(n)的遍歷操作，以及O(n log n)的排序操作。避免使用O(n²)算法可以解決大部分效能問題。\r\n\r\n掌握算法複雜度分析不僅有助於解決LeetCode題目，更能提升實際開發中的程式品質和用戶體驗。",
    "category": "LeetCode",
    "tags": [
      "LeetCode",
      "Big O"
    ],
    "image": "/blog/posts/2025/03/algorithm-complexity.png",
    "headings": [
      {
        "level": 2,
        "text": "算法複雜度的重要性"
      },
      {
        "level": 2,
        "text": "算法複雜度的基本概念"
      },
      {
        "level": 3,
        "text": "O(1) - 常數時間複雜度"
      },
      {
        "level": 3,
        "text": "O(n) - 線性時間複雜度"
      },
      {
        "level": 3,
        "text": "O(n²) - 平方時間複雜度"
      },
      {
        "level": 3,
        "text": "O(log n) - 對數時間複雜度"
      },
      {
        "level": 2,
        "text": "實際開發中的應用案例"
      },
      {
        "level": 3,
        "text": "案例一：用戶搜尋功能優化"
      },
      {
        "level": 3,
        "text": "案例二：重複資料檢測優化"
      },
      {
        "level": 2,
        "text": "常見複雜度比較表"
      },
      {
        "level": 2,
        "text": "空間複雜度考量"
      },
      {
        "level": 2,
        "text": "算法優化實務技巧"
      },
      {
        "level": 3,
        "text": "1. 避免巢狀迴圈結構"
      },
      {
        "level": 3,
        "text": "2. 善用語言內建優化方法"
      },
      {
        "level": 3,
        "text": "3. 提前終止策略"
      },
      {
        "level": 2,
        "text": "常見的效能陷阱"
      },
      {
        "level": 3,
        "text": "1. 字串拼接操作"
      },
      {
        "level": 3,
        "text": "2. 迴圈中的重複計算"
      },
      {
        "level": 2,
        "text": "複雜度分析的使用時機"
      },
      {
        "level": 3,
        "text": "小規模資料（< 1000筆）"
      },
      {
        "level": 3,
        "text": "大規模資料（> 10000筆）"
      },
      {
        "level": 3,
        "text": "即時系統應用"
      },
      {
        "level": 2,
        "text": "學習建議與總結"
      },
      {
        "level": 3,
        "text": "學習策略"
      },
      {
        "level": 3,
        "text": "核心要點總結"
      }
    ],
    "slug": "algorithm-complexity-beginner-guide",
    "code": "const{Fragment:l,jsx:n,jsxs:e}=arguments[0];function _createMdxContent(r){const c={blockquote:\"blockquote\",code:\"code\",figure:\"figure\",h2:\"h2\",h3:\"h3\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",table:\"table\",tbody:\"tbody\",td:\"td\",th:\"th\",thead:\"thead\",tr:\"tr\",ul:\"ul\",...r.components};return e(l,{children:[e(c.blockquote,{children:[\"\\n\",n(c.p,{children:n(c.strong,{children:\"備註：本文內容由AI生成，僅供學習參考使用。\"})}),\"\\n\"]}),\"\\n\",n(c.h2,{children:\"算法複雜度的重要性\"}),\"\\n\",n(c.p,{children:\"在程式設計領域中，算法複雜度是評估程式效能的核心概念。對於初學者而言，Big O記法（Big O Notation）可能顯得抽象且難以理解。然而，掌握此概念對於解決LeetCode題目以及實際開發工作都具有重要意義。\"}),\"\\n\",n(c.p,{children:\"本文將透過系統性的方式，結合實際例子和程式碼範例，幫助讀者建立對算法複雜度的清晰認知。\"}),\"\\n\",n(c.h2,{children:\"算法複雜度的基本概念\"}),\"\\n\",n(c.p,{children:\"算法複雜度主要用於描述當輸入資料量增加時，算法執行時間或空間需求的增長趨勢。Big O記法提供了一種標準化的方式來表達這種增長關係。\"}),\"\\n\",n(c.h3,{children:\"O(1) - 常數時間複雜度\"}),\"\\n\",n(c.p,{children:\"常數時間複雜度表示算法的執行時間與輸入資料量無關，無論資料量如何變化，執行時間都保持恆定。\"}),\"\\n\",e(c.p,{children:[n(c.strong,{children:\"實際例子：\"}),\" 從冰箱中取出特定飲料\\r\\n無論冰箱內存放5瓶或50瓶飲料，取出單一瓶飲料的時間都是相同的。\"]}),\"\\n\",n(c.figure,{\"data-rehype-pretty-code-figure\":\"\",children:n(c.pre,{style:{backgroundColor:\"#282c34\",color:\"#abb2bf\"},tabIndex:\"0\",rawcontent:\"// 陣列索引存取為O(1)複雜度\\nfunction getArrayElement(arr, index) {\\n    return arr[index]; // 執行時間與陣列大小無關\\n}\",\"data-language\":\"javascript\",\"data-theme\":\"one-dark-pro\",children:e(c.code,{\"data-language\":\"javascript\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// 陣列索引存取為O(1)複雜度\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#C678DD\"},children:\"function\"}),n(c.span,{style:{color:\"#61AFEF\"},children:\" getArrayElement\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),n(c.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"arr\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\", \"}),n(c.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"index\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\") {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#C678DD\"},children:\"    return\"}),n(c.span,{style:{color:\"#E06C75\"},children:\" arr\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"[\"}),n(c.span,{style:{color:\"#E06C75\"},children:\"index\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"]; \"}),n(c.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// 執行時間與陣列大小無關\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#ABB2BF\"},children:\"}\"})})]})})}),\"\\n\",n(c.h3,{children:\"O(n) - 線性時間複雜度\"}),\"\\n\",n(c.p,{children:\"線性時間複雜度表示算法的執行時間與輸入資料量成正比關係。\"}),\"\\n\",e(c.p,{children:[n(c.strong,{children:\"實際例子：\"}),\" 班級點名程序\\r\\n若班級有10名學生，則需要進行10次點名；若有100名學生，則需要進行100次點名。執行時間與學生人數成正比。\"]}),\"\\n\",n(c.figure,{\"data-rehype-pretty-code-figure\":\"\",children:n(c.pre,{style:{backgroundColor:\"#282c34\",color:\"#abb2bf\"},tabIndex:\"0\",rawcontent:\"// 線性搜尋為O(n)複雜度\\nfunction linearSearch(arr, target) {\\n    for (let i = 0; i < arr.length; i++) {\\n        if (arr[i] === target) {\\n            return i;\\n        }\\n    }\\n    return -1;\\n}\",\"data-language\":\"javascript\",\"data-theme\":\"one-dark-pro\",children:e(c.code,{\"data-language\":\"javascript\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// 線性搜尋為O(n)複雜度\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#C678DD\"},children:\"function\"}),n(c.span,{style:{color:\"#61AFEF\"},children:\" linearSearch\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),n(c.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"arr\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\", \"}),n(c.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"target\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\") {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#C678DD\"},children:\"    for\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\" (\"}),n(c.span,{style:{color:\"#C678DD\"},children:\"let\"}),n(c.span,{style:{color:\"#E06C75\"},children:\" i\"}),n(c.span,{style:{color:\"#56B6C2\"},children:\" =\"}),n(c.span,{style:{color:\"#D19A66\"},children:\" 0\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"; \"}),n(c.span,{style:{color:\"#E06C75\"},children:\"i\"}),n(c.span,{style:{color:\"#56B6C2\"},children:\" <\"}),n(c.span,{style:{color:\"#E5C07B\"},children:\" arr\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\".\"}),n(c.span,{style:{color:\"#E06C75\"},children:\"length\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"; \"}),n(c.span,{style:{color:\"#E06C75\"},children:\"i\"}),n(c.span,{style:{color:\"#56B6C2\"},children:\"++\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\") {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#C678DD\"},children:\"        if\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\" (\"}),n(c.span,{style:{color:\"#E06C75\"},children:\"arr\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"[\"}),n(c.span,{style:{color:\"#E06C75\"},children:\"i\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"] \"}),n(c.span,{style:{color:\"#56B6C2\"},children:\"===\"}),n(c.span,{style:{color:\"#E06C75\"},children:\" target\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\") {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#C678DD\"},children:\"            return\"}),n(c.span,{style:{color:\"#E06C75\"},children:\" i\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#ABB2BF\"},children:\"        }\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#ABB2BF\"},children:\"    }\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#C678DD\"},children:\"    return\"}),n(c.span,{style:{color:\"#56B6C2\"},children:\" -\"}),n(c.span,{style:{color:\"#D19A66\"},children:\"1\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#ABB2BF\"},children:\"}\"})})]})})}),\"\\n\",n(c.h3,{children:\"O(n²) - 平方時間複雜度\"}),\"\\n\",n(c.p,{children:\"平方時間複雜度表示算法的執行時間與輸入資料量的平方成正比，當資料量增加時，執行時間會急劇增長。\"}),\"\\n\",e(c.p,{children:[n(c.strong,{children:\"實際例子：\"}),\" 班級成員相互握手\\r\\n假設班級有10名學生，每位學生需要與其他所有學生握手一次，總共需要進行45次握手。若學生人數增加到20人，則需要進行190次握手。人數增加一倍，握手次數增加四倍。\"]}),\"\\n\",n(c.figure,{\"data-rehype-pretty-code-figure\":\"\",children:n(c.pre,{style:{backgroundColor:\"#282c34\",color:\"#abb2bf\"},tabIndex:\"0\",rawcontent:\"// 泡沫排序為O(n²)複雜度\\nfunction bubbleSort(arr) {\\n    for (let i = 0; i < arr.length; i++) {\\n        for (let j = 0; j < arr.length - 1; j++) {\\n            if (arr[j] > arr[j + 1]) {\\n                [arr[j], arr[j + 1]] = [arr[j + 1], arr[j]];\\n            }\\n        }\\n    }\\n    return arr;\\n}\",\"data-language\":\"javascript\",\"data-theme\":\"one-dark-pro\",children:e(c.code,{\"data-language\":\"javascript\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// 泡沫排序為O(n²)複雜度\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#C678DD\"},children:\"function\"}),n(c.span,{style:{color:\"#61AFEF\"},children:\" bubbleSort\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),n(c.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"arr\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\") {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#C678DD\"},children:\"    for\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\" (\"}),n(c.span,{style:{color:\"#C678DD\"},children:\"let\"}),n(c.span,{style:{color:\"#E06C75\"},children:\" i\"}),n(c.span,{style:{color:\"#56B6C2\"},children:\" =\"}),n(c.span,{style:{color:\"#D19A66\"},children:\" 0\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"; \"}),n(c.span,{style:{color:\"#E06C75\"},children:\"i\"}),n(c.span,{style:{color:\"#56B6C2\"},children:\" <\"}),n(c.span,{style:{color:\"#E5C07B\"},children:\" arr\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\".\"}),n(c.span,{style:{color:\"#E06C75\"},children:\"length\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"; \"}),n(c.span,{style:{color:\"#E06C75\"},children:\"i\"}),n(c.span,{style:{color:\"#56B6C2\"},children:\"++\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\") {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#C678DD\"},children:\"        for\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\" (\"}),n(c.span,{style:{color:\"#C678DD\"},children:\"let\"}),n(c.span,{style:{color:\"#E06C75\"},children:\" j\"}),n(c.span,{style:{color:\"#56B6C2\"},children:\" =\"}),n(c.span,{style:{color:\"#D19A66\"},children:\" 0\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"; \"}),n(c.span,{style:{color:\"#E06C75\"},children:\"j\"}),n(c.span,{style:{color:\"#56B6C2\"},children:\" <\"}),n(c.span,{style:{color:\"#E5C07B\"},children:\" arr\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\".\"}),n(c.span,{style:{color:\"#E06C75\"},children:\"length\"}),n(c.span,{style:{color:\"#56B6C2\"},children:\" -\"}),n(c.span,{style:{color:\"#D19A66\"},children:\" 1\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"; \"}),n(c.span,{style:{color:\"#E06C75\"},children:\"j\"}),n(c.span,{style:{color:\"#56B6C2\"},children:\"++\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\") {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#C678DD\"},children:\"            if\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\" (\"}),n(c.span,{style:{color:\"#E06C75\"},children:\"arr\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"[\"}),n(c.span,{style:{color:\"#E06C75\"},children:\"j\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"] \"}),n(c.span,{style:{color:\"#56B6C2\"},children:\">\"}),n(c.span,{style:{color:\"#E06C75\"},children:\" arr\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"[\"}),n(c.span,{style:{color:\"#E06C75\"},children:\"j\"}),n(c.span,{style:{color:\"#56B6C2\"},children:\" +\"}),n(c.span,{style:{color:\"#D19A66\"},children:\" 1\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"]) {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#ABB2BF\"},children:\"                [\"}),n(c.span,{style:{color:\"#E06C75\"},children:\"arr\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"[\"}),n(c.span,{style:{color:\"#E06C75\"},children:\"j\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"], \"}),n(c.span,{style:{color:\"#E06C75\"},children:\"arr\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"[\"}),n(c.span,{style:{color:\"#E06C75\"},children:\"j\"}),n(c.span,{style:{color:\"#56B6C2\"},children:\" +\"}),n(c.span,{style:{color:\"#D19A66\"},children:\" 1\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"]] \"}),n(c.span,{style:{color:\"#56B6C2\"},children:\"=\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\" [\"}),n(c.span,{style:{color:\"#E06C75\"},children:\"arr\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"[\"}),n(c.span,{style:{color:\"#E06C75\"},children:\"j\"}),n(c.span,{style:{color:\"#56B6C2\"},children:\" +\"}),n(c.span,{style:{color:\"#D19A66\"},children:\" 1\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"], \"}),n(c.span,{style:{color:\"#E06C75\"},children:\"arr\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"[\"}),n(c.span,{style:{color:\"#E06C75\"},children:\"j\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"]];\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#ABB2BF\"},children:\"            }\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#ABB2BF\"},children:\"        }\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#ABB2BF\"},children:\"    }\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#C678DD\"},children:\"    return\"}),n(c.span,{style:{color:\"#E06C75\"},children:\" arr\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#ABB2BF\"},children:\"}\"})})]})})}),\"\\n\",n(c.h3,{children:\"O(log n) - 對數時間複雜度\"}),\"\\n\",n(c.p,{children:\"對數時間複雜度表示算法的執行時間與輸入資料量的對數成正比，當資料量增加時，執行時間增長相對緩慢。\"}),\"\\n\",e(c.p,{children:[n(c.strong,{children:\"實際例子：\"}),\" 二分猜數字遊戲\\r\\n假設需要猜測1到100之間的數字，每次猜測後會得到「太大」或「太小」的提示。採用二分搜尋策略：\"]}),\"\\n\",e(c.ul,{children:[\"\\n\",n(c.li,{children:\"第一次猜測50\"}),\"\\n\",n(c.li,{children:\"若太大，下次猜測25\"}),\"\\n\",n(c.li,{children:\"若太小，下次猜測75\"}),\"\\n\"]}),\"\\n\",n(c.p,{children:\"此策略最多需要7次猜測即可找到答案（因為2⁷ = 128 > 100）。\"}),\"\\n\",n(c.figure,{\"data-rehype-pretty-code-figure\":\"\",children:n(c.pre,{style:{backgroundColor:\"#282c34\",color:\"#abb2bf\"},tabIndex:\"0\",rawcontent:\"// 二分搜尋為O(log n)複雜度\\nfunction binarySearch(arr, target) {\\n    let left = 0;\\n    let right = arr.length - 1;\\n\\n    while (left <= right) {\\n        let mid = Math.floor((left + right) / 2);\\n\\n        if (arr[mid] === target) {\\n            return mid;\\n        } else if (arr[mid] < target) {\\n            left = mid + 1;\\n        } else {\\n            right = mid - 1;\\n        }\\n    }\\n\\n    return -1;\\n}\",\"data-language\":\"javascript\",\"data-theme\":\"one-dark-pro\",children:e(c.code,{\"data-language\":\"javascript\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// 二分搜尋為O(log n)複雜度\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#C678DD\"},children:\"function\"}),n(c.span,{style:{color:\"#61AFEF\"},children:\" binarySearch\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),n(c.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"arr\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\", \"}),n(c.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"target\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\") {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#C678DD\"},children:\"    let\"}),n(c.span,{style:{color:\"#E06C75\"},children:\" left\"}),n(c.span,{style:{color:\"#56B6C2\"},children:\" =\"}),n(c.span,{style:{color:\"#D19A66\"},children:\" 0\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#C678DD\"},children:\"    let\"}),n(c.span,{style:{color:\"#E06C75\"},children:\" right\"}),n(c.span,{style:{color:\"#56B6C2\"},children:\" =\"}),n(c.span,{style:{color:\"#E5C07B\"},children:\" arr\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\".\"}),n(c.span,{style:{color:\"#E06C75\"},children:\"length\"}),n(c.span,{style:{color:\"#56B6C2\"},children:\" -\"}),n(c.span,{style:{color:\"#D19A66\"},children:\" 1\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#C678DD\"},children:\"    while\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\" (\"}),n(c.span,{style:{color:\"#E06C75\"},children:\"left\"}),n(c.span,{style:{color:\"#56B6C2\"},children:\" <=\"}),n(c.span,{style:{color:\"#E06C75\"},children:\" right\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\") {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#C678DD\"},children:\"        let\"}),n(c.span,{style:{color:\"#E06C75\"},children:\" mid\"}),n(c.span,{style:{color:\"#56B6C2\"},children:\" =\"}),n(c.span,{style:{color:\"#E5C07B\"},children:\" Math\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\".\"}),n(c.span,{style:{color:\"#61AFEF\"},children:\"floor\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"((\"}),n(c.span,{style:{color:\"#E06C75\"},children:\"left\"}),n(c.span,{style:{color:\"#56B6C2\"},children:\" +\"}),n(c.span,{style:{color:\"#E06C75\"},children:\" right\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\") \"}),n(c.span,{style:{color:\"#56B6C2\"},children:\"/\"}),n(c.span,{style:{color:\"#D19A66\"},children:\" 2\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#C678DD\"},children:\"        if\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\" (\"}),n(c.span,{style:{color:\"#E06C75\"},children:\"arr\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"[\"}),n(c.span,{style:{color:\"#E06C75\"},children:\"mid\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"] \"}),n(c.span,{style:{color:\"#56B6C2\"},children:\"===\"}),n(c.span,{style:{color:\"#E06C75\"},children:\" target\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\") {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#C678DD\"},children:\"            return\"}),n(c.span,{style:{color:\"#E06C75\"},children:\" mid\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#ABB2BF\"},children:\"        } \"}),n(c.span,{style:{color:\"#C678DD\"},children:\"else\"}),n(c.span,{style:{color:\"#C678DD\"},children:\" if\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\" (\"}),n(c.span,{style:{color:\"#E06C75\"},children:\"arr\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"[\"}),n(c.span,{style:{color:\"#E06C75\"},children:\"mid\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"] \"}),n(c.span,{style:{color:\"#56B6C2\"},children:\"<\"}),n(c.span,{style:{color:\"#E06C75\"},children:\" target\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\") {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#E06C75\"},children:\"            left\"}),n(c.span,{style:{color:\"#56B6C2\"},children:\" =\"}),n(c.span,{style:{color:\"#E06C75\"},children:\" mid\"}),n(c.span,{style:{color:\"#56B6C2\"},children:\" +\"}),n(c.span,{style:{color:\"#D19A66\"},children:\" 1\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#ABB2BF\"},children:\"        } \"}),n(c.span,{style:{color:\"#C678DD\"},children:\"else\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\" {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#E06C75\"},children:\"            right\"}),n(c.span,{style:{color:\"#56B6C2\"},children:\" =\"}),n(c.span,{style:{color:\"#E06C75\"},children:\" mid\"}),n(c.span,{style:{color:\"#56B6C2\"},children:\" -\"}),n(c.span,{style:{color:\"#D19A66\"},children:\" 1\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#ABB2BF\"},children:\"        }\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#ABB2BF\"},children:\"    }\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#C678DD\"},children:\"    return\"}),n(c.span,{style:{color:\"#56B6C2\"},children:\" -\"}),n(c.span,{style:{color:\"#D19A66\"},children:\"1\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#ABB2BF\"},children:\"}\"})})]})})}),\"\\n\",n(c.h2,{children:\"實際開發中的應用案例\"}),\"\\n\",n(c.h3,{children:\"案例一：用戶搜尋功能優化\"}),\"\\n\",n(c.p,{children:\"在開發用戶搜尋功能時，初始實現可能採用簡單的線性搜尋：\"}),\"\\n\",n(c.figure,{\"data-rehype-pretty-code-figure\":\"\",children:n(c.pre,{style:{backgroundColor:\"#282c34\",color:\"#abb2bf\"},tabIndex:\"0\",rawcontent:\"// 初始實現 - O(n)複雜度\\nfunction searchUsers(users, keyword) {\\n    return users.filter((user) => user.name.toLowerCase().includes(keyword.toLowerCase()));\\n}\",\"data-language\":\"javascript\",\"data-theme\":\"one-dark-pro\",children:e(c.code,{\"data-language\":\"javascript\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// 初始實現 - O(n)複雜度\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#C678DD\"},children:\"function\"}),n(c.span,{style:{color:\"#61AFEF\"},children:\" searchUsers\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),n(c.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"users\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\", \"}),n(c.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"keyword\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\") {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#C678DD\"},children:\"    return\"}),n(c.span,{style:{color:\"#E5C07B\"},children:\" users\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\".\"}),n(c.span,{style:{color:\"#61AFEF\"},children:\"filter\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"((\"}),n(c.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"user\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\") \"}),n(c.span,{style:{color:\"#C678DD\"},children:\"=>\"}),n(c.span,{style:{color:\"#E5C07B\"},children:\" user\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\".\"}),n(c.span,{style:{color:\"#E5C07B\"},children:\"name\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\".\"}),n(c.span,{style:{color:\"#61AFEF\"},children:\"toLowerCase\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"().\"}),n(c.span,{style:{color:\"#61AFEF\"},children:\"includes\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),n(c.span,{style:{color:\"#E5C07B\"},children:\"keyword\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\".\"}),n(c.span,{style:{color:\"#61AFEF\"},children:\"toLowerCase\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"()));\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#ABB2BF\"},children:\"}\"})})]})})}),\"\\n\",n(c.p,{children:\"當用戶數量達到10萬時，每次搜尋操作可能需要數秒鐘的執行時間。透過引入索引結構和更高效的搜尋算法，可以顯著提升搜尋效能。\"}),\"\\n\",n(c.h3,{children:\"案例二：重複資料檢測優化\"}),\"\\n\",n(c.p,{children:\"檢測陣列中是否存在重複元素的初始實現：\"}),\"\\n\",n(c.figure,{\"data-rehype-pretty-code-figure\":\"\",children:n(c.pre,{style:{backgroundColor:\"#282c34\",color:\"#abb2bf\"},tabIndex:\"0\",rawcontent:\"// 效能較差的實現 - O(n²)複雜度\\nfunction hasDuplicates(arr) {\\n    for (let i = 0; i < arr.length; i++) {\\n        for (let j = i + 1; j < arr.length; j++) {\\n            if (arr[i] === arr[j]) {\\n                return true;\\n            }\\n        }\\n    }\\n    return false;\\n}\",\"data-language\":\"javascript\",\"data-theme\":\"one-dark-pro\",children:e(c.code,{\"data-language\":\"javascript\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// 效能較差的實現 - O(n²)複雜度\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#C678DD\"},children:\"function\"}),n(c.span,{style:{color:\"#61AFEF\"},children:\" hasDuplicates\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),n(c.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"arr\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\") {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#C678DD\"},children:\"    for\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\" (\"}),n(c.span,{style:{color:\"#C678DD\"},children:\"let\"}),n(c.span,{style:{color:\"#E06C75\"},children:\" i\"}),n(c.span,{style:{color:\"#56B6C2\"},children:\" =\"}),n(c.span,{style:{color:\"#D19A66\"},children:\" 0\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"; \"}),n(c.span,{style:{color:\"#E06C75\"},children:\"i\"}),n(c.span,{style:{color:\"#56B6C2\"},children:\" <\"}),n(c.span,{style:{color:\"#E5C07B\"},children:\" arr\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\".\"}),n(c.span,{style:{color:\"#E06C75\"},children:\"length\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"; \"}),n(c.span,{style:{color:\"#E06C75\"},children:\"i\"}),n(c.span,{style:{color:\"#56B6C2\"},children:\"++\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\") {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#C678DD\"},children:\"        for\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\" (\"}),n(c.span,{style:{color:\"#C678DD\"},children:\"let\"}),n(c.span,{style:{color:\"#E06C75\"},children:\" j\"}),n(c.span,{style:{color:\"#56B6C2\"},children:\" =\"}),n(c.span,{style:{color:\"#E06C75\"},children:\" i\"}),n(c.span,{style:{color:\"#56B6C2\"},children:\" +\"}),n(c.span,{style:{color:\"#D19A66\"},children:\" 1\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"; \"}),n(c.span,{style:{color:\"#E06C75\"},children:\"j\"}),n(c.span,{style:{color:\"#56B6C2\"},children:\" <\"}),n(c.span,{style:{color:\"#E5C07B\"},children:\" arr\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\".\"}),n(c.span,{style:{color:\"#E06C75\"},children:\"length\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"; \"}),n(c.span,{style:{color:\"#E06C75\"},children:\"j\"}),n(c.span,{style:{color:\"#56B6C2\"},children:\"++\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\") {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#C678DD\"},children:\"            if\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\" (\"}),n(c.span,{style:{color:\"#E06C75\"},children:\"arr\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"[\"}),n(c.span,{style:{color:\"#E06C75\"},children:\"i\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"] \"}),n(c.span,{style:{color:\"#56B6C2\"},children:\"===\"}),n(c.span,{style:{color:\"#E06C75\"},children:\" arr\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"[\"}),n(c.span,{style:{color:\"#E06C75\"},children:\"j\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"]) {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#C678DD\"},children:\"                return\"}),n(c.span,{style:{color:\"#D19A66\"},children:\" true\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#ABB2BF\"},children:\"            }\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#ABB2BF\"},children:\"        }\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#ABB2BF\"},children:\"    }\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#C678DD\"},children:\"    return\"}),n(c.span,{style:{color:\"#D19A66\"},children:\" false\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#ABB2BF\"},children:\"}\"})})]})})}),\"\\n\",n(c.p,{children:\"優化後的實現：\"}),\"\\n\",n(c.figure,{\"data-rehype-pretty-code-figure\":\"\",children:n(c.pre,{style:{backgroundColor:\"#282c34\",color:\"#abb2bf\"},tabIndex:\"0\",rawcontent:\"// 優化實現 - O(n)複雜度\\nfunction hasDuplicates(arr) {\\n    return new Set(arr).size !== arr.length;\\n}\",\"data-language\":\"javascript\",\"data-theme\":\"one-dark-pro\",children:e(c.code,{\"data-language\":\"javascript\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// 優化實現 - O(n)複雜度\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#C678DD\"},children:\"function\"}),n(c.span,{style:{color:\"#61AFEF\"},children:\" hasDuplicates\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),n(c.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"arr\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\") {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#C678DD\"},children:\"    return\"}),n(c.span,{style:{color:\"#C678DD\"},children:\" new\"}),n(c.span,{style:{color:\"#61AFEF\"},children:\" Set\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),n(c.span,{style:{color:\"#E06C75\"},children:\"arr\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\").\"}),n(c.span,{style:{color:\"#E06C75\"},children:\"size\"}),n(c.span,{style:{color:\"#56B6C2\"},children:\" !==\"}),n(c.span,{style:{color:\"#E5C07B\"},children:\" arr\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\".\"}),n(c.span,{style:{color:\"#E06C75\"},children:\"length\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#ABB2BF\"},children:\"}\"})})]})})}),\"\\n\",n(c.p,{children:\"此優化將時間複雜度從O(n²)降低至O(n)，在處理大量資料時效能提升顯著。\"}),\"\\n\",n(c.h2,{children:\"常見複雜度比較表\"}),\"\\n\",e(c.table,{children:[n(c.thead,{children:e(c.tr,{children:[n(c.th,{children:\"複雜度\"}),n(c.th,{children:\"10筆資料\"}),n(c.th,{children:\"100筆資料\"}),n(c.th,{children:\"1000筆資料\"}),n(c.th,{children:\"實際應用\"})]})}),e(c.tbody,{children:[e(c.tr,{children:[n(c.td,{children:\"O(1)\"}),n(c.td,{children:\"1\"}),n(c.td,{children:\"1\"}),n(c.td,{children:\"1\"}),n(c.td,{children:\"陣列索引存取\"})]}),e(c.tr,{children:[n(c.td,{children:\"O(log n)\"}),n(c.td,{children:\"3\"}),n(c.td,{children:\"7\"}),n(c.td,{children:\"10\"}),n(c.td,{children:\"二分搜尋\"})]}),e(c.tr,{children:[n(c.td,{children:\"O(n)\"}),n(c.td,{children:\"10\"}),n(c.td,{children:\"100\"}),n(c.td,{children:\"1000\"}),n(c.td,{children:\"線性搜尋\"})]}),e(c.tr,{children:[n(c.td,{children:\"O(n log n)\"}),n(c.td,{children:\"33\"}),n(c.td,{children:\"664\"}),n(c.td,{children:\"9966\"}),n(c.td,{children:\"快速排序\"})]}),e(c.tr,{children:[n(c.td,{children:\"O(n²)\"}),n(c.td,{children:\"100\"}),n(c.td,{children:\"10000\"}),n(c.td,{children:\"1000000\"}),n(c.td,{children:\"泡沫排序\"})]})]})]}),\"\\n\",n(c.p,{children:\"從表格可以看出，當資料量增加時，O(n²)算法的執行次數呈現指數級增長，這在實際應用中是不可接受的。\"}),\"\\n\",n(c.h2,{children:\"空間複雜度考量\"}),\"\\n\",n(c.p,{children:\"除了時間複雜度，空間複雜度也是算法分析的重要面向：\"}),\"\\n\",n(c.figure,{\"data-rehype-pretty-code-figure\":\"\",children:n(c.pre,{style:{backgroundColor:\"#282c34\",color:\"#abb2bf\"},tabIndex:\"0\",rawcontent:\"// 空間複雜度O(1) - 僅使用固定數量的變數\\nfunction calculateSum(arr) {\\n    let total = 0;\\n    for (let num of arr) {\\n        total += num;\\n    }\\n    return total;\\n}\\n\\n// 空間複雜度O(n) - 建立新的陣列\\nfunction duplicateArray(arr) {\\n    return arr.map((x) => x * 2); // 建立與原陣列相同大小的新陣列\\n}\",\"data-language\":\"javascript\",\"data-theme\":\"one-dark-pro\",children:e(c.code,{\"data-language\":\"javascript\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// 空間複雜度O(1) - 僅使用固定數量的變數\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#C678DD\"},children:\"function\"}),n(c.span,{style:{color:\"#61AFEF\"},children:\" calculateSum\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),n(c.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"arr\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\") {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#C678DD\"},children:\"    let\"}),n(c.span,{style:{color:\"#E06C75\"},children:\" total\"}),n(c.span,{style:{color:\"#56B6C2\"},children:\" =\"}),n(c.span,{style:{color:\"#D19A66\"},children:\" 0\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#C678DD\"},children:\"    for\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\" (\"}),n(c.span,{style:{color:\"#C678DD\"},children:\"let\"}),n(c.span,{style:{color:\"#E06C75\"},children:\" num\"}),n(c.span,{style:{color:\"#C678DD\"},children:\" of\"}),n(c.span,{style:{color:\"#E06C75\"},children:\" arr\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\") {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#E06C75\"},children:\"        total\"}),n(c.span,{style:{color:\"#56B6C2\"},children:\" +=\"}),n(c.span,{style:{color:\"#E06C75\"},children:\" num\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#ABB2BF\"},children:\"    }\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#C678DD\"},children:\"    return\"}),n(c.span,{style:{color:\"#E06C75\"},children:\" total\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#ABB2BF\"},children:\"}\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// 空間複雜度O(n) - 建立新的陣列\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#C678DD\"},children:\"function\"}),n(c.span,{style:{color:\"#61AFEF\"},children:\" duplicateArray\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),n(c.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"arr\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\") {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#C678DD\"},children:\"    return\"}),n(c.span,{style:{color:\"#E5C07B\"},children:\" arr\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\".\"}),n(c.span,{style:{color:\"#61AFEF\"},children:\"map\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"((\"}),n(c.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"x\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\") \"}),n(c.span,{style:{color:\"#C678DD\"},children:\"=>\"}),n(c.span,{style:{color:\"#E06C75\"},children:\" x\"}),n(c.span,{style:{color:\"#56B6C2\"},children:\" *\"}),n(c.span,{style:{color:\"#D19A66\"},children:\" 2\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"); \"}),n(c.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// 建立與原陣列相同大小的新陣列\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#ABB2BF\"},children:\"}\"})})]})})}),\"\\n\",n(c.p,{children:\"在實際開發中，需要在時間複雜度和空間複雜度之間取得平衡，根據具體需求選擇合適的算法。\"}),\"\\n\",n(c.h2,{children:\"算法優化實務技巧\"}),\"\\n\",n(c.h3,{children:\"1. 避免巢狀迴圈結構\"}),\"\\n\",n(c.figure,{\"data-rehype-pretty-code-figure\":\"\",children:n(c.pre,{style:{backgroundColor:\"#282c34\",color:\"#abb2bf\"},tabIndex:\"0\",rawcontent:\"// 效能較差的實現 - O(n²)複雜度\\nfunction findCommonElements(arr1, arr2) {\\n    const result = [];\\n    for (let i = 0; i < arr1.length; i++) {\\n        for (let j = 0; j < arr2.length; j++) {\\n            if (arr1[i] === arr2[j]) {\\n                result.push(arr1[i]);\\n            }\\n        }\\n    }\\n    return result;\\n}\\n\\n// 優化實現 - O(n + m)複雜度\\nfunction findCommonElements(arr1, arr2) {\\n    const set2 = new Set(arr2);\\n    return arr1.filter(item => set2.has(item));\\n}\",\"data-language\":\"javascript\",\"data-theme\":\"one-dark-pro\",children:e(c.code,{\"data-language\":\"javascript\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// 效能較差的實現 - O(n²)複雜度\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#C678DD\"},children:\"function\"}),n(c.span,{style:{color:\"#61AFEF\"},children:\" findCommonElements\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),n(c.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"arr1\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\", \"}),n(c.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"arr2\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\") {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#C678DD\"},children:\"    const\"}),n(c.span,{style:{color:\"#E5C07B\"},children:\" result\"}),n(c.span,{style:{color:\"#56B6C2\"},children:\" =\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\" [];\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#C678DD\"},children:\"    for\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\" (\"}),n(c.span,{style:{color:\"#C678DD\"},children:\"let\"}),n(c.span,{style:{color:\"#E06C75\"},children:\" i\"}),n(c.span,{style:{color:\"#56B6C2\"},children:\" =\"}),n(c.span,{style:{color:\"#D19A66\"},children:\" 0\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"; \"}),n(c.span,{style:{color:\"#E06C75\"},children:\"i\"}),n(c.span,{style:{color:\"#56B6C2\"},children:\" <\"}),n(c.span,{style:{color:\"#E5C07B\"},children:\" arr1\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\".\"}),n(c.span,{style:{color:\"#E06C75\"},children:\"length\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"; \"}),n(c.span,{style:{color:\"#E06C75\"},children:\"i\"}),n(c.span,{style:{color:\"#56B6C2\"},children:\"++\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\") {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#C678DD\"},children:\"        for\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\" (\"}),n(c.span,{style:{color:\"#C678DD\"},children:\"let\"}),n(c.span,{style:{color:\"#E06C75\"},children:\" j\"}),n(c.span,{style:{color:\"#56B6C2\"},children:\" =\"}),n(c.span,{style:{color:\"#D19A66\"},children:\" 0\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"; \"}),n(c.span,{style:{color:\"#E06C75\"},children:\"j\"}),n(c.span,{style:{color:\"#56B6C2\"},children:\" <\"}),n(c.span,{style:{color:\"#E5C07B\"},children:\" arr2\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\".\"}),n(c.span,{style:{color:\"#E06C75\"},children:\"length\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"; \"}),n(c.span,{style:{color:\"#E06C75\"},children:\"j\"}),n(c.span,{style:{color:\"#56B6C2\"},children:\"++\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\") {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#C678DD\"},children:\"            if\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\" (\"}),n(c.span,{style:{color:\"#E06C75\"},children:\"arr1\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"[\"}),n(c.span,{style:{color:\"#E06C75\"},children:\"i\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"] \"}),n(c.span,{style:{color:\"#56B6C2\"},children:\"===\"}),n(c.span,{style:{color:\"#E06C75\"},children:\" arr2\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"[\"}),n(c.span,{style:{color:\"#E06C75\"},children:\"j\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"]) {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#E5C07B\"},children:\"                result\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\".\"}),n(c.span,{style:{color:\"#61AFEF\"},children:\"push\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),n(c.span,{style:{color:\"#E06C75\"},children:\"arr1\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"[\"}),n(c.span,{style:{color:\"#E06C75\"},children:\"i\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"]);\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#ABB2BF\"},children:\"            }\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#ABB2BF\"},children:\"        }\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#ABB2BF\"},children:\"    }\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#C678DD\"},children:\"    return\"}),n(c.span,{style:{color:\"#E06C75\"},children:\" result\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#ABB2BF\"},children:\"}\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// 優化實現 - O(n + m)複雜度\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#C678DD\"},children:\"function\"}),n(c.span,{style:{color:\"#61AFEF\"},children:\" findCommonElements\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),n(c.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"arr1\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\", \"}),n(c.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"arr2\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\") {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#C678DD\"},children:\"    const\"}),n(c.span,{style:{color:\"#E5C07B\"},children:\" set2\"}),n(c.span,{style:{color:\"#56B6C2\"},children:\" =\"}),n(c.span,{style:{color:\"#C678DD\"},children:\" new\"}),n(c.span,{style:{color:\"#61AFEF\"},children:\" Set\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),n(c.span,{style:{color:\"#E06C75\"},children:\"arr2\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#C678DD\"},children:\"    return\"}),n(c.span,{style:{color:\"#E5C07B\"},children:\" arr1\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\".\"}),n(c.span,{style:{color:\"#61AFEF\"},children:\"filter\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),n(c.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"item\"}),n(c.span,{style:{color:\"#C678DD\"},children:\" =>\"}),n(c.span,{style:{color:\"#E5C07B\"},children:\" set2\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\".\"}),n(c.span,{style:{color:\"#61AFEF\"},children:\"has\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),n(c.span,{style:{color:\"#E06C75\"},children:\"item\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"));\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#ABB2BF\"},children:\"}\"})})]})})}),\"\\n\",n(c.h3,{children:\"2. 善用語言內建優化方法\"}),\"\\n\",n(c.figure,{\"data-rehype-pretty-code-figure\":\"\",children:n(c.pre,{style:{backgroundColor:\"#282c34\",color:\"#abb2bf\"},tabIndex:\"0\",rawcontent:\"// 自定義排序實現 - 可能為O(n²)複雜度\\nfunction customSort(arr) {\\n    // 實現泡沫排序或插入排序\\n}\\n\\n// 使用內建排序方法 - O(n log n)複雜度\\narr.sort((a, b) => a - b);\",\"data-language\":\"javascript\",\"data-theme\":\"one-dark-pro\",children:e(c.code,{\"data-language\":\"javascript\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// 自定義排序實現 - 可能為O(n²)複雜度\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#C678DD\"},children:\"function\"}),n(c.span,{style:{color:\"#61AFEF\"},children:\" customSort\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),n(c.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"arr\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\") {\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"    // 實現泡沫排序或插入排序\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#ABB2BF\"},children:\"}\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// 使用內建排序方法 - O(n log n)複雜度\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#E5C07B\"},children:\"arr\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\".\"}),n(c.span,{style:{color:\"#61AFEF\"},children:\"sort\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"((\"}),n(c.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"a\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\", \"}),n(c.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"b\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\") \"}),n(c.span,{style:{color:\"#C678DD\"},children:\"=>\"}),n(c.span,{style:{color:\"#E06C75\"},children:\" a\"}),n(c.span,{style:{color:\"#56B6C2\"},children:\" -\"}),n(c.span,{style:{color:\"#E06C75\"},children:\" b\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\");\"})]})]})})}),\"\\n\",n(c.h3,{children:\"3. 提前終止策略\"}),\"\\n\",n(c.figure,{\"data-rehype-pretty-code-figure\":\"\",children:n(c.pre,{style:{backgroundColor:\"#282c34\",color:\"#abb2bf\"},tabIndex:\"0\",rawcontent:\"// 找到第一個符合條件的元素即終止搜尋\\nfunction findFirstMatch(arr, condition) {\\n    for (let item of arr) {\\n        if (condition(item)) {\\n            return item; // 找到符合條件的元素即返回\\n        }\\n    }\\n    return null;\\n}\",\"data-language\":\"javascript\",\"data-theme\":\"one-dark-pro\",children:e(c.code,{\"data-language\":\"javascript\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// 找到第一個符合條件的元素即終止搜尋\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#C678DD\"},children:\"function\"}),n(c.span,{style:{color:\"#61AFEF\"},children:\" findFirstMatch\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),n(c.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"arr\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\", \"}),n(c.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"condition\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\") {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#C678DD\"},children:\"    for\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\" (\"}),n(c.span,{style:{color:\"#C678DD\"},children:\"let\"}),n(c.span,{style:{color:\"#E06C75\"},children:\" item\"}),n(c.span,{style:{color:\"#C678DD\"},children:\" of\"}),n(c.span,{style:{color:\"#E06C75\"},children:\" arr\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\") {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#C678DD\"},children:\"        if\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\" (\"}),n(c.span,{style:{color:\"#61AFEF\"},children:\"condition\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),n(c.span,{style:{color:\"#E06C75\"},children:\"item\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\")) {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#C678DD\"},children:\"            return\"}),n(c.span,{style:{color:\"#E06C75\"},children:\" item\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"; \"}),n(c.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// 找到符合條件的元素即返回\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#ABB2BF\"},children:\"        }\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#ABB2BF\"},children:\"    }\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#C678DD\"},children:\"    return\"}),n(c.span,{style:{color:\"#D19A66\"},children:\" null\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#ABB2BF\"},children:\"}\"})})]})})}),\"\\n\",n(c.h2,{children:\"常見的效能陷阱\"}),\"\\n\",n(c.h3,{children:\"1. 字串拼接操作\"}),\"\\n\",n(c.figure,{\"data-rehype-pretty-code-figure\":\"\",children:n(c.pre,{style:{backgroundColor:\"#282c34\",color:\"#abb2bf\"},tabIndex:\"0\",rawcontent:\"// 看似簡單但實際為O(n²)複雜度\\nfunction concatenateStrings(arr) {\\n    let result = '';\\n    for (let str of arr) {\\n        result += str; // 每次拼接都會重新建立字串\\n    }\\n    return result;\\n}\\n\\n// 優化實現 - O(n)複雜度\\nfunction concatenateStrings(arr) {\\n    return arr.join('');\\n}\",\"data-language\":\"javascript\",\"data-theme\":\"one-dark-pro\",children:e(c.code,{\"data-language\":\"javascript\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// 看似簡單但實際為O(n²)複雜度\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#C678DD\"},children:\"function\"}),n(c.span,{style:{color:\"#61AFEF\"},children:\" concatenateStrings\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),n(c.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"arr\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\") {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#C678DD\"},children:\"    let\"}),n(c.span,{style:{color:\"#E06C75\"},children:\" result\"}),n(c.span,{style:{color:\"#56B6C2\"},children:\" =\"}),n(c.span,{style:{color:\"#98C379\"},children:\" ''\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#C678DD\"},children:\"    for\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\" (\"}),n(c.span,{style:{color:\"#C678DD\"},children:\"let\"}),n(c.span,{style:{color:\"#E06C75\"},children:\" str\"}),n(c.span,{style:{color:\"#C678DD\"},children:\" of\"}),n(c.span,{style:{color:\"#E06C75\"},children:\" arr\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\") {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#E06C75\"},children:\"        result\"}),n(c.span,{style:{color:\"#56B6C2\"},children:\" +=\"}),n(c.span,{style:{color:\"#E06C75\"},children:\" str\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"; \"}),n(c.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// 每次拼接都會重新建立字串\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#ABB2BF\"},children:\"    }\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#C678DD\"},children:\"    return\"}),n(c.span,{style:{color:\"#E06C75\"},children:\" result\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#ABB2BF\"},children:\"}\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// 優化實現 - O(n)複雜度\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#C678DD\"},children:\"function\"}),n(c.span,{style:{color:\"#61AFEF\"},children:\" concatenateStrings\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),n(c.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"arr\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\") {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#C678DD\"},children:\"    return\"}),n(c.span,{style:{color:\"#E5C07B\"},children:\" arr\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\".\"}),n(c.span,{style:{color:\"#61AFEF\"},children:\"join\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),n(c.span,{style:{color:\"#98C379\"},children:\"''\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#ABB2BF\"},children:\"}\"})})]})})}),\"\\n\",n(c.h3,{children:\"2. 迴圈中的重複計算\"}),\"\\n\",n(c.figure,{\"data-rehype-pretty-code-figure\":\"\",children:n(c.pre,{style:{backgroundColor:\"#282c34\",color:\"#abb2bf\"},tabIndex:\"0\",rawcontent:\"// 效能較差的實現\\nfor (let i = 0; i < arr.length; i++) {\\n    // 每次迴圈都重新計算length屬性\\n}\\n\\n// 優化實現\\nconst length = arr.length; // 預先計算\\nfor (let i = 0; i < length; i++) {\\n    // 迴圈邏輯\\n}\",\"data-language\":\"javascript\",\"data-theme\":\"one-dark-pro\",children:e(c.code,{\"data-language\":\"javascript\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// 效能較差的實現\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#C678DD\"},children:\"for\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\" (\"}),n(c.span,{style:{color:\"#C678DD\"},children:\"let\"}),n(c.span,{style:{color:\"#E06C75\"},children:\" i\"}),n(c.span,{style:{color:\"#56B6C2\"},children:\" =\"}),n(c.span,{style:{color:\"#D19A66\"},children:\" 0\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"; \"}),n(c.span,{style:{color:\"#E06C75\"},children:\"i\"}),n(c.span,{style:{color:\"#56B6C2\"},children:\" <\"}),n(c.span,{style:{color:\"#E5C07B\"},children:\" arr\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\".\"}),n(c.span,{style:{color:\"#E06C75\"},children:\"length\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"; \"}),n(c.span,{style:{color:\"#E06C75\"},children:\"i\"}),n(c.span,{style:{color:\"#56B6C2\"},children:\"++\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\") {\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"    // 每次迴圈都重新計算length屬性\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#ABB2BF\"},children:\"}\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// 優化實現\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#C678DD\"},children:\"const\"}),n(c.span,{style:{color:\"#E5C07B\"},children:\" length\"}),n(c.span,{style:{color:\"#56B6C2\"},children:\" =\"}),n(c.span,{style:{color:\"#E5C07B\"},children:\" arr\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\".\"}),n(c.span,{style:{color:\"#E06C75\"},children:\"length\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"; \"}),n(c.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// 預先計算\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[n(c.span,{style:{color:\"#C678DD\"},children:\"for\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\" (\"}),n(c.span,{style:{color:\"#C678DD\"},children:\"let\"}),n(c.span,{style:{color:\"#E06C75\"},children:\" i\"}),n(c.span,{style:{color:\"#56B6C2\"},children:\" =\"}),n(c.span,{style:{color:\"#D19A66\"},children:\" 0\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"; \"}),n(c.span,{style:{color:\"#E06C75\"},children:\"i\"}),n(c.span,{style:{color:\"#56B6C2\"},children:\" <\"}),n(c.span,{style:{color:\"#E06C75\"},children:\" length\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\"; \"}),n(c.span,{style:{color:\"#E06C75\"},children:\"i\"}),n(c.span,{style:{color:\"#56B6C2\"},children:\"++\"}),n(c.span,{style:{color:\"#ABB2BF\"},children:\") {\"})]}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"    // 迴圈邏輯\"})}),\"\\n\",n(c.span,{\"data-line\":\"\",children:n(c.span,{style:{color:\"#ABB2BF\"},children:\"}\"})})]})})}),\"\\n\",n(c.h2,{children:\"複雜度分析的使用時機\"}),\"\\n\",n(c.h3,{children:\"小規模資料（< 1000筆）\"}),\"\\n\",n(c.p,{children:\"在此規模下，不同複雜度算法之間的效能差異可能不明顯。此時程式碼的可讀性和維護性比效能優化更為重要。\"}),\"\\n\",n(c.h3,{children:\"大規模資料（> 10000筆）\"}),\"\\n\",n(c.p,{children:\"當資料量較大時，複雜度差異會變得明顯。O(n²)算法可能導致用戶體驗嚴重下降，此時必須考慮算法優化。\"}),\"\\n\",n(c.h3,{children:\"即時系統應用\"}),\"\\n\",n(c.p,{children:\"在遊戲或即時通訊等對延遲敏感的系統中，即使資料量不大，也需要仔細考慮每個操作的執行時間。\"}),\"\\n\",n(c.h2,{children:\"學習建議與總結\"}),\"\\n\",n(c.h3,{children:\"學習策略\"}),\"\\n\",e(c.ol,{children:[\"\\n\",e(c.li,{children:[n(c.strong,{children:\"概念優先於記憶\"}),\"：理解算法複雜度的原理比背誦公式更為重要\"]}),\"\\n\",e(c.li,{children:[n(c.strong,{children:\"實例導向學習\"}),\"：透過實際問題分析來加深理解\"]}),\"\\n\",e(c.li,{children:[n(c.strong,{children:\"工具輔助\"}),\"：善用瀏覽器開發者工具進行效能分析\"]}),\"\\n\",e(c.li,{children:[n(c.strong,{children:\"漸進優化\"}),\"：先確保功能正確性，再進行效能優化\"]}),\"\\n\"]}),\"\\n\",n(c.h3,{children:\"核心要點總結\"}),\"\\n\",n(c.p,{children:\"算法複雜度分析的核心在於預測程式執行時間的增長趨勢：\"}),\"\\n\",e(c.ul,{children:[\"\\n\",e(c.li,{children:[n(c.strong,{children:\"O(1)\"}),\"：執行時間與資料量無關\"]}),\"\\n\",e(c.li,{children:[n(c.strong,{children:\"O(log n)\"}),\"：資料量增加時，執行時間增長緩慢\"]}),\"\\n\",e(c.li,{children:[n(c.strong,{children:\"O(n)\"}),\"：執行時間與資料量成正比\"]}),\"\\n\",e(c.li,{children:[n(c.strong,{children:\"O(n²)\"}),\"：資料量增加一倍，執行時間增加四倍\"]}),\"\\n\"]}),\"\\n\",n(c.p,{children:\"在實際開發中，通常追求O(1)或O(log n)的查詢操作，O(n)的遍歷操作，以及O(n log n)的排序操作。避免使用O(n²)算法可以解決大部分效能問題。\"}),\"\\n\",n(c.p,{children:\"掌握算法複雜度分析不僅有助於解決LeetCode題目，更能提升實際開發中的程式品質和用戶體驗。\"})]})}return{default:function(l={}){const{wrapper:e}=l.components||{};return e?n(e,{...l,children:n(_createMdxContent,{...l})}):_createMdxContent(l)}};",
    "permalink": "/blog/posts/algorithm-complexity-beginner-guide"
  },
  {
    "title": "AI 串接指南 - 以 Perplexity 為例",
    "date": "2025-02-06T00:00:00.000Z",
    "description": "最近 AI 工具越來越火，我也想在專案裡串接看看。試了幾個 API 後發現 Perplexity 在串接體驗上蠻不錯的，還可以設定要從哪些網站抓取資料為主。分享一下我的串接經驗。",
    "rawContent": "## 為什麼我選擇 Perplexity？\r\n\r\n最近 AI 工具真的很火，就試試了幾個當下最熱門的，其中 Perplexity 在官網上就有 JavaScript 的串接範例，尤其我當時有個需求是希望回答的資料來源以我指定得網站為主。\r\n\r\n## 什麼是 Perplexity？\r\n\r\n簡單說，Perplexity 就是一個會搜尋網路的 AI 助手。它於 2022 年推出，主要特色是：\r\n\r\n- **即時搜尋**：會從網路上找最新資訊\r\n- **自動引用**：回答會附上來源連結\r\n- **對話式**：可以連續對話，有上下文理解\r\n- **多語言**：支援中文等多種語言\r\n\r\n對開發者來說，最吸引我的是它的 API 設定很好用跟方便。\r\n\r\n## 開始前的準備工作\r\n\r\n### 1. 註冊帳號\r\n\r\n去 [Perplexity](https://www.perplexity.ai) 註冊一個帳號。\r\n\r\n### 2. 綁定信用卡\r\n\r\n這步驟不會馬上扣款，只是為了之後使用 API。我試用了一陣子，花費其實不多。\r\n\r\n### 3. 生成 API Key\r\n\r\n在設定頁面生成 API Key，這個 Key 可以長期使用，記得好好保存。\r\n\r\n## API 基本使用\r\n\r\n### 基本呼叫方式\r\n\r\n```javascript\r\nconst response = await fetch('https://api.perplexity.ai/chat/completions', {\r\n    method: 'POST',\r\n    headers: {\r\n        Authorization: `Bearer ${API_KEY}`,\r\n        'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify({\r\n        model: 'sonar',\r\n        messages: [\r\n            { role: 'system', content: '請用繁體中文回答，並保持簡潔' },\r\n            { role: 'user', content: '最新的 JavaScript 框架趨勢是什麼？' },\r\n        ],\r\n        temperature: 0.2,\r\n        max_tokens: 500,\r\n    }),\r\n});\r\n\r\nconst data = await response.json();\r\nconsole.log(data.choices[0].message.content);\r\n```\r\n\r\n## 實際整合到專案\r\n\r\n### React 元件範例\r\n\r\n我做了一個簡單的搜尋元件：\r\n\r\n```jsx\r\nimport { useState } from 'react';\r\n\r\nconst PerplexitySearch = () => {\r\n    const [query, setQuery] = useState('');\r\n    const [result, setResult] = useState('');\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const searchWithPerplexity = async () => {\r\n        if (!query.trim()) return;\r\n\r\n        setLoading(true);\r\n        try {\r\n            const response = await fetch('/api/perplexity', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ question: query }),\r\n            });\r\n\r\n            const data = await response.json();\r\n            setResult(data.answer);\r\n        } catch (error) {\r\n            console.error('搜尋失敗:', error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <input\r\n                type=\"text\"\r\n                value={query}\r\n                onChange={(e) => setQuery(e.target.value)}\r\n                placeholder=\"問我任何問題...\"\r\n                onKeyPress={(e) => e.key === 'Enter' && searchWithPerplexity()}\r\n            />\r\n            <button onClick={searchWithPerplexity} disabled={loading}>\r\n                {loading ? '搜尋中...' : '搜尋'}\r\n            </button>\r\n            {result && (\r\n                <div style={{ marginTop: '20px', padding: '15px', border: '1px solid #ccc' }}>\r\n                    <div dangerouslySetInnerHTML={{ __html: result }} />\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n```\r\n\r\n### Next.js API Route\r\n\r\n```javascript\r\n// pages/api/perplexity.js (或 app/api/perplexity/route.js)\r\nexport default async function handler(req, res) {\r\n    if (req.method !== 'POST') {\r\n        return res.status(405).json({ error: 'Method not allowed' });\r\n    }\r\n\r\n    const { question } = req.body;\r\n\r\n    try {\r\n        const response = await fetch('https://api.perplexity.ai/chat/completions', {\r\n            method: 'POST',\r\n            headers: {\r\n                Authorization: `Bearer ${process.env.PERPLEXITY_API_KEY}`,\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify({\r\n                model: 'sonar',\r\n                messages: [\r\n                    {\r\n                        role: 'system',\r\n                        content: '請用繁體中文回答，並在回答中包含相關的來源連結',\r\n                    },\r\n                    { role: 'user', content: question },\r\n                ],\r\n                temperature: 0.3,\r\n                max_tokens: 1000,\r\n            }),\r\n        });\r\n\r\n        const data = await response.json();\r\n        const answer = data.choices[0].message.content;\r\n\r\n        res.status(200).json({ answer });\r\n    } catch (error) {\r\n        console.error('Perplexity API 錯誤:', error);\r\n        res.status(500).json({ error: '搜尋服務暫時無法使用' });\r\n    }\r\n}\r\n```\r\n\r\n## 參數調整技巧\r\n\r\n我花了不少時間調整這些參數，分享一下心得：\r\n\r\n### temperature (創造性)\r\n\r\n- `0.1-0.3`: 回答比較精準，適合資訊查詢\r\n- `0.5-0.7`: 回答比較有創意，適合創作類任務\r\n- `0.8+`: 回答很有創意但可能不太準確\r\n\r\n### max_tokens (回應長度)\r\n\r\n- `100-300`: 簡短回答\r\n- `500-1000`: 一般詳細度\r\n- `1000+`: 很詳細的回答\r\n\r\n### search_recency_filter (時效性)\r\n\r\n- `hour`: 只搜尋一小時內的資訊\r\n- `day`: 一天內\r\n- `week`: 一週內\r\n- `month`: 一個月內\r\n\r\n\r\n## 我做的測試工具\r\n\r\n為了方便測試不同參數，我做了一個簡單的測試工具：\r\n[Perplexity API 參數測試工具](https://garylin0969-perplexity-concat.vercel.app/)\r\n\r\n可以即時調整參數看效果，對新手很有幫助。",
    "category": "Code",
    "tags": [
      "AI",
      "Perplexity",
      "ChatBot"
    ],
    "image": "/blog/posts/2025/02/perplexity.jpeg",
    "headings": [
      {
        "level": 2,
        "text": "為什麼我選擇 Perplexity？"
      },
      {
        "level": 2,
        "text": "什麼是 Perplexity？"
      },
      {
        "level": 2,
        "text": "開始前的準備工作"
      },
      {
        "level": 3,
        "text": "1. 註冊帳號"
      },
      {
        "level": 3,
        "text": "2. 綁定信用卡"
      },
      {
        "level": 3,
        "text": "3. 生成 API Key"
      },
      {
        "level": 2,
        "text": "API 基本使用"
      },
      {
        "level": 3,
        "text": "基本呼叫方式"
      },
      {
        "level": 2,
        "text": "實際整合到專案"
      },
      {
        "level": 3,
        "text": "React 元件範例"
      },
      {
        "level": 3,
        "text": "Next.js API Route"
      },
      {
        "level": 2,
        "text": "參數調整技巧"
      },
      {
        "level": 3,
        "text": "temperature (創造性)"
      },
      {
        "level": 3,
        "text": "max_tokens (回應長度)"
      },
      {
        "level": 3,
        "text": "search_recency_filter (時效性)"
      },
      {
        "level": 2,
        "text": "我做的測試工具"
      }
    ],
    "slug": "ai-integration-guide-perplexity-api",
    "code": "const{Fragment:l,jsx:n,jsxs:e}=arguments[0];function _createMdxContent(r){const s={a:\"a\",code:\"code\",figure:\"figure\",h2:\"h2\",h3:\"h3\",li:\"li\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...r.components};return e(l,{children:[n(s.h2,{children:\"為什麼我選擇 Perplexity？\"}),\"\\n\",n(s.p,{children:\"最近 AI 工具真的很火，就試試了幾個當下最熱門的，其中 Perplexity 在官網上就有 JavaScript 的串接範例，尤其我當時有個需求是希望回答的資料來源以我指定得網站為主。\"}),\"\\n\",n(s.h2,{children:\"什麼是 Perplexity？\"}),\"\\n\",n(s.p,{children:\"簡單說，Perplexity 就是一個會搜尋網路的 AI 助手。它於 2022 年推出，主要特色是：\"}),\"\\n\",e(s.ul,{children:[\"\\n\",e(s.li,{children:[n(s.strong,{children:\"即時搜尋\"}),\"：會從網路上找最新資訊\"]}),\"\\n\",e(s.li,{children:[n(s.strong,{children:\"自動引用\"}),\"：回答會附上來源連結\"]}),\"\\n\",e(s.li,{children:[n(s.strong,{children:\"對話式\"}),\"：可以連續對話，有上下文理解\"]}),\"\\n\",e(s.li,{children:[n(s.strong,{children:\"多語言\"}),\"：支援中文等多種語言\"]}),\"\\n\"]}),\"\\n\",n(s.p,{children:\"對開發者來說，最吸引我的是它的 API 設定很好用跟方便。\"}),\"\\n\",n(s.h2,{children:\"開始前的準備工作\"}),\"\\n\",n(s.h3,{children:\"1. 註冊帳號\"}),\"\\n\",e(s.p,{children:[\"去 \",n(s.a,{href:\"https://www.perplexity.ai\",children:\"Perplexity\"}),\" 註冊一個帳號。\"]}),\"\\n\",n(s.h3,{children:\"2. 綁定信用卡\"}),\"\\n\",n(s.p,{children:\"這步驟不會馬上扣款，只是為了之後使用 API。我試用了一陣子，花費其實不多。\"}),\"\\n\",n(s.h3,{children:\"3. 生成 API Key\"}),\"\\n\",n(s.p,{children:\"在設定頁面生成 API Key，這個 Key 可以長期使用，記得好好保存。\"}),\"\\n\",n(s.h2,{children:\"API 基本使用\"}),\"\\n\",n(s.h3,{children:\"基本呼叫方式\"}),\"\\n\",n(s.figure,{\"data-rehype-pretty-code-figure\":\"\",children:n(s.pre,{style:{backgroundColor:\"#282c34\",color:\"#abb2bf\"},tabIndex:\"0\",rawcontent:\"const response = await fetch('https://api.perplexity.ai/chat/completions', {\\n    method: 'POST',\\n    headers: {\\n        Authorization: `Bearer ${API_KEY}`,\\n        'Content-Type': 'application/json',\\n    },\\n    body: JSON.stringify({\\n        model: 'sonar',\\n        messages: [\\n            { role: 'system', content: '請用繁體中文回答，並保持簡潔' },\\n            { role: 'user', content: '最新的 JavaScript 框架趨勢是什麼？' },\\n        ],\\n        temperature: 0.2,\\n        max_tokens: 500,\\n    }),\\n});\\n\\nconst data = await response.json();\\nconsole.log(data.choices[0].message.content);\",\"data-language\":\"javascript\",\"data-theme\":\"one-dark-pro\",children:e(s.code,{\"data-language\":\"javascript\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#C678DD\"},children:\"const\"}),n(s.span,{style:{color:\"#E5C07B\"},children:\" response\"}),n(s.span,{style:{color:\"#56B6C2\"},children:\" =\"}),n(s.span,{style:{color:\"#C678DD\"},children:\" await\"}),n(s.span,{style:{color:\"#61AFEF\"},children:\" fetch\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),n(s.span,{style:{color:\"#98C379\"},children:\"'https://api.perplexity.ai/chat/completions'\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\", {\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#E06C75\"},children:\"    method\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\": \"}),n(s.span,{style:{color:\"#98C379\"},children:\"'POST'\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#E06C75\"},children:\"    headers\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\": {\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#E06C75\"},children:\"        Authorization\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\": \"}),n(s.span,{style:{color:\"#98C379\"},children:\"`Bearer \"}),n(s.span,{style:{color:\"#C678DD\"},children:\"${\"}),n(s.span,{style:{color:\"#E5C07B\"},children:\"API_KEY\"}),n(s.span,{style:{color:\"#C678DD\"},children:\"}\"}),n(s.span,{style:{color:\"#98C379\"},children:\"`\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#98C379\"},children:\"        'Content-Type'\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\": \"}),n(s.span,{style:{color:\"#98C379\"},children:\"'application/json'\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:n(s.span,{style:{color:\"#ABB2BF\"},children:\"    },\"})}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#E06C75\"},children:\"    body\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\": \"}),n(s.span,{style:{color:\"#E5C07B\"},children:\"JSON\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\".\"}),n(s.span,{style:{color:\"#61AFEF\"},children:\"stringify\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\"({\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#E06C75\"},children:\"        model\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\": \"}),n(s.span,{style:{color:\"#98C379\"},children:\"'sonar'\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#E06C75\"},children:\"        messages\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\": [\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#ABB2BF\"},children:\"            { \"}),n(s.span,{style:{color:\"#E06C75\"},children:\"role\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\": \"}),n(s.span,{style:{color:\"#98C379\"},children:\"'system'\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\", \"}),n(s.span,{style:{color:\"#E06C75\"},children:\"content\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\": \"}),n(s.span,{style:{color:\"#98C379\"},children:\"'請用繁體中文回答，並保持簡潔'\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\" },\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#ABB2BF\"},children:\"            { \"}),n(s.span,{style:{color:\"#E06C75\"},children:\"role\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\": \"}),n(s.span,{style:{color:\"#98C379\"},children:\"'user'\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\", \"}),n(s.span,{style:{color:\"#E06C75\"},children:\"content\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\": \"}),n(s.span,{style:{color:\"#98C379\"},children:\"'最新的 JavaScript 框架趨勢是什麼？'\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\" },\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:n(s.span,{style:{color:\"#ABB2BF\"},children:\"        ],\"})}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#E06C75\"},children:\"        temperature\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\": \"}),n(s.span,{style:{color:\"#D19A66\"},children:\"0.2\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#E06C75\"},children:\"        max_tokens\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\": \"}),n(s.span,{style:{color:\"#D19A66\"},children:\"500\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:n(s.span,{style:{color:\"#ABB2BF\"},children:\"    }),\"})}),\"\\n\",n(s.span,{\"data-line\":\"\",children:n(s.span,{style:{color:\"#ABB2BF\"},children:\"});\"})}),\"\\n\",n(s.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#C678DD\"},children:\"const\"}),n(s.span,{style:{color:\"#E5C07B\"},children:\" data\"}),n(s.span,{style:{color:\"#56B6C2\"},children:\" =\"}),n(s.span,{style:{color:\"#C678DD\"},children:\" await\"}),n(s.span,{style:{color:\"#E5C07B\"},children:\" response\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\".\"}),n(s.span,{style:{color:\"#61AFEF\"},children:\"json\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\"();\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#E5C07B\"},children:\"console\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\".\"}),n(s.span,{style:{color:\"#61AFEF\"},children:\"log\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),n(s.span,{style:{color:\"#E5C07B\"},children:\"data\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\".\"}),n(s.span,{style:{color:\"#E06C75\"},children:\"choices\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\"[\"}),n(s.span,{style:{color:\"#D19A66\"},children:\"0\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\"].\"}),n(s.span,{style:{color:\"#E5C07B\"},children:\"message\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\".\"}),n(s.span,{style:{color:\"#E06C75\"},children:\"content\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\");\"})]})]})})}),\"\\n\",n(s.h2,{children:\"實際整合到專案\"}),\"\\n\",n(s.h3,{children:\"React 元件範例\"}),\"\\n\",n(s.p,{children:\"我做了一個簡單的搜尋元件：\"}),\"\\n\",n(s.figure,{\"data-rehype-pretty-code-figure\":\"\",children:n(s.pre,{style:{backgroundColor:\"#282c34\",color:\"#abb2bf\"},tabIndex:\"0\",rawcontent:\"import { useState } from 'react';\\n\\nconst PerplexitySearch = () => {\\n    const [query, setQuery] = useState('');\\n    const [result, setResult] = useState('');\\n    const [loading, setLoading] = useState(false);\\n\\n    const searchWithPerplexity = async () => {\\n        if (!query.trim()) return;\\n\\n        setLoading(true);\\n        try {\\n            const response = await fetch('/api/perplexity', {\\n                method: 'POST',\\n                headers: { 'Content-Type': 'application/json' },\\n                body: JSON.stringify({ question: query }),\\n            });\\n\\n            const data = await response.json();\\n            setResult(data.answer);\\n        } catch (error) {\\n            console.error('搜尋失敗:', error);\\n        } finally {\\n            setLoading(false);\\n        }\\n    };\\n\\n    return (\\n        <div>\\n            <input\\n                type=\\\"text\\\"\\n                value={query}\\n                onChange={(e) => setQuery(e.target.value)}\\n                placeholder=\\\"問我任何問題...\\\"\\n                onKeyPress={(e) => e.key === 'Enter' && searchWithPerplexity()}\\n            />\\n            <button onClick={searchWithPerplexity} disabled={loading}>\\n                {loading ? '搜尋中...' : '搜尋'}\\n            </button>\\n            {result && (\\n                <div style={{ marginTop: '20px', padding: '15px', border: '1px solid #ccc' }}>\\n                    <div dangerouslySetInnerHTML={{ __html: result }} />\\n                </div>\\n            )}\\n        </div>\\n    );\\n};\",\"data-language\":\"jsx\",\"data-theme\":\"one-dark-pro\",children:e(s.code,{\"data-language\":\"jsx\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#C678DD\"},children:\"import\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\" { \"}),n(s.span,{style:{color:\"#E06C75\"},children:\"useState\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\" } \"}),n(s.span,{style:{color:\"#C678DD\"},children:\"from\"}),n(s.span,{style:{color:\"#98C379\"},children:\" 'react'\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#C678DD\"},children:\"const\"}),n(s.span,{style:{color:\"#61AFEF\"},children:\" PerplexitySearch\"}),n(s.span,{style:{color:\"#56B6C2\"},children:\" =\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\" () \"}),n(s.span,{style:{color:\"#C678DD\"},children:\"=>\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\" {\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#C678DD\"},children:\"    const\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\" [\"}),n(s.span,{style:{color:\"#E5C07B\"},children:\"query\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\", \"}),n(s.span,{style:{color:\"#E5C07B\"},children:\"setQuery\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\"] \"}),n(s.span,{style:{color:\"#56B6C2\"},children:\"=\"}),n(s.span,{style:{color:\"#61AFEF\"},children:\" useState\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),n(s.span,{style:{color:\"#98C379\"},children:\"''\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#C678DD\"},children:\"    const\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\" [\"}),n(s.span,{style:{color:\"#E5C07B\"},children:\"result\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\", \"}),n(s.span,{style:{color:\"#E5C07B\"},children:\"setResult\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\"] \"}),n(s.span,{style:{color:\"#56B6C2\"},children:\"=\"}),n(s.span,{style:{color:\"#61AFEF\"},children:\" useState\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),n(s.span,{style:{color:\"#98C379\"},children:\"''\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#C678DD\"},children:\"    const\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\" [\"}),n(s.span,{style:{color:\"#E5C07B\"},children:\"loading\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\", \"}),n(s.span,{style:{color:\"#E5C07B\"},children:\"setLoading\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\"] \"}),n(s.span,{style:{color:\"#56B6C2\"},children:\"=\"}),n(s.span,{style:{color:\"#61AFEF\"},children:\" useState\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),n(s.span,{style:{color:\"#D19A66\"},children:\"false\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#C678DD\"},children:\"    const\"}),n(s.span,{style:{color:\"#61AFEF\"},children:\" searchWithPerplexity\"}),n(s.span,{style:{color:\"#56B6C2\"},children:\" =\"}),n(s.span,{style:{color:\"#C678DD\"},children:\" async\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\" () \"}),n(s.span,{style:{color:\"#C678DD\"},children:\"=>\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\" {\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#C678DD\"},children:\"        if\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\" (\"}),n(s.span,{style:{color:\"#56B6C2\"},children:\"!\"}),n(s.span,{style:{color:\"#E5C07B\"},children:\"query\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\".\"}),n(s.span,{style:{color:\"#61AFEF\"},children:\"trim\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\"()) \"}),n(s.span,{style:{color:\"#C678DD\"},children:\"return\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#61AFEF\"},children:\"        setLoading\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),n(s.span,{style:{color:\"#D19A66\"},children:\"true\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#C678DD\"},children:\"        try\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\" {\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#C678DD\"},children:\"            const\"}),n(s.span,{style:{color:\"#E5C07B\"},children:\" response\"}),n(s.span,{style:{color:\"#56B6C2\"},children:\" =\"}),n(s.span,{style:{color:\"#C678DD\"},children:\" await\"}),n(s.span,{style:{color:\"#61AFEF\"},children:\" fetch\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),n(s.span,{style:{color:\"#98C379\"},children:\"'/api/perplexity'\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\", {\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#E06C75\"},children:\"                method\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\": \"}),n(s.span,{style:{color:\"#98C379\"},children:\"'POST'\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#E06C75\"},children:\"                headers\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\": { \"}),n(s.span,{style:{color:\"#98C379\"},children:\"'Content-Type'\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\": \"}),n(s.span,{style:{color:\"#98C379\"},children:\"'application/json'\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\" },\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#E06C75\"},children:\"                body\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\": \"}),n(s.span,{style:{color:\"#E5C07B\"},children:\"JSON\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\".\"}),n(s.span,{style:{color:\"#61AFEF\"},children:\"stringify\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\"({ \"}),n(s.span,{style:{color:\"#E06C75\"},children:\"question\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\": \"}),n(s.span,{style:{color:\"#E06C75\"},children:\"query\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\" }),\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:n(s.span,{style:{color:\"#ABB2BF\"},children:\"            });\"})}),\"\\n\",n(s.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#C678DD\"},children:\"            const\"}),n(s.span,{style:{color:\"#E5C07B\"},children:\" data\"}),n(s.span,{style:{color:\"#56B6C2\"},children:\" =\"}),n(s.span,{style:{color:\"#C678DD\"},children:\" await\"}),n(s.span,{style:{color:\"#E5C07B\"},children:\" response\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\".\"}),n(s.span,{style:{color:\"#61AFEF\"},children:\"json\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\"();\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#61AFEF\"},children:\"            setResult\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),n(s.span,{style:{color:\"#E5C07B\"},children:\"data\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\".\"}),n(s.span,{style:{color:\"#E06C75\"},children:\"answer\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#ABB2BF\"},children:\"        } \"}),n(s.span,{style:{color:\"#C678DD\"},children:\"catch\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\" (\"}),n(s.span,{style:{color:\"#E06C75\"},children:\"error\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\") {\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#E5C07B\"},children:\"            console\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\".\"}),n(s.span,{style:{color:\"#61AFEF\"},children:\"error\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),n(s.span,{style:{color:\"#98C379\"},children:\"'搜尋失敗:'\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\", \"}),n(s.span,{style:{color:\"#E06C75\"},children:\"error\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#ABB2BF\"},children:\"        } \"}),n(s.span,{style:{color:\"#C678DD\"},children:\"finally\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\" {\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#61AFEF\"},children:\"            setLoading\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),n(s.span,{style:{color:\"#D19A66\"},children:\"false\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:n(s.span,{style:{color:\"#ABB2BF\"},children:\"        }\"})}),\"\\n\",n(s.span,{\"data-line\":\"\",children:n(s.span,{style:{color:\"#ABB2BF\"},children:\"    };\"})}),\"\\n\",n(s.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#C678DD\"},children:\"    return\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\" (\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#ABB2BF\"},children:\"        <\"}),n(s.span,{style:{color:\"#E06C75\"},children:\"div\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\">\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#ABB2BF\"},children:\"            <\"}),n(s.span,{style:{color:\"#E06C75\"},children:\"input\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#D19A66\",fontStyle:\"italic\"},children:\"                type\"}),n(s.span,{style:{color:\"#56B6C2\"},children:\"=\"}),n(s.span,{style:{color:\"#98C379\"},children:'\"text\"'})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#D19A66\",fontStyle:\"italic\"},children:\"                value\"}),n(s.span,{style:{color:\"#56B6C2\"},children:\"=\"}),n(s.span,{style:{color:\"#C678DD\"},children:\"{\"}),n(s.span,{style:{color:\"#E06C75\"},children:\"query\"}),n(s.span,{style:{color:\"#C678DD\"},children:\"}\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#D19A66\",fontStyle:\"italic\"},children:\"                onChange\"}),n(s.span,{style:{color:\"#56B6C2\"},children:\"=\"}),n(s.span,{style:{color:\"#C678DD\"},children:\"{\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),n(s.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"e\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\") \"}),n(s.span,{style:{color:\"#C678DD\"},children:\"=>\"}),n(s.span,{style:{color:\"#61AFEF\"},children:\" setQuery\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),n(s.span,{style:{color:\"#E5C07B\"},children:\"e\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\".\"}),n(s.span,{style:{color:\"#E5C07B\"},children:\"target\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\".\"}),n(s.span,{style:{color:\"#E06C75\"},children:\"value\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\")\"}),n(s.span,{style:{color:\"#C678DD\"},children:\"}\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#D19A66\",fontStyle:\"italic\"},children:\"                placeholder\"}),n(s.span,{style:{color:\"#56B6C2\"},children:\"=\"}),n(s.span,{style:{color:\"#98C379\"},children:'\"問我任何問題...\"'})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#D19A66\",fontStyle:\"italic\"},children:\"                onKeyPress\"}),n(s.span,{style:{color:\"#56B6C2\"},children:\"=\"}),n(s.span,{style:{color:\"#C678DD\"},children:\"{\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),n(s.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"e\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\") \"}),n(s.span,{style:{color:\"#C678DD\"},children:\"=>\"}),n(s.span,{style:{color:\"#E5C07B\"},children:\" e\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\".\"}),n(s.span,{style:{color:\"#E06C75\"},children:\"key\"}),n(s.span,{style:{color:\"#56B6C2\"},children:\" ===\"}),n(s.span,{style:{color:\"#98C379\"},children:\" 'Enter'\"}),n(s.span,{style:{color:\"#56B6C2\"},children:\" &&\"}),n(s.span,{style:{color:\"#61AFEF\"},children:\" searchWithPerplexity\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\"()\"}),n(s.span,{style:{color:\"#C678DD\"},children:\"}\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:n(s.span,{style:{color:\"#ABB2BF\"},children:\"            />\"})}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#ABB2BF\"},children:\"            <\"}),n(s.span,{style:{color:\"#E06C75\"},children:\"button\"}),n(s.span,{style:{color:\"#D19A66\",fontStyle:\"italic\"},children:\" onClick\"}),n(s.span,{style:{color:\"#56B6C2\"},children:\"=\"}),n(s.span,{style:{color:\"#C678DD\"},children:\"{\"}),n(s.span,{style:{color:\"#E06C75\"},children:\"searchWithPerplexity\"}),n(s.span,{style:{color:\"#C678DD\"},children:\"}\"}),n(s.span,{style:{color:\"#D19A66\",fontStyle:\"italic\"},children:\" disabled\"}),n(s.span,{style:{color:\"#56B6C2\"},children:\"=\"}),n(s.span,{style:{color:\"#C678DD\"},children:\"{\"}),n(s.span,{style:{color:\"#E06C75\"},children:\"loading\"}),n(s.span,{style:{color:\"#C678DD\"},children:\"}\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\">\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#C678DD\"},children:\"                {\"}),n(s.span,{style:{color:\"#E06C75\"},children:\"loading\"}),n(s.span,{style:{color:\"#C678DD\"},children:\" ?\"}),n(s.span,{style:{color:\"#98C379\"},children:\" '搜尋中...'\"}),n(s.span,{style:{color:\"#C678DD\"},children:\" :\"}),n(s.span,{style:{color:\"#98C379\"},children:\" '搜尋'\"}),n(s.span,{style:{color:\"#C678DD\"},children:\"}\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#ABB2BF\"},children:\"            </\"}),n(s.span,{style:{color:\"#E06C75\"},children:\"button\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\">\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#C678DD\"},children:\"            {\"}),n(s.span,{style:{color:\"#E06C75\"},children:\"result\"}),n(s.span,{style:{color:\"#56B6C2\"},children:\" &&\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\" (\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#ABB2BF\"},children:\"                <\"}),n(s.span,{style:{color:\"#E06C75\"},children:\"div\"}),n(s.span,{style:{color:\"#D19A66\",fontStyle:\"italic\"},children:\" style\"}),n(s.span,{style:{color:\"#56B6C2\"},children:\"=\"}),n(s.span,{style:{color:\"#C678DD\"},children:\"{\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\"{ \"}),n(s.span,{style:{color:\"#E06C75\"},children:\"marginTop\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\": \"}),n(s.span,{style:{color:\"#98C379\"},children:\"'20px'\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\", \"}),n(s.span,{style:{color:\"#E06C75\"},children:\"padding\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\": \"}),n(s.span,{style:{color:\"#98C379\"},children:\"'15px'\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\", \"}),n(s.span,{style:{color:\"#E06C75\"},children:\"border\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\": \"}),n(s.span,{style:{color:\"#98C379\"},children:\"'1px solid #ccc'\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\" }\"}),n(s.span,{style:{color:\"#C678DD\"},children:\"}\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\">\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#ABB2BF\"},children:\"                    <\"}),n(s.span,{style:{color:\"#E06C75\"},children:\"div\"}),n(s.span,{style:{color:\"#D19A66\",fontStyle:\"italic\"},children:\" dangerouslySetInnerHTML\"}),n(s.span,{style:{color:\"#56B6C2\"},children:\"=\"}),n(s.span,{style:{color:\"#C678DD\"},children:\"{\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\"{ \"}),n(s.span,{style:{color:\"#E06C75\"},children:\"__html\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\": \"}),n(s.span,{style:{color:\"#E06C75\"},children:\"result\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\" }\"}),n(s.span,{style:{color:\"#C678DD\"},children:\"}\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\" />\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#ABB2BF\"},children:\"                </\"}),n(s.span,{style:{color:\"#E06C75\"},children:\"div\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\">\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#ABB2BF\"},children:\"            )\"}),n(s.span,{style:{color:\"#C678DD\"},children:\"}\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#ABB2BF\"},children:\"        </\"}),n(s.span,{style:{color:\"#E06C75\"},children:\"div\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\">\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:n(s.span,{style:{color:\"#ABB2BF\"},children:\"    );\"})}),\"\\n\",n(s.span,{\"data-line\":\"\",children:n(s.span,{style:{color:\"#ABB2BF\"},children:\"};\"})})]})})}),\"\\n\",n(s.h3,{children:\"Next.js API Route\"}),\"\\n\",n(s.figure,{\"data-rehype-pretty-code-figure\":\"\",children:n(s.pre,{style:{backgroundColor:\"#282c34\",color:\"#abb2bf\"},tabIndex:\"0\",rawcontent:\"// pages/api/perplexity.js (或 app/api/perplexity/route.js)\\nexport default async function handler(req, res) {\\n    if (req.method !== 'POST') {\\n        return res.status(405).json({ error: 'Method not allowed' });\\n    }\\n\\n    const { question } = req.body;\\n\\n    try {\\n        const response = await fetch('https://api.perplexity.ai/chat/completions', {\\n            method: 'POST',\\n            headers: {\\n                Authorization: `Bearer ${process.env.PERPLEXITY_API_KEY}`,\\n                'Content-Type': 'application/json',\\n            },\\n            body: JSON.stringify({\\n                model: 'sonar',\\n                messages: [\\n                    {\\n                        role: 'system',\\n                        content: '請用繁體中文回答，並在回答中包含相關的來源連結',\\n                    },\\n                    { role: 'user', content: question },\\n                ],\\n                temperature: 0.3,\\n                max_tokens: 1000,\\n            }),\\n        });\\n\\n        const data = await response.json();\\n        const answer = data.choices[0].message.content;\\n\\n        res.status(200).json({ answer });\\n    } catch (error) {\\n        console.error('Perplexity API 錯誤:', error);\\n        res.status(500).json({ error: '搜尋服務暫時無法使用' });\\n    }\\n}\",\"data-language\":\"javascript\",\"data-theme\":\"one-dark-pro\",children:e(s.code,{\"data-language\":\"javascript\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[n(s.span,{\"data-line\":\"\",children:n(s.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// pages/api/perplexity.js (或 app/api/perplexity/route.js)\"})}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#C678DD\"},children:\"export\"}),n(s.span,{style:{color:\"#C678DD\"},children:\" default\"}),n(s.span,{style:{color:\"#C678DD\"},children:\" async\"}),n(s.span,{style:{color:\"#C678DD\"},children:\" function\"}),n(s.span,{style:{color:\"#61AFEF\"},children:\" handler\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),n(s.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"req\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\", \"}),n(s.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"res\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\") {\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#C678DD\"},children:\"    if\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\" (\"}),n(s.span,{style:{color:\"#E5C07B\"},children:\"req\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\".\"}),n(s.span,{style:{color:\"#E06C75\"},children:\"method\"}),n(s.span,{style:{color:\"#56B6C2\"},children:\" !==\"}),n(s.span,{style:{color:\"#98C379\"},children:\" 'POST'\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\") {\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#C678DD\"},children:\"        return\"}),n(s.span,{style:{color:\"#E5C07B\"},children:\" res\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\".\"}),n(s.span,{style:{color:\"#61AFEF\"},children:\"status\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),n(s.span,{style:{color:\"#D19A66\"},children:\"405\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\").\"}),n(s.span,{style:{color:\"#61AFEF\"},children:\"json\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\"({ \"}),n(s.span,{style:{color:\"#E06C75\"},children:\"error\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\": \"}),n(s.span,{style:{color:\"#98C379\"},children:\"'Method not allowed'\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\" });\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:n(s.span,{style:{color:\"#ABB2BF\"},children:\"    }\"})}),\"\\n\",n(s.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#C678DD\"},children:\"    const\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\" { \"}),n(s.span,{style:{color:\"#E5C07B\"},children:\"question\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\" } \"}),n(s.span,{style:{color:\"#56B6C2\"},children:\"=\"}),n(s.span,{style:{color:\"#E5C07B\"},children:\" req\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\".\"}),n(s.span,{style:{color:\"#E06C75\"},children:\"body\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#C678DD\"},children:\"    try\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\" {\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#C678DD\"},children:\"        const\"}),n(s.span,{style:{color:\"#E5C07B\"},children:\" response\"}),n(s.span,{style:{color:\"#56B6C2\"},children:\" =\"}),n(s.span,{style:{color:\"#C678DD\"},children:\" await\"}),n(s.span,{style:{color:\"#61AFEF\"},children:\" fetch\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),n(s.span,{style:{color:\"#98C379\"},children:\"'https://api.perplexity.ai/chat/completions'\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\", {\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#E06C75\"},children:\"            method\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\": \"}),n(s.span,{style:{color:\"#98C379\"},children:\"'POST'\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#E06C75\"},children:\"            headers\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\": {\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#E06C75\"},children:\"                Authorization\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\": \"}),n(s.span,{style:{color:\"#98C379\"},children:\"`Bearer \"}),n(s.span,{style:{color:\"#C678DD\"},children:\"${\"}),n(s.span,{style:{color:\"#E5C07B\"},children:\"process\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\".\"}),n(s.span,{style:{color:\"#E5C07B\"},children:\"env\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\".\"}),n(s.span,{style:{color:\"#E06C75\"},children:\"PERPLEXITY_API_KEY\"}),n(s.span,{style:{color:\"#C678DD\"},children:\"}\"}),n(s.span,{style:{color:\"#98C379\"},children:\"`\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#98C379\"},children:\"                'Content-Type'\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\": \"}),n(s.span,{style:{color:\"#98C379\"},children:\"'application/json'\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:n(s.span,{style:{color:\"#ABB2BF\"},children:\"            },\"})}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#E06C75\"},children:\"            body\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\": \"}),n(s.span,{style:{color:\"#E5C07B\"},children:\"JSON\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\".\"}),n(s.span,{style:{color:\"#61AFEF\"},children:\"stringify\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\"({\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#E06C75\"},children:\"                model\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\": \"}),n(s.span,{style:{color:\"#98C379\"},children:\"'sonar'\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#E06C75\"},children:\"                messages\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\": [\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:n(s.span,{style:{color:\"#ABB2BF\"},children:\"                    {\"})}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#E06C75\"},children:\"                        role\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\": \"}),n(s.span,{style:{color:\"#98C379\"},children:\"'system'\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#E06C75\"},children:\"                        content\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\": \"}),n(s.span,{style:{color:\"#98C379\"},children:\"'請用繁體中文回答，並在回答中包含相關的來源連結'\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:n(s.span,{style:{color:\"#ABB2BF\"},children:\"                    },\"})}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#ABB2BF\"},children:\"                    { \"}),n(s.span,{style:{color:\"#E06C75\"},children:\"role\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\": \"}),n(s.span,{style:{color:\"#98C379\"},children:\"'user'\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\", \"}),n(s.span,{style:{color:\"#E06C75\"},children:\"content\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\": \"}),n(s.span,{style:{color:\"#E06C75\"},children:\"question\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\" },\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:n(s.span,{style:{color:\"#ABB2BF\"},children:\"                ],\"})}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#E06C75\"},children:\"                temperature\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\": \"}),n(s.span,{style:{color:\"#D19A66\"},children:\"0.3\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#E06C75\"},children:\"                max_tokens\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\": \"}),n(s.span,{style:{color:\"#D19A66\"},children:\"1000\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:n(s.span,{style:{color:\"#ABB2BF\"},children:\"            }),\"})}),\"\\n\",n(s.span,{\"data-line\":\"\",children:n(s.span,{style:{color:\"#ABB2BF\"},children:\"        });\"})}),\"\\n\",n(s.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#C678DD\"},children:\"        const\"}),n(s.span,{style:{color:\"#E5C07B\"},children:\" data\"}),n(s.span,{style:{color:\"#56B6C2\"},children:\" =\"}),n(s.span,{style:{color:\"#C678DD\"},children:\" await\"}),n(s.span,{style:{color:\"#E5C07B\"},children:\" response\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\".\"}),n(s.span,{style:{color:\"#61AFEF\"},children:\"json\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\"();\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#C678DD\"},children:\"        const\"}),n(s.span,{style:{color:\"#E5C07B\"},children:\" answer\"}),n(s.span,{style:{color:\"#56B6C2\"},children:\" =\"}),n(s.span,{style:{color:\"#E5C07B\"},children:\" data\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\".\"}),n(s.span,{style:{color:\"#E06C75\"},children:\"choices\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\"[\"}),n(s.span,{style:{color:\"#D19A66\"},children:\"0\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\"].\"}),n(s.span,{style:{color:\"#E5C07B\"},children:\"message\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\".\"}),n(s.span,{style:{color:\"#E06C75\"},children:\"content\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#E5C07B\"},children:\"        res\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\".\"}),n(s.span,{style:{color:\"#61AFEF\"},children:\"status\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),n(s.span,{style:{color:\"#D19A66\"},children:\"200\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\").\"}),n(s.span,{style:{color:\"#61AFEF\"},children:\"json\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\"({ \"}),n(s.span,{style:{color:\"#E06C75\"},children:\"answer\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\" });\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#ABB2BF\"},children:\"    } \"}),n(s.span,{style:{color:\"#C678DD\"},children:\"catch\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\" (\"}),n(s.span,{style:{color:\"#E06C75\"},children:\"error\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\") {\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#E5C07B\"},children:\"        console\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\".\"}),n(s.span,{style:{color:\"#61AFEF\"},children:\"error\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),n(s.span,{style:{color:\"#98C379\"},children:\"'Perplexity API 錯誤:'\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\", \"}),n(s.span,{style:{color:\"#E06C75\"},children:\"error\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),\"\\n\",e(s.span,{\"data-line\":\"\",children:[n(s.span,{style:{color:\"#E5C07B\"},children:\"        res\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\".\"}),n(s.span,{style:{color:\"#61AFEF\"},children:\"status\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),n(s.span,{style:{color:\"#D19A66\"},children:\"500\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\").\"}),n(s.span,{style:{color:\"#61AFEF\"},children:\"json\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\"({ \"}),n(s.span,{style:{color:\"#E06C75\"},children:\"error\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\": \"}),n(s.span,{style:{color:\"#98C379\"},children:\"'搜尋服務暫時無法使用'\"}),n(s.span,{style:{color:\"#ABB2BF\"},children:\" });\"})]}),\"\\n\",n(s.span,{\"data-line\":\"\",children:n(s.span,{style:{color:\"#ABB2BF\"},children:\"    }\"})}),\"\\n\",n(s.span,{\"data-line\":\"\",children:n(s.span,{style:{color:\"#ABB2BF\"},children:\"}\"})})]})})}),\"\\n\",n(s.h2,{children:\"參數調整技巧\"}),\"\\n\",n(s.p,{children:\"我花了不少時間調整這些參數，分享一下心得：\"}),\"\\n\",n(s.h3,{children:\"temperature (創造性)\"}),\"\\n\",e(s.ul,{children:[\"\\n\",e(s.li,{children:[n(s.code,{children:\"0.1-0.3\"}),\": 回答比較精準，適合資訊查詢\"]}),\"\\n\",e(s.li,{children:[n(s.code,{children:\"0.5-0.7\"}),\": 回答比較有創意，適合創作類任務\"]}),\"\\n\",e(s.li,{children:[n(s.code,{children:\"0.8+\"}),\": 回答很有創意但可能不太準確\"]}),\"\\n\"]}),\"\\n\",n(s.h3,{children:\"max_tokens (回應長度)\"}),\"\\n\",e(s.ul,{children:[\"\\n\",e(s.li,{children:[n(s.code,{children:\"100-300\"}),\": 簡短回答\"]}),\"\\n\",e(s.li,{children:[n(s.code,{children:\"500-1000\"}),\": 一般詳細度\"]}),\"\\n\",e(s.li,{children:[n(s.code,{children:\"1000+\"}),\": 很詳細的回答\"]}),\"\\n\"]}),\"\\n\",n(s.h3,{children:\"search_recency_filter (時效性)\"}),\"\\n\",e(s.ul,{children:[\"\\n\",e(s.li,{children:[n(s.code,{children:\"hour\"}),\": 只搜尋一小時內的資訊\"]}),\"\\n\",e(s.li,{children:[n(s.code,{children:\"day\"}),\": 一天內\"]}),\"\\n\",e(s.li,{children:[n(s.code,{children:\"week\"}),\": 一週內\"]}),\"\\n\",e(s.li,{children:[n(s.code,{children:\"month\"}),\": 一個月內\"]}),\"\\n\"]}),\"\\n\",n(s.h2,{children:\"我做的測試工具\"}),\"\\n\",e(s.p,{children:[\"為了方便測試不同參數，我做了一個簡單的測試工具：\\r\\n\",n(s.a,{href:\"https://garylin0969-perplexity-concat.vercel.app/\",children:\"Perplexity API 參數測試工具\"})]}),\"\\n\",n(s.p,{children:\"可以即時調整參數看效果，對新手很有幫助。\"})]})}return{default:function(l={}){const{wrapper:e}=l.components||{};return e?n(e,{...l,children:n(_createMdxContent,{...l})}):_createMdxContent(l)}};",
    "permalink": "/blog/posts/ai-integration-guide-perplexity-api"
  },
  {
    "title": "多國語言支持指南 - 使用 next-intl 在 Next.js 中實現國際化",
    "date": "2025-02-12T00:00:00.000Z",
    "description": "之前看到一個關於投胎的趣味網站，可以看要投胎幾次才到台灣，其中又有幾次會投胎到中國，我覺得蠻好玩的，所以參照他做了一個支援繁體中文、簡體中文、英文的版本。",
    "rawContent": "## 為什麼我需要做國際化？\r\n\r\n純粹是看到一個叫 [投胎抽卡機](https://dweam.xyz/luck) 的網站很有趣，它的功能是可以重複投胎讓你看看投胎了幾次才能到台灣，其中又有幾次會是中國，我覺得很有趣，所以就參照它的功能做了一個多國語言版本的，同時增加了印度的次數，畢竟印度跟中國都是人口大國阿哈哈，成品在這 [Life Restart](https://garylin0969-life-restart.vercel.app/en)。\r\n\r\n結果一研究才發現，國際化(i18n)要考慮的東西超多：\r\n\r\n- 文字翻譯當然是基本的\r\n- URL 路由要支援語言切換\r\n- 日期時間格式不同國家不一樣 (但我這次要做的專案不需要擔心XD)\r\n- 數字顯示格式也有差異 (我這次也沒特別針對這個進行就是了)\r\n- 甚至連文字方向都可能不同\r\n\r\n試了幾個方案後，發現 **next-intl** 最適合 Next.js 的 App Router，設定簡單又功能完整。\r\n\r\n## 什麼是 next-intl？\r\n\r\n**next-intl** 是專門為 Next.js 設計的國際化解決方案，跟 Next.js 13+ 的 App Router 整合得很好。\r\n\r\n**為什麼選擇它？**\r\n\r\n- **無縫整合**：跟 Next.js 配合得天衣無縫\r\n- **效能優秀**：支援 SSG 和 SSR，不影響載入速度 (官方說法，我覺得其實有變慢)\r\n- **路由靈活**：可以用 /en/about 或 en.example.com 這種方式\r\n- **功能豐富**：不只翻譯，連日期、數字格式化都內建\r\n\r\n最重要的是我覺得對於開發多國語言功能的新手也很容易上手啦！\r\n\r\n## 開始設定 next-intl\r\n\r\n### 1. 安裝套件\r\n\r\n```bash\r\npnpm install next-intl\r\n```\r\n\r\n### 2. 建立檔案結構\r\n\r\n我建議按照這個結構來組織：\r\n\r\n```plaintext\r\n├── messages/          # 翻譯文件\r\n│   ├── en.json\r\n│   └── zh-TW.json\r\n├── src/\r\n│   ├── i18n/\r\n│   │   ├── routing.ts    # 路由設定\r\n│   │   └── request.ts    # 請求設定\r\n│   ├── middleware.ts     # 中間件\r\n│   └── app/\r\n│       └── [locale]/     # 動態語言路由\r\n```\r\n\r\n### 3. 建立翻譯檔案\r\n\r\n先建立最基本的翻譯文件：\r\n\r\n```json title=\"messages/en.json\"\r\n{\r\n    \"HomePage\": {\r\n        \"title\": \"Welcome to my website\",\r\n        \"description\": \"This is a multilingual website\",\r\n        \"nav\": {\r\n            \"home\": \"Home\",\r\n            \"about\": \"About\",\r\n            \"contact\": \"Contact\"\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n```json title=\"messages/zh-TW.json\"\r\n{\r\n    \"HomePage\": {\r\n        \"title\": \"歡迎來到我的網站\",\r\n        \"description\": \"這是一個多語言網站\",\r\n        \"nav\": {\r\n            \"home\": \"首頁\",\r\n            \"about\": \"關於我們\",\r\n            \"contact\": \"聯絡我們\"\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n### 4. 設定路由配置\r\n\r\n```typescript title=\"src/i18n/routing.ts\"\r\nimport { createNavigation } from 'next-intl/navigation';\r\nimport { defineRouting } from 'next-intl/routing';\r\n\r\nexport const routing = defineRouting({\r\n    locales: ['en', 'zh-TW'],\r\n    defaultLocale: 'zh-TW', // 我的網站主要還是面向台灣用戶\r\n});\r\n\r\nexport const { Link, redirect, usePathname, useRouter, getPathname } = createNavigation(routing);\r\n```\r\n\r\n### 5. 設定中間件\r\n\r\n```typescript title=\"src/middleware.ts\"\r\nimport createMiddleware from 'next-intl/middleware';\r\nimport { routing } from './i18n/routing';\r\n\r\nexport default createMiddleware(routing);\r\n\r\nexport const config = {\r\n    matcher: ['/((?!api|_next/static|favicon.ico).*)'],\r\n};\r\n```\r\n\r\n### 6. 設定請求配置\r\n\r\n```typescript title=\"src/i18n/request.ts\"\r\nimport { getRequestConfig } from 'next-intl/server';\r\nimport { routing } from './routing';\r\n\r\nexport default getRequestConfig(async ({ requestLocale }) => {\r\n    let locale = await requestLocale;\r\n\r\n    // 確保語言是支援的\r\n    if (!locale || !routing.locales.includes(locale as any)) {\r\n        locale = routing.defaultLocale;\r\n    }\r\n\r\n    return {\r\n        locale,\r\n        messages: (await import(`../../messages/${locale}.json`)).default,\r\n    };\r\n});\r\n```\r\n\r\n## 修改 Next.js 設定\r\n\r\n```typescript title=\"next.config.ts\"\r\nimport createNextIntlPlugin from 'next-intl/plugin';\r\n\r\nconst withNextIntl = createNextIntlPlugin();\r\n\r\n/** @type {import('next').NextConfig} */\r\nconst nextConfig = {\r\n    // 你原本的設定\r\n};\r\n\r\nexport default withNextIntl(nextConfig);\r\n```\r\n\r\n## 建立多語言頁面\r\n\r\n### Layout 設定\r\n\r\n```typescript title=\"src/app/[locale]/layout.tsx\"\r\nimport { NextIntlClientProvider } from 'next-intl';\r\nimport { getMessages } from 'next-intl/server';\r\nimport { notFound } from 'next/navigation';\r\nimport { routing } from '@/i18n/routing';\r\n\r\nexport function generateStaticParams() {\r\n    return routing.locales.map((locale) => ({ locale }));\r\n}\r\n\r\nexport default async function LocaleLayout({\r\n    children,\r\n    params: { locale }\r\n}: {\r\n    children: React.ReactNode;\r\n    params: { locale: string };\r\n}) {\r\n    // 檢查語言是否支援\r\n    if (!routing.locales.includes(locale as any)) {\r\n        notFound();\r\n    }\r\n\r\n    const messages = await getMessages();\r\n\r\n    return (\r\n        <html lang={locale}>\r\n            <body>\r\n                <NextIntlClientProvider messages={messages}>\r\n                    {children}\r\n                </NextIntlClientProvider>\r\n            </body>\r\n        </html>\r\n    );\r\n}\r\n```\r\n\r\n### 主頁面\r\n\r\n```typescript title=\"src/app/[locale]/page.tsx\"\r\nimport { useTranslations } from 'next-intl';\r\nimport { Link } from '@/i18n/routing';\r\n\r\nexport default function HomePage() {\r\n    const t = useTranslations('HomePage');\r\n\r\n    return (\r\n        <div>\r\n            <nav>\r\n                <Link href=\"/\">{t('nav.home')}</Link>\r\n                <Link href=\"/about\">{t('nav.about')}</Link>\r\n                <Link href=\"/contact\">{t('nav.contact')}</Link>\r\n            </nav>\r\n\r\n            <main>\r\n                <h1>{t('title')}</h1>\r\n                <p>{t('description')}</p>\r\n            </main>\r\n        </div>\r\n    );\r\n}\r\n```\r\n\r\n## 建立語言切換器\r\n\r\n```typescript title=\"src/components/LanguageSwitcher.tsx\"\r\n'use client';\r\n\r\nimport { useLocale } from 'next-intl';\r\nimport { useRouter, usePathname } from '@/i18n/routing';\r\n\r\nexport default function LanguageSwitcher() {\r\n    const locale = useLocale();\r\n    const router = useRouter();\r\n    const pathname = usePathname();\r\n\r\n    const languages = [\r\n        { code: 'zh-TW', name: '繁體中文' },\r\n        { code: 'en', name: 'English' }\r\n    ];\r\n\r\n    const handleLanguageChange = (newLocale: string) => {\r\n        router.replace(pathname, { locale: newLocale });\r\n    };\r\n\r\n    return (\r\n        <select\r\n            value={locale}\r\n            onChange={(e) => handleLanguageChange(e.target.value)}\r\n            className=\"border rounded px-3 py-1\"\r\n        >\r\n            {languages.map((lang) => (\r\n                <option key={lang.code} value={lang.code}>\r\n                    {lang.name}\r\n                </option>\r\n            ))}\r\n        </select>\r\n    );\r\n}\r\n```\r\n\r\n## 進階功能\r\n\r\n### 日期時間格式化\r\n\r\n```typescript\r\nimport { useFormatter } from 'next-intl';\r\n\r\nexport default function DateExample() {\r\n    const format = useFormatter();\r\n    const now = new Date();\r\n\r\n    return (\r\n        <div>\r\n            <p>日期: {format.dateTime(now, {\r\n                year: 'numeric',\r\n                month: 'long',\r\n                day: 'numeric'\r\n            })}</p>\r\n        </div>\r\n    );\r\n}\r\n```\r\n\r\n### 數字格式化\r\n\r\n```typescript\r\nimport { useFormatter } from 'next-intl';\r\n\r\nexport default function NumberExample() {\r\n    const format = useFormatter();\r\n    const price = 1234.56;\r\n\r\n    return (\r\n        <div>\r\n            <p>價格: {format.number(price, {\r\n                style: 'currency',\r\n                currency: 'TWD'\r\n            })}</p>\r\n        </div>\r\n    );\r\n}\r\n```\r\n\r\n### 帶變數的翻譯\r\n\r\n```json title=\"messages/zh-TW.json\"\r\n{\r\n    \"UserProfile\": {\r\n        \"welcome\": \"歡迎回來，{name}！\",\r\n        \"itemCount\": \"您有 {count} 個商品\"\r\n    }\r\n}\r\n```\r\n\r\n```typescript\r\nconst t = useTranslations('UserProfile');\r\n\r\n// 使用方式\r\n<p>{t('welcome', { name: '小明' })}</p>\r\n<p>{t('itemCount', { count: 5 })}</p>\r\n```\r\n\r\n## 部署注意事項\r\n\r\n### Vercel 部署\r\n\r\n在 `vercel.json` 中加入：\r\n\r\n```json\r\n{\r\n    \"functions\": {\r\n        \"app/[locale]/route.ts\": {\r\n            \"maxDuration\": 10\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n### 環境變數\r\n\r\n```bash\r\n# .env.local\r\nNEXT_PUBLIC_DEFAULT_LOCALE=zh-TW\r\n```\r\n\r\n## SEO 優化\r\n\r\n別忘記設定每個語言的 metadata：\r\n\r\n```typescript title=\"src/app/[locale]/page.tsx\"\r\nimport { getTranslations } from 'next-intl/server';\r\n\r\nexport async function generateMetadata({ params: { locale } }: { params: { locale: string } }) {\r\n    const t = await getTranslations({ locale, namespace: 'HomePage' });\r\n\r\n    return {\r\n        title: t('title'),\r\n        description: t('description'),\r\n    };\r\n}\r\n```\r\n\r\n## 維護建議\r\n\r\n### 翻譯文件管理\r\n\r\n我建議用這種方式組織翻譯：\r\n\r\n```json\r\n{\r\n    \"common\": {\r\n        \"buttons\": {\r\n            \"save\": \"儲存\",\r\n            \"cancel\": \"取消\"\r\n        }\r\n    },\r\n    \"pages\": {\r\n        \"home\": { ... },\r\n        \"about\": { ... }\r\n    }\r\n}\r\n```",
    "category": "Code",
    "tags": [
      "Next.js",
      "i18n",
      "next-intl"
    ],
    "image": "/blog/posts/2025/02/next-intl.png",
    "headings": [
      {
        "level": 2,
        "text": "為什麼我需要做國際化？"
      },
      {
        "level": 2,
        "text": "什麼是 next-intl？"
      },
      {
        "level": 2,
        "text": "開始設定 next-intl"
      },
      {
        "level": 3,
        "text": "1. 安裝套件"
      },
      {
        "level": 3,
        "text": "2. 建立檔案結構"
      },
      {
        "level": 3,
        "text": "3. 建立翻譯檔案"
      },
      {
        "level": 3,
        "text": "4. 設定路由配置"
      },
      {
        "level": 3,
        "text": "5. 設定中間件"
      },
      {
        "level": 3,
        "text": "6. 設定請求配置"
      },
      {
        "level": 2,
        "text": "修改 Next.js 設定"
      },
      {
        "level": 2,
        "text": "建立多語言頁面"
      },
      {
        "level": 3,
        "text": "Layout 設定"
      },
      {
        "level": 3,
        "text": "主頁面"
      },
      {
        "level": 2,
        "text": "建立語言切換器"
      },
      {
        "level": 2,
        "text": "進階功能"
      },
      {
        "level": 3,
        "text": "日期時間格式化"
      },
      {
        "level": 3,
        "text": "數字格式化"
      },
      {
        "level": 3,
        "text": "帶變數的翻譯"
      },
      {
        "level": 2,
        "text": "部署注意事項"
      },
      {
        "level": 3,
        "text": "Vercel 部署"
      },
      {
        "level": 3,
        "text": "環境變數"
      },
      {
        "level": 2,
        "text": "SEO 優化"
      },
      {
        "level": 2,
        "text": "維護建議"
      },
      {
        "level": 3,
        "text": "翻譯文件管理"
      }
    ],
    "slug": "nextjs-internationalization-guide-next-intl",
    "code": "const{Fragment:n,jsx:l,jsxs:e}=arguments[0];function _createMdxContent(r){const a={a:\"a\",code:\"code\",figcaption:\"figcaption\",figure:\"figure\",h2:\"h2\",h3:\"h3\",li:\"li\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...r.components};return e(n,{children:[l(a.h2,{children:\"為什麼我需要做國際化？\"}),\"\\n\",e(a.p,{children:[\"純粹是看到一個叫 \",l(a.a,{href:\"https://dweam.xyz/luck\",children:\"投胎抽卡機\"}),\" 的網站很有趣，它的功能是可以重複投胎讓你看看投胎了幾次才能到台灣，其中又有幾次會是中國，我覺得很有趣，所以就參照它的功能做了一個多國語言版本的，同時增加了印度的次數，畢竟印度跟中國都是人口大國阿哈哈，成品在這 \",l(a.a,{href:\"https://garylin0969-life-restart.vercel.app/en\",children:\"Life Restart\"}),\"。\"]}),\"\\n\",l(a.p,{children:\"結果一研究才發現，國際化(i18n)要考慮的東西超多：\"}),\"\\n\",e(a.ul,{children:[\"\\n\",l(a.li,{children:\"文字翻譯當然是基本的\"}),\"\\n\",l(a.li,{children:\"URL 路由要支援語言切換\"}),\"\\n\",l(a.li,{children:\"日期時間格式不同國家不一樣 (但我這次要做的專案不需要擔心XD)\"}),\"\\n\",l(a.li,{children:\"數字顯示格式也有差異 (我這次也沒特別針對這個進行就是了)\"}),\"\\n\",l(a.li,{children:\"甚至連文字方向都可能不同\"}),\"\\n\"]}),\"\\n\",e(a.p,{children:[\"試了幾個方案後，發現 \",l(a.strong,{children:\"next-intl\"}),\" 最適合 Next.js 的 App Router，設定簡單又功能完整。\"]}),\"\\n\",l(a.h2,{children:\"什麼是 next-intl？\"}),\"\\n\",e(a.p,{children:[l(a.strong,{children:\"next-intl\"}),\" 是專門為 Next.js 設計的國際化解決方案，跟 Next.js 13+ 的 App Router 整合得很好。\"]}),\"\\n\",l(a.p,{children:l(a.strong,{children:\"為什麼選擇它？\"})}),\"\\n\",e(a.ul,{children:[\"\\n\",e(a.li,{children:[l(a.strong,{children:\"無縫整合\"}),\"：跟 Next.js 配合得天衣無縫\"]}),\"\\n\",e(a.li,{children:[l(a.strong,{children:\"效能優秀\"}),\"：支援 SSG 和 SSR，不影響載入速度 (官方說法，我覺得其實有變慢)\"]}),\"\\n\",e(a.li,{children:[l(a.strong,{children:\"路由靈活\"}),\"：可以用 /en/about 或 en.example.com 這種方式\"]}),\"\\n\",e(a.li,{children:[l(a.strong,{children:\"功能豐富\"}),\"：不只翻譯，連日期、數字格式化都內建\"]}),\"\\n\"]}),\"\\n\",l(a.p,{children:\"最重要的是我覺得對於開發多國語言功能的新手也很容易上手啦！\"}),\"\\n\",l(a.h2,{children:\"開始設定 next-intl\"}),\"\\n\",l(a.h3,{children:\"1. 安裝套件\"}),\"\\n\",l(a.figure,{\"data-rehype-pretty-code-figure\":\"\",children:l(a.pre,{style:{backgroundColor:\"#282c34\",color:\"#abb2bf\"},tabIndex:\"0\",rawcontent:\"pnpm install next-intl\",\"data-language\":\"bash\",\"data-theme\":\"one-dark-pro\",children:l(a.code,{\"data-language\":\"bash\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#61AFEF\"},children:\"pnpm\"}),l(a.span,{style:{color:\"#98C379\"},children:\" install\"}),l(a.span,{style:{color:\"#98C379\"},children:\" next-intl\"})]})})})}),\"\\n\",l(a.h3,{children:\"2. 建立檔案結構\"}),\"\\n\",l(a.p,{children:\"我建議按照這個結構來組織：\"}),\"\\n\",l(a.figure,{\"data-rehype-pretty-code-figure\":\"\",children:l(a.pre,{style:{backgroundColor:\"#282c34\",color:\"#abb2bf\"},tabIndex:\"0\",rawcontent:\"├── messages/          # 翻譯文件\\n│   ├── en.json\\n│   └── zh-TW.json\\n├── src/\\n│   ├── i18n/\\n│   │   ├── routing.ts    # 路由設定\\n│   │   └── request.ts    # 請求設定\\n│   ├── middleware.ts     # 中間件\\n│   └── app/\\n│       └── [locale]/     # 動態語言路由\",\"data-language\":\"plaintext\",\"data-theme\":\"one-dark-pro\",children:e(a.code,{\"data-language\":\"plaintext\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[l(a.span,{\"data-line\":\"\",children:l(a.span,{children:\"├── messages/          # 翻譯文件\"})}),\"\\n\",l(a.span,{\"data-line\":\"\",children:l(a.span,{children:\"│   ├── en.json\"})}),\"\\n\",l(a.span,{\"data-line\":\"\",children:l(a.span,{children:\"│   └── zh-TW.json\"})}),\"\\n\",l(a.span,{\"data-line\":\"\",children:l(a.span,{children:\"├── src/\"})}),\"\\n\",l(a.span,{\"data-line\":\"\",children:l(a.span,{children:\"│   ├── i18n/\"})}),\"\\n\",l(a.span,{\"data-line\":\"\",children:l(a.span,{children:\"│   │   ├── routing.ts    # 路由設定\"})}),\"\\n\",l(a.span,{\"data-line\":\"\",children:l(a.span,{children:\"│   │   └── request.ts    # 請求設定\"})}),\"\\n\",l(a.span,{\"data-line\":\"\",children:l(a.span,{children:\"│   ├── middleware.ts     # 中間件\"})}),\"\\n\",l(a.span,{\"data-line\":\"\",children:l(a.span,{children:\"│   └── app/\"})}),\"\\n\",l(a.span,{\"data-line\":\"\",children:l(a.span,{children:\"│       └── [locale]/     # 動態語言路由\"})})]})})}),\"\\n\",l(a.h3,{children:\"3. 建立翻譯檔案\"}),\"\\n\",l(a.p,{children:\"先建立最基本的翻譯文件：\"}),\"\\n\",e(a.figure,{\"data-rehype-pretty-code-figure\":\"\",children:[l(a.figcaption,{\"data-rehype-pretty-code-title\":\"\",\"data-language\":\"json\",\"data-theme\":\"one-dark-pro\",children:\"messages/en.json\"}),l(a.pre,{style:{backgroundColor:\"#282c34\",color:\"#abb2bf\"},tabIndex:\"0\",rawcontent:'{\\n    \"HomePage\": {\\n        \"title\": \"Welcome to my website\",\\n        \"description\": \"This is a multilingual website\",\\n        \"nav\": {\\n            \"home\": \"Home\",\\n            \"about\": \"About\",\\n            \"contact\": \"Contact\"\\n        }\\n    }\\n}',\"data-language\":\"json\",\"data-theme\":\"one-dark-pro\",children:e(a.code,{\"data-language\":\"json\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[l(a.span,{\"data-line\":\"\",children:l(a.span,{style:{color:\"#ABB2BF\"},children:\"{\"})}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#E06C75\"},children:'    \"HomePage\"'}),l(a.span,{style:{color:\"#ABB2BF\"},children:\": {\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#E06C75\"},children:'        \"title\"'}),l(a.span,{style:{color:\"#ABB2BF\"},children:\": \"}),l(a.span,{style:{color:\"#98C379\"},children:'\"Welcome to my website\"'}),l(a.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#E06C75\"},children:'        \"description\"'}),l(a.span,{style:{color:\"#ABB2BF\"},children:\": \"}),l(a.span,{style:{color:\"#98C379\"},children:'\"This is a multilingual website\"'}),l(a.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#E06C75\"},children:'        \"nav\"'}),l(a.span,{style:{color:\"#ABB2BF\"},children:\": {\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#E06C75\"},children:'            \"home\"'}),l(a.span,{style:{color:\"#ABB2BF\"},children:\": \"}),l(a.span,{style:{color:\"#98C379\"},children:'\"Home\"'}),l(a.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#E06C75\"},children:'            \"about\"'}),l(a.span,{style:{color:\"#ABB2BF\"},children:\": \"}),l(a.span,{style:{color:\"#98C379\"},children:'\"About\"'}),l(a.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#E06C75\"},children:'            \"contact\"'}),l(a.span,{style:{color:\"#ABB2BF\"},children:\": \"}),l(a.span,{style:{color:\"#98C379\"},children:'\"Contact\"'})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:l(a.span,{style:{color:\"#ABB2BF\"},children:\"        }\"})}),\"\\n\",l(a.span,{\"data-line\":\"\",children:l(a.span,{style:{color:\"#ABB2BF\"},children:\"    }\"})}),\"\\n\",l(a.span,{\"data-line\":\"\",children:l(a.span,{style:{color:\"#ABB2BF\"},children:\"}\"})})]})})]}),\"\\n\",e(a.figure,{\"data-rehype-pretty-code-figure\":\"\",children:[l(a.figcaption,{\"data-rehype-pretty-code-title\":\"\",\"data-language\":\"json\",\"data-theme\":\"one-dark-pro\",children:\"messages/zh-TW.json\"}),l(a.pre,{style:{backgroundColor:\"#282c34\",color:\"#abb2bf\"},tabIndex:\"0\",rawcontent:'{\\n    \"HomePage\": {\\n        \"title\": \"歡迎來到我的網站\",\\n        \"description\": \"這是一個多語言網站\",\\n        \"nav\": {\\n            \"home\": \"首頁\",\\n            \"about\": \"關於我們\",\\n            \"contact\": \"聯絡我們\"\\n        }\\n    }\\n}',\"data-language\":\"json\",\"data-theme\":\"one-dark-pro\",children:e(a.code,{\"data-language\":\"json\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[l(a.span,{\"data-line\":\"\",children:l(a.span,{style:{color:\"#ABB2BF\"},children:\"{\"})}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#E06C75\"},children:'    \"HomePage\"'}),l(a.span,{style:{color:\"#ABB2BF\"},children:\": {\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#E06C75\"},children:'        \"title\"'}),l(a.span,{style:{color:\"#ABB2BF\"},children:\": \"}),l(a.span,{style:{color:\"#98C379\"},children:'\"歡迎來到我的網站\"'}),l(a.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#E06C75\"},children:'        \"description\"'}),l(a.span,{style:{color:\"#ABB2BF\"},children:\": \"}),l(a.span,{style:{color:\"#98C379\"},children:'\"這是一個多語言網站\"'}),l(a.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#E06C75\"},children:'        \"nav\"'}),l(a.span,{style:{color:\"#ABB2BF\"},children:\": {\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#E06C75\"},children:'            \"home\"'}),l(a.span,{style:{color:\"#ABB2BF\"},children:\": \"}),l(a.span,{style:{color:\"#98C379\"},children:'\"首頁\"'}),l(a.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#E06C75\"},children:'            \"about\"'}),l(a.span,{style:{color:\"#ABB2BF\"},children:\": \"}),l(a.span,{style:{color:\"#98C379\"},children:'\"關於我們\"'}),l(a.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#E06C75\"},children:'            \"contact\"'}),l(a.span,{style:{color:\"#ABB2BF\"},children:\": \"}),l(a.span,{style:{color:\"#98C379\"},children:'\"聯絡我們\"'})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:l(a.span,{style:{color:\"#ABB2BF\"},children:\"        }\"})}),\"\\n\",l(a.span,{\"data-line\":\"\",children:l(a.span,{style:{color:\"#ABB2BF\"},children:\"    }\"})}),\"\\n\",l(a.span,{\"data-line\":\"\",children:l(a.span,{style:{color:\"#ABB2BF\"},children:\"}\"})})]})})]}),\"\\n\",l(a.h3,{children:\"4. 設定路由配置\"}),\"\\n\",e(a.figure,{\"data-rehype-pretty-code-figure\":\"\",children:[l(a.figcaption,{\"data-rehype-pretty-code-title\":\"\",\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",children:\"src/i18n/routing.ts\"}),l(a.pre,{style:{backgroundColor:\"#282c34\",color:\"#abb2bf\"},tabIndex:\"0\",rawcontent:\"import { createNavigation } from 'next-intl/navigation';\\nimport { defineRouting } from 'next-intl/routing';\\n\\nexport const routing = defineRouting({\\n    locales: ['en', 'zh-TW'],\\n    defaultLocale: 'zh-TW', // 我的網站主要還是面向台灣用戶\\n});\\n\\nexport const { Link, redirect, usePathname, useRouter, getPathname } = createNavigation(routing);\",\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",children:e(a.code,{\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#C678DD\"},children:\"import\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\" { \"}),l(a.span,{style:{color:\"#E06C75\"},children:\"createNavigation\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\" } \"}),l(a.span,{style:{color:\"#C678DD\"},children:\"from\"}),l(a.span,{style:{color:\"#98C379\"},children:\" 'next-intl/navigation'\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#C678DD\"},children:\"import\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\" { \"}),l(a.span,{style:{color:\"#E06C75\"},children:\"defineRouting\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\" } \"}),l(a.span,{style:{color:\"#C678DD\"},children:\"from\"}),l(a.span,{style:{color:\"#98C379\"},children:\" 'next-intl/routing'\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#C678DD\"},children:\"export\"}),l(a.span,{style:{color:\"#C678DD\"},children:\" const\"}),l(a.span,{style:{color:\"#E5C07B\"},children:\" routing\"}),l(a.span,{style:{color:\"#56B6C2\"},children:\" =\"}),l(a.span,{style:{color:\"#61AFEF\"},children:\" defineRouting\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\"({\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#E06C75\"},children:\"    locales\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\": [\"}),l(a.span,{style:{color:\"#98C379\"},children:\"'en'\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\", \"}),l(a.span,{style:{color:\"#98C379\"},children:\"'zh-TW'\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\"],\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#E06C75\"},children:\"    defaultLocale\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\": \"}),l(a.span,{style:{color:\"#98C379\"},children:\"'zh-TW'\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\", \"}),l(a.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// 我的網站主要還是面向台灣用戶\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:l(a.span,{style:{color:\"#ABB2BF\"},children:\"});\"})}),\"\\n\",l(a.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#C678DD\"},children:\"export\"}),l(a.span,{style:{color:\"#C678DD\"},children:\" const\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\" { \"}),l(a.span,{style:{color:\"#E5C07B\"},children:\"Link\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\", \"}),l(a.span,{style:{color:\"#E5C07B\"},children:\"redirect\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\", \"}),l(a.span,{style:{color:\"#E5C07B\"},children:\"usePathname\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\", \"}),l(a.span,{style:{color:\"#E5C07B\"},children:\"useRouter\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\", \"}),l(a.span,{style:{color:\"#E5C07B\"},children:\"getPathname\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\" } \"}),l(a.span,{style:{color:\"#56B6C2\"},children:\"=\"}),l(a.span,{style:{color:\"#61AFEF\"},children:\" createNavigation\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),l(a.span,{style:{color:\"#E06C75\"},children:\"routing\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\");\"})]})]})})]}),\"\\n\",l(a.h3,{children:\"5. 設定中間件\"}),\"\\n\",e(a.figure,{\"data-rehype-pretty-code-figure\":\"\",children:[l(a.figcaption,{\"data-rehype-pretty-code-title\":\"\",\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",children:\"src/middleware.ts\"}),l(a.pre,{style:{backgroundColor:\"#282c34\",color:\"#abb2bf\"},tabIndex:\"0\",rawcontent:\"import createMiddleware from 'next-intl/middleware';\\nimport { routing } from './i18n/routing';\\n\\nexport default createMiddleware(routing);\\n\\nexport const config = {\\n    matcher: ['/((?!api|_next/static|favicon.ico).*)'],\\n};\",\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",children:e(a.code,{\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#C678DD\"},children:\"import\"}),l(a.span,{style:{color:\"#E06C75\"},children:\" createMiddleware\"}),l(a.span,{style:{color:\"#C678DD\"},children:\" from\"}),l(a.span,{style:{color:\"#98C379\"},children:\" 'next-intl/middleware'\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#C678DD\"},children:\"import\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\" { \"}),l(a.span,{style:{color:\"#E06C75\"},children:\"routing\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\" } \"}),l(a.span,{style:{color:\"#C678DD\"},children:\"from\"}),l(a.span,{style:{color:\"#98C379\"},children:\" './i18n/routing'\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#C678DD\"},children:\"export\"}),l(a.span,{style:{color:\"#C678DD\"},children:\" default\"}),l(a.span,{style:{color:\"#61AFEF\"},children:\" createMiddleware\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),l(a.span,{style:{color:\"#E06C75\"},children:\"routing\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#C678DD\"},children:\"export\"}),l(a.span,{style:{color:\"#C678DD\"},children:\" const\"}),l(a.span,{style:{color:\"#E5C07B\"},children:\" config\"}),l(a.span,{style:{color:\"#56B6C2\"},children:\" =\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\" {\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#E06C75\"},children:\"    matcher\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\": [\"}),l(a.span,{style:{color:\"#98C379\"},children:\"'/((?!api|_next/static|favicon.ico).*)'\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\"],\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:l(a.span,{style:{color:\"#ABB2BF\"},children:\"};\"})})]})})]}),\"\\n\",l(a.h3,{children:\"6. 設定請求配置\"}),\"\\n\",e(a.figure,{\"data-rehype-pretty-code-figure\":\"\",children:[l(a.figcaption,{\"data-rehype-pretty-code-title\":\"\",\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",children:\"src/i18n/request.ts\"}),l(a.pre,{style:{backgroundColor:\"#282c34\",color:\"#abb2bf\"},tabIndex:\"0\",rawcontent:\"import { getRequestConfig } from 'next-intl/server';\\nimport { routing } from './routing';\\n\\nexport default getRequestConfig(async ({ requestLocale }) => {\\n    let locale = await requestLocale;\\n\\n    // 確保語言是支援的\\n    if (!locale || !routing.locales.includes(locale as any)) {\\n        locale = routing.defaultLocale;\\n    }\\n\\n    return {\\n        locale,\\n        messages: (await import(`../../messages/${locale}.json`)).default,\\n    };\\n});\",\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",children:e(a.code,{\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#C678DD\"},children:\"import\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\" { \"}),l(a.span,{style:{color:\"#E06C75\"},children:\"getRequestConfig\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\" } \"}),l(a.span,{style:{color:\"#C678DD\"},children:\"from\"}),l(a.span,{style:{color:\"#98C379\"},children:\" 'next-intl/server'\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#C678DD\"},children:\"import\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\" { \"}),l(a.span,{style:{color:\"#E06C75\"},children:\"routing\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\" } \"}),l(a.span,{style:{color:\"#C678DD\"},children:\"from\"}),l(a.span,{style:{color:\"#98C379\"},children:\" './routing'\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#C678DD\"},children:\"export\"}),l(a.span,{style:{color:\"#C678DD\"},children:\" default\"}),l(a.span,{style:{color:\"#61AFEF\"},children:\" getRequestConfig\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),l(a.span,{style:{color:\"#C678DD\"},children:\"async\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\" ({ \"}),l(a.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"requestLocale\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\" }) \"}),l(a.span,{style:{color:\"#C678DD\"},children:\"=>\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\" {\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#C678DD\"},children:\"    let\"}),l(a.span,{style:{color:\"#E06C75\"},children:\" locale\"}),l(a.span,{style:{color:\"#56B6C2\"},children:\" =\"}),l(a.span,{style:{color:\"#C678DD\"},children:\" await\"}),l(a.span,{style:{color:\"#E06C75\"},children:\" requestLocale\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",l(a.span,{\"data-line\":\"\",children:l(a.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"    // 確保語言是支援的\"})}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#C678DD\"},children:\"    if\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\" (\"}),l(a.span,{style:{color:\"#56B6C2\"},children:\"!\"}),l(a.span,{style:{color:\"#E06C75\"},children:\"locale\"}),l(a.span,{style:{color:\"#56B6C2\"},children:\" ||\"}),l(a.span,{style:{color:\"#56B6C2\"},children:\" !\"}),l(a.span,{style:{color:\"#E5C07B\"},children:\"routing\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\".\"}),l(a.span,{style:{color:\"#E5C07B\"},children:\"locales\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\".\"}),l(a.span,{style:{color:\"#61AFEF\"},children:\"includes\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),l(a.span,{style:{color:\"#E06C75\"},children:\"locale\"}),l(a.span,{style:{color:\"#C678DD\"},children:\" as\"}),l(a.span,{style:{color:\"#E5C07B\"},children:\" any\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\")) {\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#E06C75\"},children:\"        locale\"}),l(a.span,{style:{color:\"#56B6C2\"},children:\" =\"}),l(a.span,{style:{color:\"#E5C07B\"},children:\" routing\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\".\"}),l(a.span,{style:{color:\"#E06C75\"},children:\"defaultLocale\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:l(a.span,{style:{color:\"#ABB2BF\"},children:\"    }\"})}),\"\\n\",l(a.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#C678DD\"},children:\"    return\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\" {\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#E06C75\"},children:\"        locale\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#E06C75\"},children:\"        messages\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\": (\"}),l(a.span,{style:{color:\"#C678DD\"},children:\"await\"}),l(a.span,{style:{color:\"#61AFEF\"},children:\" import\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),l(a.span,{style:{color:\"#98C379\"},children:\"`../../messages/\"}),l(a.span,{style:{color:\"#C678DD\"},children:\"${\"}),l(a.span,{style:{color:\"#E06C75\"},children:\"locale\"}),l(a.span,{style:{color:\"#C678DD\"},children:\"}\"}),l(a.span,{style:{color:\"#98C379\"},children:\".json`\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\")).\"}),l(a.span,{style:{color:\"#E06C75\"},children:\"default\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:l(a.span,{style:{color:\"#ABB2BF\"},children:\"    };\"})}),\"\\n\",l(a.span,{\"data-line\":\"\",children:l(a.span,{style:{color:\"#ABB2BF\"},children:\"});\"})})]})})]}),\"\\n\",l(a.h2,{children:\"修改 Next.js 設定\"}),\"\\n\",e(a.figure,{\"data-rehype-pretty-code-figure\":\"\",children:[l(a.figcaption,{\"data-rehype-pretty-code-title\":\"\",\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",children:\"next.config.ts\"}),l(a.pre,{style:{backgroundColor:\"#282c34\",color:\"#abb2bf\"},tabIndex:\"0\",rawcontent:\"import createNextIntlPlugin from 'next-intl/plugin';\\n\\nconst withNextIntl = createNextIntlPlugin();\\n\\n/** @type {import('next').NextConfig} */\\nconst nextConfig = {\\n    // 你原本的設定\\n};\\n\\nexport default withNextIntl(nextConfig);\",\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",children:e(a.code,{\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#C678DD\"},children:\"import\"}),l(a.span,{style:{color:\"#E06C75\"},children:\" createNextIntlPlugin\"}),l(a.span,{style:{color:\"#C678DD\"},children:\" from\"}),l(a.span,{style:{color:\"#98C379\"},children:\" 'next-intl/plugin'\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#C678DD\"},children:\"const\"}),l(a.span,{style:{color:\"#E5C07B\"},children:\" withNextIntl\"}),l(a.span,{style:{color:\"#56B6C2\"},children:\" =\"}),l(a.span,{style:{color:\"#61AFEF\"},children:\" createNextIntlPlugin\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\"();\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"/** \"}),l(a.span,{style:{color:\"#C678DD\",fontStyle:\"italic\"},children:\"@type\"}),l(a.span,{style:{color:\"#E5C07B\",fontStyle:\"italic\"},children:\" {import('next').NextConfig}\"}),l(a.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\" */\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#C678DD\"},children:\"const\"}),l(a.span,{style:{color:\"#E5C07B\"},children:\" nextConfig\"}),l(a.span,{style:{color:\"#56B6C2\"},children:\" =\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\" {\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:l(a.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"    // 你原本的設定\"})}),\"\\n\",l(a.span,{\"data-line\":\"\",children:l(a.span,{style:{color:\"#ABB2BF\"},children:\"};\"})}),\"\\n\",l(a.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#C678DD\"},children:\"export\"}),l(a.span,{style:{color:\"#C678DD\"},children:\" default\"}),l(a.span,{style:{color:\"#61AFEF\"},children:\" withNextIntl\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),l(a.span,{style:{color:\"#E06C75\"},children:\"nextConfig\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\");\"})]})]})})]}),\"\\n\",l(a.h2,{children:\"建立多語言頁面\"}),\"\\n\",l(a.h3,{children:\"Layout 設定\"}),\"\\n\",e(a.figure,{\"data-rehype-pretty-code-figure\":\"\",children:[l(a.figcaption,{\"data-rehype-pretty-code-title\":\"\",\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",children:\"src/app/[locale]/layout.tsx\"}),l(a.pre,{style:{backgroundColor:\"#282c34\",color:\"#abb2bf\"},tabIndex:\"0\",rawcontent:\"import { NextIntlClientProvider } from 'next-intl';\\nimport { getMessages } from 'next-intl/server';\\nimport { notFound } from 'next/navigation';\\nimport { routing } from '@/i18n/routing';\\n\\nexport function generateStaticParams() {\\n    return routing.locales.map((locale) => ({ locale }));\\n}\\n\\nexport default async function LocaleLayout({\\n    children,\\n    params: { locale }\\n}: {\\n    children: React.ReactNode;\\n    params: { locale: string };\\n}) {\\n    // 檢查語言是否支援\\n    if (!routing.locales.includes(locale as any)) {\\n        notFound();\\n    }\\n\\n    const messages = await getMessages();\\n\\n    return (\\n        <html lang={locale}>\\n            <body>\\n                <NextIntlClientProvider messages={messages}>\\n                    {children}\\n                </NextIntlClientProvider>\\n            </body>\\n        </html>\\n    );\\n}\",\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",children:e(a.code,{\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#C678DD\"},children:\"import\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\" { \"}),l(a.span,{style:{color:\"#E06C75\"},children:\"NextIntlClientProvider\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\" } \"}),l(a.span,{style:{color:\"#C678DD\"},children:\"from\"}),l(a.span,{style:{color:\"#98C379\"},children:\" 'next-intl'\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#C678DD\"},children:\"import\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\" { \"}),l(a.span,{style:{color:\"#E06C75\"},children:\"getMessages\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\" } \"}),l(a.span,{style:{color:\"#C678DD\"},children:\"from\"}),l(a.span,{style:{color:\"#98C379\"},children:\" 'next-intl/server'\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#C678DD\"},children:\"import\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\" { \"}),l(a.span,{style:{color:\"#E06C75\"},children:\"notFound\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\" } \"}),l(a.span,{style:{color:\"#C678DD\"},children:\"from\"}),l(a.span,{style:{color:\"#98C379\"},children:\" 'next/navigation'\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#C678DD\"},children:\"import\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\" { \"}),l(a.span,{style:{color:\"#E06C75\"},children:\"routing\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\" } \"}),l(a.span,{style:{color:\"#C678DD\"},children:\"from\"}),l(a.span,{style:{color:\"#98C379\"},children:\" '@/i18n/routing'\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#C678DD\"},children:\"export\"}),l(a.span,{style:{color:\"#C678DD\"},children:\" function\"}),l(a.span,{style:{color:\"#61AFEF\"},children:\" generateStaticParams\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\"() {\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#C678DD\"},children:\"    return\"}),l(a.span,{style:{color:\"#E5C07B\"},children:\" routing\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\".\"}),l(a.span,{style:{color:\"#E5C07B\"},children:\"locales\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\".\"}),l(a.span,{style:{color:\"#61AFEF\"},children:\"map\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\"((\"}),l(a.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"locale\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\") \"}),l(a.span,{style:{color:\"#C678DD\"},children:\"=>\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\" ({ \"}),l(a.span,{style:{color:\"#E06C75\"},children:\"locale\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\" }));\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:l(a.span,{style:{color:\"#ABB2BF\"},children:\"}\"})}),\"\\n\",l(a.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#C678DD\"},children:\"export\"}),l(a.span,{style:{color:\"#C678DD\"},children:\" default\"}),l(a.span,{style:{color:\"#C678DD\"},children:\" async\"}),l(a.span,{style:{color:\"#C678DD\"},children:\" function\"}),l(a.span,{style:{color:\"#61AFEF\"},children:\" LocaleLayout\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\"({\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"    children\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#E06C75\"},children:\"    params\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\": { \"}),l(a.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"locale\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\" }\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:l(a.span,{style:{color:\"#ABB2BF\"},children:\"}: {\"})}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#E06C75\"},children:\"    children\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\": \"}),l(a.span,{style:{color:\"#E5C07B\"},children:\"React\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\".\"}),l(a.span,{style:{color:\"#E5C07B\"},children:\"ReactNode\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#E06C75\"},children:\"    params\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\": { \"}),l(a.span,{style:{color:\"#E06C75\"},children:\"locale\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\": \"}),l(a.span,{style:{color:\"#E5C07B\"},children:\"string\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\" };\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:l(a.span,{style:{color:\"#ABB2BF\"},children:\"}) {\"})}),\"\\n\",l(a.span,{\"data-line\":\"\",children:l(a.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"    // 檢查語言是否支援\"})}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#C678DD\"},children:\"    if\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\" (\"}),l(a.span,{style:{color:\"#56B6C2\"},children:\"!\"}),l(a.span,{style:{color:\"#E5C07B\"},children:\"routing\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\".\"}),l(a.span,{style:{color:\"#E5C07B\"},children:\"locales\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\".\"}),l(a.span,{style:{color:\"#61AFEF\"},children:\"includes\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),l(a.span,{style:{color:\"#E06C75\"},children:\"locale\"}),l(a.span,{style:{color:\"#C678DD\"},children:\" as\"}),l(a.span,{style:{color:\"#E5C07B\"},children:\" any\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\")) {\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#61AFEF\"},children:\"        notFound\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\"();\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:l(a.span,{style:{color:\"#ABB2BF\"},children:\"    }\"})}),\"\\n\",l(a.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#C678DD\"},children:\"    const\"}),l(a.span,{style:{color:\"#E5C07B\"},children:\" messages\"}),l(a.span,{style:{color:\"#56B6C2\"},children:\" =\"}),l(a.span,{style:{color:\"#C678DD\"},children:\" await\"}),l(a.span,{style:{color:\"#61AFEF\"},children:\" getMessages\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\"();\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#C678DD\"},children:\"    return\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\" (\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#56B6C2\"},children:\"        <\"}),l(a.span,{style:{color:\"#E06C75\"},children:\"html\"}),l(a.span,{style:{color:\"#E06C75\"},children:\" lang\"}),l(a.span,{style:{color:\"#56B6C2\"},children:\"=\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\"{\"}),l(a.span,{style:{color:\"#E06C75\"},children:\"locale\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\"}\"}),l(a.span,{style:{color:\"#56B6C2\"},children:\">\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#ABB2BF\"},children:\"            <\"}),l(a.span,{style:{color:\"#E5C07B\"},children:\"body\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\">\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#56B6C2\"},children:\"                <\"}),l(a.span,{style:{color:\"#E06C75\"},children:\"NextIntlClientProvider\"}),l(a.span,{style:{color:\"#E06C75\"},children:\" messages\"}),l(a.span,{style:{color:\"#56B6C2\"},children:\"=\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\"{\"}),l(a.span,{style:{color:\"#E06C75\"},children:\"messages\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\"}\"}),l(a.span,{style:{color:\"#56B6C2\"},children:\">\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#ABB2BF\"},children:\"                    {\"}),l(a.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"children\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\"}\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#56B6C2\"},children:\"                </\"}),l(a.span,{style:{color:\"#E06C75\"},children:\"NextIntlClientProvider\"}),l(a.span,{style:{color:\"#56B6C2\"},children:\">\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#56B6C2\"},children:\"            </\"}),l(a.span,{style:{color:\"#E06C75\"},children:\"body\"}),l(a.span,{style:{color:\"#56B6C2\"},children:\">\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#56B6C2\"},children:\"        </\"}),l(a.span,{style:{color:\"#E06C75\"},children:\"html\"}),l(a.span,{style:{color:\"#56B6C2\"},children:\">\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:l(a.span,{style:{color:\"#ABB2BF\"},children:\"    );\"})}),\"\\n\",l(a.span,{\"data-line\":\"\",children:l(a.span,{style:{color:\"#ABB2BF\"},children:\"}\"})})]})})]}),\"\\n\",l(a.h3,{children:\"主頁面\"}),\"\\n\",e(a.figure,{\"data-rehype-pretty-code-figure\":\"\",children:[l(a.figcaption,{\"data-rehype-pretty-code-title\":\"\",\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",children:\"src/app/[locale]/page.tsx\"}),l(a.pre,{style:{backgroundColor:\"#282c34\",color:\"#abb2bf\"},tabIndex:\"0\",rawcontent:\"import { useTranslations } from 'next-intl';\\nimport { Link } from '@/i18n/routing';\\n\\nexport default function HomePage() {\\n    const t = useTranslations('HomePage');\\n\\n    return (\\n        <div>\\n            <nav>\\n                <Link href=\\\"/\\\">{t('nav.home')}</Link>\\n                <Link href=\\\"/about\\\">{t('nav.about')}</Link>\\n                <Link href=\\\"/contact\\\">{t('nav.contact')}</Link>\\n            </nav>\\n\\n            <main>\\n                <h1>{t('title')}</h1>\\n                <p>{t('description')}</p>\\n            </main>\\n        </div>\\n    );\\n}\",\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",children:e(a.code,{\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#C678DD\"},children:\"import\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\" { \"}),l(a.span,{style:{color:\"#E06C75\"},children:\"useTranslations\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\" } \"}),l(a.span,{style:{color:\"#C678DD\"},children:\"from\"}),l(a.span,{style:{color:\"#98C379\"},children:\" 'next-intl'\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#C678DD\"},children:\"import\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\" { \"}),l(a.span,{style:{color:\"#E06C75\"},children:\"Link\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\" } \"}),l(a.span,{style:{color:\"#C678DD\"},children:\"from\"}),l(a.span,{style:{color:\"#98C379\"},children:\" '@/i18n/routing'\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#C678DD\"},children:\"export\"}),l(a.span,{style:{color:\"#C678DD\"},children:\" default\"}),l(a.span,{style:{color:\"#C678DD\"},children:\" function\"}),l(a.span,{style:{color:\"#61AFEF\"},children:\" HomePage\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\"() {\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#C678DD\"},children:\"    const\"}),l(a.span,{style:{color:\"#E5C07B\"},children:\" t\"}),l(a.span,{style:{color:\"#56B6C2\"},children:\" =\"}),l(a.span,{style:{color:\"#61AFEF\"},children:\" useTranslations\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),l(a.span,{style:{color:\"#98C379\"},children:\"'HomePage'\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#C678DD\"},children:\"    return\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\" (\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#ABB2BF\"},children:\"        <\"}),l(a.span,{style:{color:\"#E5C07B\"},children:\"div\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\">\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#ABB2BF\"},children:\"            <\"}),l(a.span,{style:{color:\"#E5C07B\"},children:\"nav\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\">\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#56B6C2\"},children:\"                <\"}),l(a.span,{style:{color:\"#E06C75\"},children:\"Link\"}),l(a.span,{style:{color:\"#E06C75\"},children:\" href\"}),l(a.span,{style:{color:\"#56B6C2\"},children:\"=\"}),l(a.span,{style:{color:\"#98C379\"},children:'\"/\"'}),l(a.span,{style:{color:\"#56B6C2\"},children:\">\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\"{\"}),l(a.span,{style:{color:\"#61AFEF\"},children:\"t\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),l(a.span,{style:{color:\"#98C379\"},children:\"'nav.home'\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\")}\"}),l(a.span,{style:{color:\"#56B6C2\"},children:\"</\"}),l(a.span,{style:{color:\"#E06C75\"},children:\"Link\"}),l(a.span,{style:{color:\"#56B6C2\"},children:\">\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#56B6C2\"},children:\"                <\"}),l(a.span,{style:{color:\"#E06C75\"},children:\"Link\"}),l(a.span,{style:{color:\"#E06C75\"},children:\" href\"}),l(a.span,{style:{color:\"#56B6C2\"},children:\"=\"}),l(a.span,{style:{color:\"#98C379\"},children:'\"/about\"'}),l(a.span,{style:{color:\"#56B6C2\"},children:\">\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\"{\"}),l(a.span,{style:{color:\"#61AFEF\"},children:\"t\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),l(a.span,{style:{color:\"#98C379\"},children:\"'nav.about'\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\")}\"}),l(a.span,{style:{color:\"#56B6C2\"},children:\"</\"}),l(a.span,{style:{color:\"#E06C75\"},children:\"Link\"}),l(a.span,{style:{color:\"#56B6C2\"},children:\">\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#56B6C2\"},children:\"                <\"}),l(a.span,{style:{color:\"#E06C75\"},children:\"Link\"}),l(a.span,{style:{color:\"#E06C75\"},children:\" href\"}),l(a.span,{style:{color:\"#56B6C2\"},children:\"=\"}),l(a.span,{style:{color:\"#98C379\"},children:'\"/contact\"'}),l(a.span,{style:{color:\"#56B6C2\"},children:\">\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\"{\"}),l(a.span,{style:{color:\"#61AFEF\"},children:\"t\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),l(a.span,{style:{color:\"#98C379\"},children:\"'nav.contact'\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\")}\"}),l(a.span,{style:{color:\"#56B6C2\"},children:\"</\"}),l(a.span,{style:{color:\"#E06C75\"},children:\"Link\"}),l(a.span,{style:{color:\"#56B6C2\"},children:\">\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#56B6C2\"},children:\"            </\"}),l(a.span,{style:{color:\"#E06C75\"},children:\"nav\"}),l(a.span,{style:{color:\"#56B6C2\"},children:\">\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#ABB2BF\"},children:\"            <\"}),l(a.span,{style:{color:\"#E5C07B\"},children:\"main\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\">\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#ABB2BF\"},children:\"                <\"}),l(a.span,{style:{color:\"#E5C07B\"},children:\"h1\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\">{\"}),l(a.span,{style:{color:\"#61AFEF\"},children:\"t\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),l(a.span,{style:{color:\"#98C379\"},children:\"'title'\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\")}\"}),l(a.span,{style:{color:\"#56B6C2\"},children:\"</\"}),l(a.span,{style:{color:\"#E06C75\"},children:\"h1\"}),l(a.span,{style:{color:\"#56B6C2\"},children:\">\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#ABB2BF\"},children:\"                <\"}),l(a.span,{style:{color:\"#E5C07B\"},children:\"p\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\">{\"}),l(a.span,{style:{color:\"#61AFEF\"},children:\"t\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),l(a.span,{style:{color:\"#98C379\"},children:\"'description'\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\")}\"}),l(a.span,{style:{color:\"#56B6C2\"},children:\"</\"}),l(a.span,{style:{color:\"#E06C75\"},children:\"p\"}),l(a.span,{style:{color:\"#56B6C2\"},children:\">\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#56B6C2\"},children:\"            </\"}),l(a.span,{style:{color:\"#E06C75\"},children:\"main\"}),l(a.span,{style:{color:\"#56B6C2\"},children:\">\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#56B6C2\"},children:\"        </\"}),l(a.span,{style:{color:\"#E06C75\"},children:\"div\"}),l(a.span,{style:{color:\"#56B6C2\"},children:\">\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:l(a.span,{style:{color:\"#ABB2BF\"},children:\"    );\"})}),\"\\n\",l(a.span,{\"data-line\":\"\",children:l(a.span,{style:{color:\"#ABB2BF\"},children:\"}\"})})]})})]}),\"\\n\",l(a.h2,{children:\"建立語言切換器\"}),\"\\n\",e(a.figure,{\"data-rehype-pretty-code-figure\":\"\",children:[l(a.figcaption,{\"data-rehype-pretty-code-title\":\"\",\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",children:\"src/components/LanguageSwitcher.tsx\"}),l(a.pre,{style:{backgroundColor:\"#282c34\",color:\"#abb2bf\"},tabIndex:\"0\",rawcontent:\"'use client';\\n\\nimport { useLocale } from 'next-intl';\\nimport { useRouter, usePathname } from '@/i18n/routing';\\n\\nexport default function LanguageSwitcher() {\\n    const locale = useLocale();\\n    const router = useRouter();\\n    const pathname = usePathname();\\n\\n    const languages = [\\n        { code: 'zh-TW', name: '繁體中文' },\\n        { code: 'en', name: 'English' }\\n    ];\\n\\n    const handleLanguageChange = (newLocale: string) => {\\n        router.replace(pathname, { locale: newLocale });\\n    };\\n\\n    return (\\n        <select\\n            value={locale}\\n            onChange={(e) => handleLanguageChange(e.target.value)}\\n            className=\\\"border rounded px-3 py-1\\\"\\n        >\\n            {languages.map((lang) => (\\n                <option key={lang.code} value={lang.code}>\\n                    {lang.name}\\n                </option>\\n            ))}\\n        </select>\\n    );\\n}\",\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",children:e(a.code,{\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#98C379\"},children:\"'use client'\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#C678DD\"},children:\"import\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\" { \"}),l(a.span,{style:{color:\"#E06C75\"},children:\"useLocale\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\" } \"}),l(a.span,{style:{color:\"#C678DD\"},children:\"from\"}),l(a.span,{style:{color:\"#98C379\"},children:\" 'next-intl'\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#C678DD\"},children:\"import\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\" { \"}),l(a.span,{style:{color:\"#E06C75\"},children:\"useRouter\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\", \"}),l(a.span,{style:{color:\"#E06C75\"},children:\"usePathname\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\" } \"}),l(a.span,{style:{color:\"#C678DD\"},children:\"from\"}),l(a.span,{style:{color:\"#98C379\"},children:\" '@/i18n/routing'\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#C678DD\"},children:\"export\"}),l(a.span,{style:{color:\"#C678DD\"},children:\" default\"}),l(a.span,{style:{color:\"#C678DD\"},children:\" function\"}),l(a.span,{style:{color:\"#61AFEF\"},children:\" LanguageSwitcher\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\"() {\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#C678DD\"},children:\"    const\"}),l(a.span,{style:{color:\"#E5C07B\"},children:\" locale\"}),l(a.span,{style:{color:\"#56B6C2\"},children:\" =\"}),l(a.span,{style:{color:\"#61AFEF\"},children:\" useLocale\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\"();\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#C678DD\"},children:\"    const\"}),l(a.span,{style:{color:\"#E5C07B\"},children:\" router\"}),l(a.span,{style:{color:\"#56B6C2\"},children:\" =\"}),l(a.span,{style:{color:\"#61AFEF\"},children:\" useRouter\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\"();\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#C678DD\"},children:\"    const\"}),l(a.span,{style:{color:\"#E5C07B\"},children:\" pathname\"}),l(a.span,{style:{color:\"#56B6C2\"},children:\" =\"}),l(a.span,{style:{color:\"#61AFEF\"},children:\" usePathname\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\"();\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#C678DD\"},children:\"    const\"}),l(a.span,{style:{color:\"#E5C07B\"},children:\" languages\"}),l(a.span,{style:{color:\"#56B6C2\"},children:\" =\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\" [\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#ABB2BF\"},children:\"        { \"}),l(a.span,{style:{color:\"#E06C75\"},children:\"code\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\": \"}),l(a.span,{style:{color:\"#98C379\"},children:\"'zh-TW'\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\", \"}),l(a.span,{style:{color:\"#E06C75\"},children:\"name\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\": \"}),l(a.span,{style:{color:\"#98C379\"},children:\"'繁體中文'\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\" },\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#ABB2BF\"},children:\"        { \"}),l(a.span,{style:{color:\"#E06C75\"},children:\"code\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\": \"}),l(a.span,{style:{color:\"#98C379\"},children:\"'en'\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\", \"}),l(a.span,{style:{color:\"#E06C75\"},children:\"name\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\": \"}),l(a.span,{style:{color:\"#98C379\"},children:\"'English'\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\" }\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:l(a.span,{style:{color:\"#ABB2BF\"},children:\"    ];\"})}),\"\\n\",l(a.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#C678DD\"},children:\"    const\"}),l(a.span,{style:{color:\"#61AFEF\"},children:\" handleLanguageChange\"}),l(a.span,{style:{color:\"#56B6C2\"},children:\" =\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\" (\"}),l(a.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"newLocale\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\": \"}),l(a.span,{style:{color:\"#E5C07B\"},children:\"string\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\") \"}),l(a.span,{style:{color:\"#C678DD\"},children:\"=>\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\" {\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#E5C07B\"},children:\"        router\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\".\"}),l(a.span,{style:{color:\"#61AFEF\"},children:\"replace\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),l(a.span,{style:{color:\"#E06C75\"},children:\"pathname\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\", { \"}),l(a.span,{style:{color:\"#E06C75\"},children:\"locale\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\": \"}),l(a.span,{style:{color:\"#E06C75\"},children:\"newLocale\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\" });\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:l(a.span,{style:{color:\"#ABB2BF\"},children:\"    };\"})}),\"\\n\",l(a.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#C678DD\"},children:\"    return\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\" (\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#56B6C2\"},children:\"        <\"}),l(a.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"select\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#E06C75\"},children:\"            value\"}),l(a.span,{style:{color:\"#56B6C2\"},children:\"=\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\"{\"}),l(a.span,{style:{color:\"#E06C75\"},children:\"locale\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\"}\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#E06C75\"},children:\"            onChange\"}),l(a.span,{style:{color:\"#56B6C2\"},children:\"=\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\"{(e) => \"}),l(a.span,{style:{color:\"#61AFEF\"},children:\"handleLanguageChange\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\"(e.target.value)}\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#E06C75\"},children:\"            className\"}),l(a.span,{style:{color:\"#56B6C2\"},children:\"=\"}),l(a.span,{style:{color:\"#98C379\"},children:'\"border rounded px-3 py-1\"'})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:l(a.span,{style:{color:\"#56B6C2\"},children:\"        >\"})}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#ABB2BF\"},children:\"            {\"}),l(a.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"languages\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\".\"}),l(a.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"map\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\"((\"}),l(a.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"lang\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\") \"}),l(a.span,{style:{color:\"#56B6C2\"},children:\"=>\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\" (\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#56B6C2\"},children:\"                <\"}),l(a.span,{style:{color:\"#E06C75\"},children:\"option\"}),l(a.span,{style:{color:\"#E06C75\"},children:\" key\"}),l(a.span,{style:{color:\"#56B6C2\"},children:\"=\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\"{lang.\"}),l(a.span,{style:{color:\"#E06C75\"},children:\"code\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\"} \"}),l(a.span,{style:{color:\"#E06C75\"},children:\"value\"}),l(a.span,{style:{color:\"#56B6C2\"},children:\"=\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\"{lang.\"}),l(a.span,{style:{color:\"#E06C75\"},children:\"code\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\"}\"}),l(a.span,{style:{color:\"#56B6C2\"},children:\">\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#ABB2BF\"},children:\"                    {\"}),l(a.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"lang\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\".\"}),l(a.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"name\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\"}\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#56B6C2\"},children:\"                </\"}),l(a.span,{style:{color:\"#E06C75\"},children:\"option\"}),l(a.span,{style:{color:\"#56B6C2\"},children:\">\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:l(a.span,{style:{color:\"#ABB2BF\"},children:\"            ))}\"})}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#56B6C2\"},children:\"        </\"}),l(a.span,{style:{color:\"#E06C75\"},children:\"select\"}),l(a.span,{style:{color:\"#56B6C2\"},children:\">\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:l(a.span,{style:{color:\"#ABB2BF\"},children:\"    );\"})}),\"\\n\",l(a.span,{\"data-line\":\"\",children:l(a.span,{style:{color:\"#ABB2BF\"},children:\"}\"})})]})})]}),\"\\n\",l(a.h2,{children:\"進階功能\"}),\"\\n\",l(a.h3,{children:\"日期時間格式化\"}),\"\\n\",l(a.figure,{\"data-rehype-pretty-code-figure\":\"\",children:l(a.pre,{style:{backgroundColor:\"#282c34\",color:\"#abb2bf\"},tabIndex:\"0\",rawcontent:\"import { useFormatter } from 'next-intl';\\n\\nexport default function DateExample() {\\n    const format = useFormatter();\\n    const now = new Date();\\n\\n    return (\\n        <div>\\n            <p>日期: {format.dateTime(now, {\\n                year: 'numeric',\\n                month: 'long',\\n                day: 'numeric'\\n            })}</p>\\n        </div>\\n    );\\n}\",\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",children:e(a.code,{\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#C678DD\"},children:\"import\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\" { \"}),l(a.span,{style:{color:\"#E06C75\"},children:\"useFormatter\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\" } \"}),l(a.span,{style:{color:\"#C678DD\"},children:\"from\"}),l(a.span,{style:{color:\"#98C379\"},children:\" 'next-intl'\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#C678DD\"},children:\"export\"}),l(a.span,{style:{color:\"#C678DD\"},children:\" default\"}),l(a.span,{style:{color:\"#C678DD\"},children:\" function\"}),l(a.span,{style:{color:\"#61AFEF\"},children:\" DateExample\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\"() {\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#C678DD\"},children:\"    const\"}),l(a.span,{style:{color:\"#E5C07B\"},children:\" format\"}),l(a.span,{style:{color:\"#56B6C2\"},children:\" =\"}),l(a.span,{style:{color:\"#61AFEF\"},children:\" useFormatter\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\"();\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#C678DD\"},children:\"    const\"}),l(a.span,{style:{color:\"#E5C07B\"},children:\" now\"}),l(a.span,{style:{color:\"#56B6C2\"},children:\" =\"}),l(a.span,{style:{color:\"#C678DD\"},children:\" new\"}),l(a.span,{style:{color:\"#61AFEF\"},children:\" Date\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\"();\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#C678DD\"},children:\"    return\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\" (\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#ABB2BF\"},children:\"        <\"}),l(a.span,{style:{color:\"#E5C07B\"},children:\"div\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\">\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#ABB2BF\"},children:\"            <\"}),l(a.span,{style:{color:\"#E5C07B\"},children:\"p\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\">\"}),l(a.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"日期\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\": {\"}),l(a.span,{style:{color:\"#E5C07B\"},children:\"format\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\".\"}),l(a.span,{style:{color:\"#E5C07B\"},children:\"dateTime\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),l(a.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"now\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\", {\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#E06C75\"},children:\"                year\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\": \"}),l(a.span,{style:{color:\"#98C379\"},children:\"'numeric'\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#E06C75\"},children:\"                month\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\": \"}),l(a.span,{style:{color:\"#98C379\"},children:\"'long'\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#E06C75\"},children:\"                day\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\": \"}),l(a.span,{style:{color:\"#98C379\"},children:\"'numeric'\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#ABB2BF\"},children:\"            })}</\"}),l(a.span,{style:{color:\"#E5C07B\"},children:\"p\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\">\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#56B6C2\"},children:\"        </\"}),l(a.span,{style:{color:\"#E06C75\"},children:\"div\"}),l(a.span,{style:{color:\"#56B6C2\"},children:\">\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:l(a.span,{style:{color:\"#ABB2BF\"},children:\"    );\"})}),\"\\n\",l(a.span,{\"data-line\":\"\",children:l(a.span,{style:{color:\"#ABB2BF\"},children:\"}\"})})]})})}),\"\\n\",l(a.h3,{children:\"數字格式化\"}),\"\\n\",l(a.figure,{\"data-rehype-pretty-code-figure\":\"\",children:l(a.pre,{style:{backgroundColor:\"#282c34\",color:\"#abb2bf\"},tabIndex:\"0\",rawcontent:\"import { useFormatter } from 'next-intl';\\n\\nexport default function NumberExample() {\\n    const format = useFormatter();\\n    const price = 1234.56;\\n\\n    return (\\n        <div>\\n            <p>價格: {format.number(price, {\\n                style: 'currency',\\n                currency: 'TWD'\\n            })}</p>\\n        </div>\\n    );\\n}\",\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",children:e(a.code,{\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#C678DD\"},children:\"import\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\" { \"}),l(a.span,{style:{color:\"#E06C75\"},children:\"useFormatter\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\" } \"}),l(a.span,{style:{color:\"#C678DD\"},children:\"from\"}),l(a.span,{style:{color:\"#98C379\"},children:\" 'next-intl'\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#C678DD\"},children:\"export\"}),l(a.span,{style:{color:\"#C678DD\"},children:\" default\"}),l(a.span,{style:{color:\"#C678DD\"},children:\" function\"}),l(a.span,{style:{color:\"#61AFEF\"},children:\" NumberExample\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\"() {\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#C678DD\"},children:\"    const\"}),l(a.span,{style:{color:\"#E5C07B\"},children:\" format\"}),l(a.span,{style:{color:\"#56B6C2\"},children:\" =\"}),l(a.span,{style:{color:\"#61AFEF\"},children:\" useFormatter\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\"();\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#C678DD\"},children:\"    const\"}),l(a.span,{style:{color:\"#E5C07B\"},children:\" price\"}),l(a.span,{style:{color:\"#56B6C2\"},children:\" =\"}),l(a.span,{style:{color:\"#D19A66\"},children:\" 1234.56\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#C678DD\"},children:\"    return\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\" (\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#ABB2BF\"},children:\"        <\"}),l(a.span,{style:{color:\"#E5C07B\"},children:\"div\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\">\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#ABB2BF\"},children:\"            <\"}),l(a.span,{style:{color:\"#E5C07B\"},children:\"p\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\">\"}),l(a.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"價格\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\": {\"}),l(a.span,{style:{color:\"#E5C07B\"},children:\"format\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\".\"}),l(a.span,{style:{color:\"#E5C07B\"},children:\"number\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),l(a.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"price\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\", {\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#E06C75\"},children:\"                style\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\": \"}),l(a.span,{style:{color:\"#98C379\"},children:\"'currency'\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#E06C75\"},children:\"                currency\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\": \"}),l(a.span,{style:{color:\"#98C379\"},children:\"'TWD'\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#ABB2BF\"},children:\"            })}</\"}),l(a.span,{style:{color:\"#E5C07B\"},children:\"p\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\">\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#56B6C2\"},children:\"        </\"}),l(a.span,{style:{color:\"#E06C75\"},children:\"div\"}),l(a.span,{style:{color:\"#56B6C2\"},children:\">\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:l(a.span,{style:{color:\"#ABB2BF\"},children:\"    );\"})}),\"\\n\",l(a.span,{\"data-line\":\"\",children:l(a.span,{style:{color:\"#ABB2BF\"},children:\"}\"})})]})})}),\"\\n\",l(a.h3,{children:\"帶變數的翻譯\"}),\"\\n\",e(a.figure,{\"data-rehype-pretty-code-figure\":\"\",children:[l(a.figcaption,{\"data-rehype-pretty-code-title\":\"\",\"data-language\":\"json\",\"data-theme\":\"one-dark-pro\",children:\"messages/zh-TW.json\"}),l(a.pre,{style:{backgroundColor:\"#282c34\",color:\"#abb2bf\"},tabIndex:\"0\",rawcontent:'{\\n    \"UserProfile\": {\\n        \"welcome\": \"歡迎回來，{name}！\",\\n        \"itemCount\": \"您有 {count} 個商品\"\\n    }\\n}',\"data-language\":\"json\",\"data-theme\":\"one-dark-pro\",children:e(a.code,{\"data-language\":\"json\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[l(a.span,{\"data-line\":\"\",children:l(a.span,{style:{color:\"#ABB2BF\"},children:\"{\"})}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#E06C75\"},children:'    \"UserProfile\"'}),l(a.span,{style:{color:\"#ABB2BF\"},children:\": {\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#E06C75\"},children:'        \"welcome\"'}),l(a.span,{style:{color:\"#ABB2BF\"},children:\": \"}),l(a.span,{style:{color:\"#98C379\"},children:'\"歡迎回來，{name}！\"'}),l(a.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#E06C75\"},children:'        \"itemCount\"'}),l(a.span,{style:{color:\"#ABB2BF\"},children:\": \"}),l(a.span,{style:{color:\"#98C379\"},children:'\"您有 {count} 個商品\"'})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:l(a.span,{style:{color:\"#ABB2BF\"},children:\"    }\"})}),\"\\n\",l(a.span,{\"data-line\":\"\",children:l(a.span,{style:{color:\"#ABB2BF\"},children:\"}\"})})]})})]}),\"\\n\",l(a.figure,{\"data-rehype-pretty-code-figure\":\"\",children:l(a.pre,{style:{backgroundColor:\"#282c34\",color:\"#abb2bf\"},tabIndex:\"0\",rawcontent:\"const t = useTranslations('UserProfile');\\n\\n// 使用方式\\n<p>{t('welcome', { name: '小明' })}</p>\\n<p>{t('itemCount', { count: 5 })}</p>\",\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",children:e(a.code,{\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#C678DD\"},children:\"const\"}),l(a.span,{style:{color:\"#E5C07B\"},children:\" t\"}),l(a.span,{style:{color:\"#56B6C2\"},children:\" =\"}),l(a.span,{style:{color:\"#61AFEF\"},children:\" useTranslations\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),l(a.span,{style:{color:\"#98C379\"},children:\"'UserProfile'\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\");\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",l(a.span,{\"data-line\":\"\",children:l(a.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// 使用方式\"})}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#ABB2BF\"},children:\"<\"}),l(a.span,{style:{color:\"#E5C07B\"},children:\"p\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\">{\"}),l(a.span,{style:{color:\"#61AFEF\"},children:\"t\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),l(a.span,{style:{color:\"#98C379\"},children:\"'welcome'\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\", { \"}),l(a.span,{style:{color:\"#E06C75\"},children:\"name\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\": \"}),l(a.span,{style:{color:\"#98C379\"},children:\"'小明'\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\" })}\"}),l(a.span,{style:{color:\"#56B6C2\"},children:\"</\"}),l(a.span,{style:{color:\"#E06C75\"},children:\"p\"}),l(a.span,{style:{color:\"#56B6C2\"},children:\">\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#ABB2BF\"},children:\"<\"}),l(a.span,{style:{color:\"#E5C07B\"},children:\"p\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\">{\"}),l(a.span,{style:{color:\"#61AFEF\"},children:\"t\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),l(a.span,{style:{color:\"#98C379\"},children:\"'itemCount'\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\", { \"}),l(a.span,{style:{color:\"#E06C75\"},children:\"count\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\": \"}),l(a.span,{style:{color:\"#D19A66\"},children:\"5\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\" })}\"}),l(a.span,{style:{color:\"#56B6C2\"},children:\"</\"}),l(a.span,{style:{color:\"#E06C75\"},children:\"p\"}),l(a.span,{style:{color:\"#56B6C2\"},children:\">\"})]})]})})}),\"\\n\",l(a.h2,{children:\"部署注意事項\"}),\"\\n\",l(a.h3,{children:\"Vercel 部署\"}),\"\\n\",e(a.p,{children:[\"在 \",l(a.code,{children:\"vercel.json\"}),\" 中加入：\"]}),\"\\n\",l(a.figure,{\"data-rehype-pretty-code-figure\":\"\",children:l(a.pre,{style:{backgroundColor:\"#282c34\",color:\"#abb2bf\"},tabIndex:\"0\",rawcontent:'{\\n    \"functions\": {\\n        \"app/[locale]/route.ts\": {\\n            \"maxDuration\": 10\\n        }\\n    }\\n}',\"data-language\":\"json\",\"data-theme\":\"one-dark-pro\",children:e(a.code,{\"data-language\":\"json\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[l(a.span,{\"data-line\":\"\",children:l(a.span,{style:{color:\"#ABB2BF\"},children:\"{\"})}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#E06C75\"},children:'    \"functions\"'}),l(a.span,{style:{color:\"#ABB2BF\"},children:\": {\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#E06C75\"},children:'        \"app/[locale]/route.ts\"'}),l(a.span,{style:{color:\"#ABB2BF\"},children:\": {\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#E06C75\"},children:'            \"maxDuration\"'}),l(a.span,{style:{color:\"#ABB2BF\"},children:\": \"}),l(a.span,{style:{color:\"#D19A66\"},children:\"10\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:l(a.span,{style:{color:\"#ABB2BF\"},children:\"        }\"})}),\"\\n\",l(a.span,{\"data-line\":\"\",children:l(a.span,{style:{color:\"#ABB2BF\"},children:\"    }\"})}),\"\\n\",l(a.span,{\"data-line\":\"\",children:l(a.span,{style:{color:\"#ABB2BF\"},children:\"}\"})})]})})}),\"\\n\",l(a.h3,{children:\"環境變數\"}),\"\\n\",l(a.figure,{\"data-rehype-pretty-code-figure\":\"\",children:l(a.pre,{style:{backgroundColor:\"#282c34\",color:\"#abb2bf\"},tabIndex:\"0\",rawcontent:\"# .env.local\\nNEXT_PUBLIC_DEFAULT_LOCALE=zh-TW\",\"data-language\":\"bash\",\"data-theme\":\"one-dark-pro\",children:e(a.code,{\"data-language\":\"bash\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[l(a.span,{\"data-line\":\"\",children:l(a.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"# .env.local\"})}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#E06C75\"},children:\"NEXT_PUBLIC_DEFAULT_LOCALE\"}),l(a.span,{style:{color:\"#56B6C2\"},children:\"=\"}),l(a.span,{style:{color:\"#98C379\"},children:\"zh-TW\"})]})]})})}),\"\\n\",l(a.h2,{children:\"SEO 優化\"}),\"\\n\",l(a.p,{children:\"別忘記設定每個語言的 metadata：\"}),\"\\n\",e(a.figure,{\"data-rehype-pretty-code-figure\":\"\",children:[l(a.figcaption,{\"data-rehype-pretty-code-title\":\"\",\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",children:\"src/app/[locale]/page.tsx\"}),l(a.pre,{style:{backgroundColor:\"#282c34\",color:\"#abb2bf\"},tabIndex:\"0\",rawcontent:\"import { getTranslations } from 'next-intl/server';\\n\\nexport async function generateMetadata({ params: { locale } }: { params: { locale: string } }) {\\n    const t = await getTranslations({ locale, namespace: 'HomePage' });\\n\\n    return {\\n        title: t('title'),\\n        description: t('description'),\\n    };\\n}\",\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",children:e(a.code,{\"data-language\":\"typescript\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#C678DD\"},children:\"import\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\" { \"}),l(a.span,{style:{color:\"#E06C75\"},children:\"getTranslations\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\" } \"}),l(a.span,{style:{color:\"#C678DD\"},children:\"from\"}),l(a.span,{style:{color:\"#98C379\"},children:\" 'next-intl/server'\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#C678DD\"},children:\"export\"}),l(a.span,{style:{color:\"#C678DD\"},children:\" async\"}),l(a.span,{style:{color:\"#C678DD\"},children:\" function\"}),l(a.span,{style:{color:\"#61AFEF\"},children:\" generateMetadata\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\"({ \"}),l(a.span,{style:{color:\"#E06C75\"},children:\"params\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\": { \"}),l(a.span,{style:{color:\"#E06C75\",fontStyle:\"italic\"},children:\"locale\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\" } }: { \"}),l(a.span,{style:{color:\"#E06C75\"},children:\"params\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\": { \"}),l(a.span,{style:{color:\"#E06C75\"},children:\"locale\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\": \"}),l(a.span,{style:{color:\"#E5C07B\"},children:\"string\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\" } }) {\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#C678DD\"},children:\"    const\"}),l(a.span,{style:{color:\"#E5C07B\"},children:\" t\"}),l(a.span,{style:{color:\"#56B6C2\"},children:\" =\"}),l(a.span,{style:{color:\"#C678DD\"},children:\" await\"}),l(a.span,{style:{color:\"#61AFEF\"},children:\" getTranslations\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\"({ \"}),l(a.span,{style:{color:\"#E06C75\"},children:\"locale\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\", \"}),l(a.span,{style:{color:\"#E06C75\"},children:\"namespace\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\": \"}),l(a.span,{style:{color:\"#98C379\"},children:\"'HomePage'\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\" });\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#C678DD\"},children:\"    return\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\" {\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#E06C75\"},children:\"        title\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\": \"}),l(a.span,{style:{color:\"#61AFEF\"},children:\"t\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),l(a.span,{style:{color:\"#98C379\"},children:\"'title'\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\"),\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#E06C75\"},children:\"        description\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\": \"}),l(a.span,{style:{color:\"#61AFEF\"},children:\"t\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\"(\"}),l(a.span,{style:{color:\"#98C379\"},children:\"'description'\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\"),\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:l(a.span,{style:{color:\"#ABB2BF\"},children:\"    };\"})}),\"\\n\",l(a.span,{\"data-line\":\"\",children:l(a.span,{style:{color:\"#ABB2BF\"},children:\"}\"})})]})})]}),\"\\n\",l(a.h2,{children:\"維護建議\"}),\"\\n\",l(a.h3,{children:\"翻譯文件管理\"}),\"\\n\",l(a.p,{children:\"我建議用這種方式組織翻譯：\"}),\"\\n\",l(a.figure,{\"data-rehype-pretty-code-figure\":\"\",children:l(a.pre,{style:{backgroundColor:\"#282c34\",color:\"#abb2bf\"},tabIndex:\"0\",rawcontent:'{\\n    \"common\": {\\n        \"buttons\": {\\n            \"save\": \"儲存\",\\n            \"cancel\": \"取消\"\\n        }\\n    },\\n    \"pages\": {\\n        \"home\": { ... },\\n        \"about\": { ... }\\n    }\\n}',\"data-language\":\"json\",\"data-theme\":\"one-dark-pro\",children:e(a.code,{\"data-language\":\"json\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[l(a.span,{\"data-line\":\"\",children:l(a.span,{style:{color:\"#ABB2BF\"},children:\"{\"})}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#E06C75\"},children:'    \"common\"'}),l(a.span,{style:{color:\"#ABB2BF\"},children:\": {\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#E06C75\"},children:'        \"buttons\"'}),l(a.span,{style:{color:\"#ABB2BF\"},children:\": {\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#E06C75\"},children:'            \"save\"'}),l(a.span,{style:{color:\"#ABB2BF\"},children:\": \"}),l(a.span,{style:{color:\"#98C379\"},children:'\"儲存\"'}),l(a.span,{style:{color:\"#ABB2BF\"},children:\",\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#E06C75\"},children:'            \"cancel\"'}),l(a.span,{style:{color:\"#ABB2BF\"},children:\": \"}),l(a.span,{style:{color:\"#98C379\"},children:'\"取消\"'})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:l(a.span,{style:{color:\"#ABB2BF\"},children:\"        }\"})}),\"\\n\",l(a.span,{\"data-line\":\"\",children:l(a.span,{style:{color:\"#ABB2BF\"},children:\"    },\"})}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#E06C75\"},children:'    \"pages\"'}),l(a.span,{style:{color:\"#ABB2BF\"},children:\": {\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#E06C75\"},children:'        \"home\"'}),l(a.span,{style:{color:\"#ABB2BF\"},children:\": { \"}),l(a.span,{style:{color:\"#FFFFFF\"},children:\"...\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\" },\"})]}),\"\\n\",e(a.span,{\"data-line\":\"\",children:[l(a.span,{style:{color:\"#E06C75\"},children:'        \"about\"'}),l(a.span,{style:{color:\"#ABB2BF\"},children:\": { \"}),l(a.span,{style:{color:\"#FFFFFF\"},children:\"...\"}),l(a.span,{style:{color:\"#ABB2BF\"},children:\" }\"})]}),\"\\n\",l(a.span,{\"data-line\":\"\",children:l(a.span,{style:{color:\"#ABB2BF\"},children:\"    }\"})}),\"\\n\",l(a.span,{\"data-line\":\"\",children:l(a.span,{style:{color:\"#ABB2BF\"},children:\"}\"})})]})})})]})}return{default:function(n={}){const{wrapper:e}=n.components||{};return e?l(e,{...n,children:l(_createMdxContent,{...n})}):_createMdxContent(n)}};",
    "permalink": "/blog/posts/nextjs-internationalization-guide-next-intl"
  },
  {
    "title": "測試remark-gfm",
    "date": "2025-02-27T00:00:00.000Z",
    "description": "測試remark-gfm編譯了哪些markdown語法",
    "rawContent": "# 標題一\r\n\r\n## 標題二\r\n\r\n### 標題三\r\n\r\n#### 標題四\r\n\r\n##### 標題五\r\n\r\n###### 標題六\r\n\r\n**粗體文字**\r\n**粗體文字**\r\n_斜體文字_\r\n_斜體文字_\r\n\r\n普通文字\r\n\r\n~~刪除線文字~~\r\n\r\n[點擊這裡](https://www.garylin.dev/)\r\n\r\n![測試圖片](/avatar/author.jpg)\r\n\r\n> 這是一段引用文字\r\n>\r\n> > 這是一段引用文字\r\n> >\r\n> > > 這是一段引用文字\r\n\r\n> 這是一段引用文字\r\n>\r\n> > > 這是一段引用文字\r\n> > > 這是一段引用文字\r\n\r\n- 項目一\r\n- 項目二\r\n- 項目三\r\n\r\n* 項目一\r\n* 項目二\r\n* 項目三\r\n\r\n- 項目一\r\n- 項目二\r\n- 項目三\r\n\r\n1. 第一項\r\n2. 第二項\r\n3. 第三項\r\n\r\n- [ ] 未完成項目\r\n- [x] 已完成項目\r\n\r\n這是一段 `src/app/globals.css`\r\n\r\n```js\r\nimport { MetadataRoute } from 'next';\r\n\r\nexport default function robots(): MetadataRoute.Robots {\r\n    return {\r\n        rules: {\r\n            userAgent: '*', // 針對所有搜索引擎\r\n            allow: '/', // 允許訪問所有頁面\r\n            disallow: '/private/', // 禁止訪問私有頁面\r\n        },\r\n        sitemap: 'https://www.garylin.dev/sitemap.xml', // 指向網站地圖的 URL\r\n    };\r\n}\r\n```\r\n\r\n| 標題一  | 標題二  |\r\n| ------- | ------- |\r\n| 單元格1 | 單元格2 |\r\n| 單元格3 | 單元格4 |\r\n\r\n---\r\n\r\n---\r\n\r\n---\r\n\r\nhttps://www.garylin.dev/\r\n\r\ngarylin0969@gmail.com\r\n\r\n[![圖片描述](/avatar/author.jpg)](https://www.garylin.dev/)\r\n\r\n\\*這不是斜體\\*\r\n\r\n<div>\r\n    <p>測試 JSX</p>\r\n</div>",
    "category": "Others",
    "tags": [
      "MDX"
    ],
    "headings": [
      {
        "level": 2,
        "text": "標題二"
      },
      {
        "level": 3,
        "text": "標題三"
      },
      {
        "level": 4,
        "text": "標題四"
      },
      {
        "level": 5,
        "text": "標題五"
      },
      {
        "level": 6,
        "text": "標題六"
      }
    ],
    "slug": "test-remark-gfm-markdown-features",
    "draft": true,
    "code": "const{Fragment:n,jsx:l,jsxs:e}=arguments[0];function _createMdxContent(r){const c={a:\"a\",blockquote:\"blockquote\",code:\"code\",del:\"del\",em:\"em\",figure:\"figure\",h1:\"h1\",h2:\"h2\",h3:\"h3\",h4:\"h4\",h5:\"h5\",h6:\"h6\",hr:\"hr\",img:\"img\",input:\"input\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",table:\"table\",tbody:\"tbody\",td:\"td\",th:\"th\",thead:\"thead\",tr:\"tr\",ul:\"ul\",...r.components};return e(n,{children:[l(c.h1,{children:\"標題一\"}),\"\\n\",l(c.h2,{children:\"標題二\"}),\"\\n\",l(c.h3,{children:\"標題三\"}),\"\\n\",l(c.h4,{children:\"標題四\"}),\"\\n\",l(c.h5,{children:\"標題五\"}),\"\\n\",l(c.h6,{children:\"標題六\"}),\"\\n\",e(c.p,{children:[l(c.strong,{children:\"粗體文字\"}),\"\\r\\n\",l(c.strong,{children:\"粗體文字\"}),\"\\r\\n\",l(c.em,{children:\"斜體文字\"}),\"\\r\\n\",l(c.em,{children:\"斜體文字\"})]}),\"\\n\",l(c.p,{children:\"普通文字\"}),\"\\n\",l(c.p,{children:l(c.del,{children:\"刪除線文字\"})}),\"\\n\",l(c.p,{children:l(c.a,{href:\"https://www.garylin.dev/\",children:\"點擊這裡\"})}),\"\\n\",l(c.p,{children:l(c.img,{src:\"/avatar/author.jpg\",alt:\"測試圖片\"})}),\"\\n\",e(c.blockquote,{children:[\"\\n\",l(c.p,{children:\"這是一段引用文字\"}),\"\\n\",e(c.blockquote,{children:[\"\\n\",l(c.p,{children:\"這是一段引用文字\"}),\"\\n\",e(c.blockquote,{children:[\"\\n\",l(c.p,{children:\"這是一段引用文字\"}),\"\\n\"]}),\"\\n\"]}),\"\\n\"]}),\"\\n\",e(c.blockquote,{children:[\"\\n\",l(c.p,{children:\"這是一段引用文字\"}),\"\\n\",e(c.blockquote,{children:[\"\\n\",e(c.blockquote,{children:[\"\\n\",l(c.p,{children:\"這是一段引用文字\\r\\n這是一段引用文字\"}),\"\\n\"]}),\"\\n\"]}),\"\\n\"]}),\"\\n\",e(c.ul,{children:[\"\\n\",l(c.li,{children:\"項目一\"}),\"\\n\",l(c.li,{children:\"項目二\"}),\"\\n\",l(c.li,{children:\"項目三\"}),\"\\n\"]}),\"\\n\",e(c.ul,{children:[\"\\n\",l(c.li,{children:\"項目一\"}),\"\\n\",l(c.li,{children:\"項目二\"}),\"\\n\",l(c.li,{children:\"項目三\"}),\"\\n\"]}),\"\\n\",e(c.ul,{children:[\"\\n\",l(c.li,{children:\"項目一\"}),\"\\n\",l(c.li,{children:\"項目二\"}),\"\\n\",l(c.li,{children:\"項目三\"}),\"\\n\"]}),\"\\n\",e(c.ol,{children:[\"\\n\",l(c.li,{children:\"第一項\"}),\"\\n\",l(c.li,{children:\"第二項\"}),\"\\n\",l(c.li,{children:\"第三項\"}),\"\\n\"]}),\"\\n\",e(c.ul,{className:\"contains-task-list\",children:[\"\\n\",e(c.li,{className:\"task-list-item\",children:[l(c.input,{type:\"checkbox\",disabled:!0}),\" \",\"未完成項目\"]}),\"\\n\",e(c.li,{className:\"task-list-item\",children:[l(c.input,{type:\"checkbox\",checked:!0,disabled:!0}),\" \",\"已完成項目\"]}),\"\\n\"]}),\"\\n\",e(c.p,{children:[\"這是一段 \",l(c.code,{children:\"src/app/globals.css\"})]}),\"\\n\",l(c.figure,{\"data-rehype-pretty-code-figure\":\"\",children:l(c.pre,{style:{backgroundColor:\"#282c34\",color:\"#abb2bf\"},tabIndex:\"0\",rawcontent:\"import { MetadataRoute } from 'next';\\n\\nexport default function robots(): MetadataRoute.Robots {\\n    return {\\n        rules: {\\n            userAgent: '*', // 針對所有搜索引擎\\n            allow: '/', // 允許訪問所有頁面\\n            disallow: '/private/', // 禁止訪問私有頁面\\n        },\\n        sitemap: 'https://www.garylin.dev/sitemap.xml', // 指向網站地圖的 URL\\n    };\\n}\",\"data-language\":\"js\",\"data-theme\":\"one-dark-pro\",children:e(c.code,{\"data-language\":\"js\",\"data-theme\":\"one-dark-pro\",style:{display:\"grid\"},children:[e(c.span,{\"data-line\":\"\",children:[l(c.span,{style:{color:\"#C678DD\"},children:\"import\"}),l(c.span,{style:{color:\"#ABB2BF\"},children:\" { \"}),l(c.span,{style:{color:\"#E06C75\"},children:\"MetadataRoute\"}),l(c.span,{style:{color:\"#ABB2BF\"},children:\" } \"}),l(c.span,{style:{color:\"#C678DD\"},children:\"from\"}),l(c.span,{style:{color:\"#98C379\"},children:\" 'next'\"}),l(c.span,{style:{color:\"#ABB2BF\"},children:\";\"})]}),\"\\n\",l(c.span,{\"data-line\":\"\",children:\" \"}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[l(c.span,{style:{color:\"#C678DD\"},children:\"export\"}),l(c.span,{style:{color:\"#C678DD\"},children:\" default\"}),l(c.span,{style:{color:\"#C678DD\"},children:\" function\"}),l(c.span,{style:{color:\"#61AFEF\"},children:\" robots\"}),l(c.span,{style:{color:\"#ABB2BF\"},children:\"(): \"}),l(c.span,{style:{color:\"#E5C07B\"},children:\"MetadataRoute\"}),l(c.span,{style:{color:\"#ABB2BF\"},children:\".\"}),l(c.span,{style:{color:\"#E5C07B\"},children:\"Robots\"}),l(c.span,{style:{color:\"#ABB2BF\"},children:\" {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[l(c.span,{style:{color:\"#C678DD\"},children:\"    return\"}),l(c.span,{style:{color:\"#ABB2BF\"},children:\" {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[l(c.span,{style:{color:\"#E06C75\"},children:\"        rules\"}),l(c.span,{style:{color:\"#ABB2BF\"},children:\": {\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[l(c.span,{style:{color:\"#E06C75\"},children:\"            userAgent\"}),l(c.span,{style:{color:\"#ABB2BF\"},children:\": \"}),l(c.span,{style:{color:\"#98C379\"},children:\"'*'\"}),l(c.span,{style:{color:\"#ABB2BF\"},children:\", \"}),l(c.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// 針對所有搜索引擎\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[l(c.span,{style:{color:\"#E06C75\"},children:\"            allow\"}),l(c.span,{style:{color:\"#ABB2BF\"},children:\": \"}),l(c.span,{style:{color:\"#98C379\"},children:\"'/'\"}),l(c.span,{style:{color:\"#ABB2BF\"},children:\", \"}),l(c.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// 允許訪問所有頁面\"})]}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[l(c.span,{style:{color:\"#E06C75\"},children:\"            disallow\"}),l(c.span,{style:{color:\"#ABB2BF\"},children:\": \"}),l(c.span,{style:{color:\"#98C379\"},children:\"'/private/'\"}),l(c.span,{style:{color:\"#ABB2BF\"},children:\", \"}),l(c.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// 禁止訪問私有頁面\"})]}),\"\\n\",l(c.span,{\"data-line\":\"\",children:l(c.span,{style:{color:\"#ABB2BF\"},children:\"        },\"})}),\"\\n\",e(c.span,{\"data-line\":\"\",children:[l(c.span,{style:{color:\"#E06C75\"},children:\"        sitemap\"}),l(c.span,{style:{color:\"#ABB2BF\"},children:\": \"}),l(c.span,{style:{color:\"#98C379\"},children:\"'https://www.garylin.dev/sitemap.xml'\"}),l(c.span,{style:{color:\"#ABB2BF\"},children:\", \"}),l(c.span,{style:{color:\"#7F848E\",fontStyle:\"italic\"},children:\"// 指向網站地圖的 URL\"})]}),\"\\n\",l(c.span,{\"data-line\":\"\",children:l(c.span,{style:{color:\"#ABB2BF\"},children:\"    };\"})}),\"\\n\",l(c.span,{\"data-line\":\"\",children:l(c.span,{style:{color:\"#ABB2BF\"},children:\"}\"})})]})})}),\"\\n\",e(c.table,{children:[l(c.thead,{children:e(c.tr,{children:[l(c.th,{children:\"標題一\"}),l(c.th,{children:\"標題二\"})]})}),e(c.tbody,{children:[e(c.tr,{children:[l(c.td,{children:\"單元格1\"}),l(c.td,{children:\"單元格2\"})]}),e(c.tr,{children:[l(c.td,{children:\"單元格3\"}),l(c.td,{children:\"單元格4\"})]})]})]}),\"\\n\",l(c.hr,{}),\"\\n\",l(c.hr,{}),\"\\n\",l(c.hr,{}),\"\\n\",l(c.p,{children:l(c.a,{href:\"https://www.garylin.dev/\",children:\"https://www.garylin.dev/\"})}),\"\\n\",l(c.p,{children:l(c.a,{href:\"mailto:garylin0969@gmail.com\",children:\"garylin0969@gmail.com\"})}),\"\\n\",l(c.p,{children:l(c.a,{href:\"https://www.garylin.dev/\",children:l(c.img,{src:\"/avatar/author.jpg\",alt:\"圖片描述\"})})}),\"\\n\",l(c.p,{children:\"*這不是斜體*\"}),\"\\n\",l(\"div\",{children:l(\"p\",{children:\"測試 JSX\"})})]})}return{default:function(n={}){const{wrapper:e}=n.components||{};return e?l(e,{...n,children:l(_createMdxContent,{...n})}):_createMdxContent(n)}};",
    "permalink": "/blog/posts/test-remark-gfm-markdown-features"
  }
]